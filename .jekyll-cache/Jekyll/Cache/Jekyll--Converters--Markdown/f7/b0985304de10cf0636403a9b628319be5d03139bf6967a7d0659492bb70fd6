I"âÕ<h2 id="ë³µì¡í•œ-crudì—-ëŒ€í•œ-spring-data-jpa-ì²˜ë¦¬">ë³µì¡í•œ CRUDì— ëŒ€í•œ Spring Data JPA ì²˜ë¦¬</h2>

<ul>
  <li>ê¸°ë³¸ ê³µí†µ ì¸í„°í˜ì´ìŠ¤ì—ì„œ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ë“¤ì€ ë§ ê·¸ëŒ€ë¡œ ê¸°ë³¸ ê³µí†µ CRUD</li>
  <li>ì¦‰, <strong>ë³µì¡í•œ CRUDì— ëŒ€í•´ì„  ì§ì ‘ ì¿¼ë¦¬ë¥¼ ìƒì„±</strong>í•´ì¤˜ì•¼ í•¨</li>
  <li>ê·¸ëŸ¼ í•´ë‹¹ <strong>ì¸í„°í˜ì´ìŠ¤ë¥¼</strong> <strong>ì§ì ‘ êµ¬í˜„í•´ì•¼ ë˜ëŠ” ê²ƒì¸ê°€?</strong> â†’ êµ¬í˜„í•´ì•¼ ë˜ëŠ” ë¶€ë¶„ì´ ë„ˆë¬´ë‚˜ë„ ë§ìœ¼ë©°, ì´ë¯¸ Spring Data Jpaì—ì„œ êµ¬í˜„ì²´ë¥¼ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì£¼ê³  ìˆìŒ</li>
  <li>ì´ë•Œ í•„ìš”í•œ ê²ƒë“¤ì´ í•˜ìœ„ ê¸°ëŠ¥ë“¤
    <ul>
      <li><strong>ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„±</strong></li>
      <li><strong>NamedQuery</strong></li>
      <li><strong>@Query</strong></li>
    </ul>
  </li>
  <li>ë¶€ê°€ ì„¤ì • ê°€ëŠ¥ ë¶€ë¶„
    <ul>
      <li>í˜ì´ì§•ê³¼ ì •ë ¬</li>
      <li>ë²Œí¬ì„± ìˆ˜ì • ì¿¼ë¦¬</li>
      <li>@EntityGraph</li>
    </ul>
  </li>
</ul>

<h2 id="ë³µì¡í•œ-crud-ì²˜ë¦¬-ê³µí†µì´-ì•„ë‹Œ-ë¶€ë¶„">ë³µì¡í•œ CRUD ì²˜ë¦¬ (ê³µí†µì´ ì•„ë‹Œ ë¶€ë¶„)</h2>

<h3 id="ë©”ì†Œë“œ-ì´ë¦„ìœ¼ë¡œ-ì¿¼ë¦¬-ìƒì„±">ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„±</h3>

<ul>
  <li><strong>ë©”ì†Œë“œ ì´ë¦„ì„ ë¶„ì„</strong>í•´ì„œ <strong>JPQL ì¿¼ë¦¬ ìƒì„± ë° ì‹¤í–‰</strong></li>
  <li><strong>ì •í•´ì§„ ê·œì¹™</strong>ì— ë”°ë¼ Spring Data Jpaê°€ ë©”ì„œë“œ ì´ë¦„ì„ <strong>ë¶„ì„</strong>í•˜ì—¬ ì´ì— ë§ëŠ” <strong>JPQL ì¿¼ë¦¬ë¥¼ ìƒì„±í•˜ê³  ì‹¤í–‰</strong>í•´ì£¼ëŠ” ê²ƒ!</li>
  <li>ë©”ì„œë“œ ëª…ì— Entity ì—ì„œ ì„¤ì •ëœ <strong>í•„ë“œëª…ê³¼ ì •í•´ì§„ ì¡°ê±´ëª… ê·œì¹™ì— ë”°ë¼ ì‘ì„±</strong>ë§Œ í•´ì£¼ë©´ ë˜ëŠ” ê²ƒ (ì •ë§ ë³µì¡í•œ ì¡°ê±´ì´ ì•„ë‹Œ ì´ìƒ ì›¬ë§Œí•œê±´ ë‹¤ ë¨!) â†’ <a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods.query-creation">ê³µì‹ ë¬¸ì„œ</a></li>
  <li>But, ì¡°ê±´ì´ ê¸¸ì–´ì§ˆ ìˆ˜ë¡ ë©”ì„œë“œ ëª…ì´ ê¸¸ì–´ì§€ê³ , ë©”ì„œë“œì˜ ëª©ì ì„ í•œëˆˆì— íŒŒì•…í•˜ê¸°ê°€ ì–´ë ¤ì›€ (ê°€ë…ì„± ì €í•˜) â†’ <strong>ì¡°ê±´ì´ ë§ì•„ì§€ë©´ ë‹¤ë¥¸ ë°©ë²•ì„ ì„ íƒ</strong>í•  ìˆ˜ ìˆìŒ(<strong>NamedQuery, @Query,</strong> â€¦)</li>
  <li>ì˜ˆì‹œ
    <ul>
      <li>íšŒì› ì¡°íšŒ by ì´ë¦„, ë‚˜ì´</li>
      <li><strong>ìˆœìˆ˜ JPA (not Spring Data Jpa)</strong>
        <ul>
          <li>method : <code class="language-plaintext highlighter-rouge">findByUsernameAndAgeGreaterThan(String username, int age)</code></li>
          <li>
            <p>code</p>

            <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">return</span> <span class="n">em</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span><span class="s">"select m from Member m where m.username = :username and m.age &gt; :age"</span><span class="o">,</span> <span class="nc">Member</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
  	 <span class="o">.</span><span class="na">setParameter</span><span class="o">(</span><span class="s">"username"</span><span class="o">,</span> <span class="n">username</span><span class="o">)</span>
  	 <span class="o">.</span><span class="na">setParameter</span><span class="o">(</span><span class="s">"age"</span><span class="o">,</span> <span class="n">age</span><span class="o">)</span>
  	 <span class="o">.</span><span class="na">getResultList</span><span class="o">();</span>
</code></pre></div>            </div>
          </li>
          <li><strong>ì§ì ‘ JPQLì„ ì§œì•¼</strong>ë˜ëŠ” ë¶ˆí¸í•¨ê³¼ <strong>íŒŒë¼ë¯¸í„° ë°”ì¸ë”©, ë°˜í™˜ ê²°ê³¼ ì„¤ì •</strong> ë“± <strong>ìƒê°ë³´ë‹¤ ë§ì€ ì‘ì—…</strong>ì„ í•´ì£¼ì–´ì•¼ í•¨</li>
          <li>ë˜í•œ JPQLì„ <strong>ì§ì ‘ ì§œë©´ì„œ ì˜¤ë¥˜ ë°œìƒ ê°€ëŠ¥ì„±</strong> ì¡´ì¬</li>
        </ul>
      </li>
      <li><strong>ìŠ¤í”„ë§ ë°ì´í„° JPA</strong>
        <ul>
          <li>method : <code class="language-plaintext highlighter-rouge">findByUsernameAndAgeGreaterThan(String username, int age)</code></li>
          <li>code : <strong>ìŠ¤í”„ë§ ë°ì´í„° JPA ê°€ ìë™ìœ¼ë¡œ í•´ë‹¹ ë©”ì„œë“œ ì´ë¦„ì„ ë¶„ì„í•´ì„œ ìƒì„±</strong>í•´ì¤Œ 
  â†’ <code class="language-plaintext highlighter-rouge">find**By(**Name**And**(Age**GreaterThan**))</code> â‡’ <code class="language-plaintext highlighter-rouge">"select m from Member m where m.username = :name and m.age &gt; :age"</code>
            <ul>
              <li>find â†’ <code class="language-plaintext highlighter-rouge">select</code></li>
              <li>by â†’ <code class="language-plaintext highlighter-rouge">where</code>
                <ul>
                  <li>name â†’ <code class="language-plaintext highlighter-rouge">member.name = :name</code></li>
                  <li>and â†’ <code class="language-plaintext highlighter-rouge">and</code></li>
                  <li>age â†’ <code class="language-plaintext highlighter-rouge">member.age</code></li>
                  <li>greater than â†’ <code class="language-plaintext highlighter-rouge">&gt; :age</code></li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li>ì£¼ìš” ê·œì¹™
        <ul>
          <li><strong>ì¡°íšŒ</strong>
            <ul>
              <li><code class="language-plaintext highlighter-rouge">findâ€¦By</code>, <code class="language-plaintext highlighter-rouge">readâ€¦By</code>, <code class="language-plaintext highlighter-rouge">queryâ€¦By</code>, <code class="language-plaintext highlighter-rouge">getâ€¦By</code></li>
              <li><code class="language-plaintext highlighter-rouge">â€¦</code> ë¶€ë¶„ì—ëŠ” í•´ë‹¹ ë©”ì„œë“œê°€ ì–´ë–¤ ëª©ì ìœ¼ë¡œ ì¡°íšŒë˜ê³  ìˆëŠ” ê²ƒì¸ì§€ì— ëŒ€í•œ <strong>ì„¤ëª…(ë‚´ìš©)ì´ ë“¤ì–´ê°€ë„ ë¨</strong> â†’ ex) <code class="language-plaintext highlighter-rouge">findTempByâ€¦</code></li>
              <li>ë°˜í™˜íƒ€ì… : <strong>Entity</strong> or **List<Entity>**, â€¦</Entity></li>
            </ul>
          </li>
          <li><strong>COUNT</strong>
            <ul>
              <li><code class="language-plaintext highlighter-rouge">countâ€¦By</code></li>
              <li>ë°˜í™˜íƒ€ì… : <code class="language-plaintext highlighter-rouge">long</code></li>
            </ul>
          </li>
          <li><strong>EXISTS</strong>
            <ul>
              <li><code class="language-plaintext highlighter-rouge">existsâ€¦By</code></li>
              <li>ë°˜í™˜íƒ€ì… : <code class="language-plaintext highlighter-rouge">boolean</code></li>
            </ul>
          </li>
          <li><strong>DELETE</strong>
            <ul>
              <li><code class="language-plaintext highlighter-rouge">deleteâ€¦By</code>, <code class="language-plaintext highlighter-rouge">reomveâ€¦By</code></li>
              <li>ë°˜í™˜íƒ€ì… : <code class="language-plaintext highlighter-rouge">long</code></li>
            </ul>
          </li>
          <li><strong>DISTINCT</strong>
            <ul>
              <li><code class="language-plaintext highlighter-rouge">findâ€¦DistinctBy</code></li>
            </ul>
          </li>
          <li><strong>LIMIT</strong>
            <ul>
              <li><code class="language-plaintext highlighter-rouge">findFirst3</code>, <code class="language-plaintext highlighter-rouge">findFirst</code>, <code class="language-plaintext highlighter-rouge">findTop</code>, <code class="language-plaintext highlighter-rouge">findTop3</code></li>
            </ul>
          </li>
          <li>ì´ì™¸ëŠ” <a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.query-methods.query-creation">ê³µì‹ ë¬¸ì„œ</a> ì°¸ê³ </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h3 id="ë©”ì„œë“œ-ì´ë¦„ìœ¼ë¡œ-jpa-namedquery-í˜¸ì¶œ">ë©”ì„œë“œ ì´ë¦„ìœ¼ë¡œ JPA NamedQuery í˜¸ì¶œ</h3>

<ul>
  <li>
    <p><strong>NamedQuery</strong> ì„ ì–¸</p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nd">@NamedQuery</span><span class="o">(</span>
          <span class="n">name</span> <span class="o">=</span> <span class="s">"Member.findByUsername"</span><span class="o">,</span>
          <span class="n">query</span> <span class="o">=</span> <span class="s">"select m from Member m where m.name = :username"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Member</span><span class="o">{...}</span>
    
</code></pre></div>    </div>

    <ul>
      <li>JPA ì—ì„œ ì§€ì›í•˜ëŠ” <strong>NamedQuery</strong> â†’ <strong>ë¡œë”© ì‹œì ì— ë°”ì¸ë”© ë° ê²€ì¦, ì¬í™œìš©ì´ ê°€ëŠ¥</strong>í•˜ë‹¤ëŠ” ì¥ì  ì¡´ì¬ â†’ <strong>SpringDataJpa ì—ì„œì˜ <code class="language-plaintext highlighter-rouge">@Query</code></strong></li>
      <li>í•˜ì§€ë§Œ, <strong>ì •ì ì¸ ì¿¼ë¦¬ë§Œ ë™ì‘</strong>í•œë‹¤ëŠ” ë‹¨ì  ì¡´ì¬</li>
      <li><strong>Entity Class ë‹¨ì— ì–´ë…¸í…Œì´ì…˜</strong>ìœ¼ë¡œ ì •ì˜</li>
      <li>í˜¸ì¶œë  ì´ë¦„ê³¼ ì¿¼ë¦¬ë¥¼ í•´ë‹¹ NamedQueryì— ì‘ì„±</li>
    </ul>
  </li>
  <li>
    <p>ì‚¬ìš©</p>

    <p>â€» ì‹¤ë¬´ì—ì„œëŠ” ì˜ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ê¸°ëŠ¥ â†’ <code class="language-plaintext highlighter-rouge">@Query</code> ë¼ëŠ” ê¸°ëŠ¥ì´ ì¡´ì¬í•˜ê¸°ì—!!</p>

    <ul>
      <li>
        <p><strong>ìˆœìˆ˜ JPA</strong></p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="nf">findByNameNamedQuery</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="n">em</span><span class="o">.</span><span class="na">createNamedQuery</span><span class="o">(</span><span class="s">"Member.findByUsername"</span><span class="o">,</span> <span class="nc">Member</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
              <span class="o">.</span><span class="na">setParameter</span><span class="o">(</span><span class="s">"username"</span><span class="o">,</span> <span class="n">name</span><span class="o">)</span>
              <span class="o">.</span><span class="na">getResultList</span><span class="o">();</span>
  <span class="o">}</span>
</code></pre></div>        </div>

        <ul>
          <li>íŒŒë¼ë¯¸í„°ë„ ì§ì ‘ ì„¤ì •í•´ì£¼ì–´ì•¼ í•˜ê³  ì½”ë“œë„ ê¸¸ì–´ì§€ë©° ì—¬ê°„ ê·€ì°®ì€ ê²ƒì´ ì•„ë‹˜</li>
        </ul>
      </li>
      <li>
        <p><strong>Spring Data Jpa</strong></p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nd">@Query</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"Member.findByUsername"</span><span class="o">)</span> <span class="c1">// ìƒëµ ê°€ëŠ¥ (ë©”ì„œë“œëª…ì„ ì˜ ì„¤ì •í–ˆë‹¤ë©´)</span>
  <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="nf">findByUsername</span><span class="o">(</span><span class="nd">@Param</span><span class="o">(</span><span class="s">"username"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">name</span><span class="o">);</span>
</code></pre></div>        </div>

        <ul>
          <li><code class="language-plaintext highlighter-rouge">@Query(name = "Member.findByUsername")</code>
            <ul>
              <li>Entity ì— ì •ì˜í•œ NamedQuery ì—°ê²°</li>
              <li>ìƒëµ ì‹œ í˜„ì¬ JpaRepository ì— ì„¤ì •ëœ <strong>Entity ì™€ Method ëª…ì„ í†µí•´ ìë™ìœ¼ë¡œ ì°¾ì•„ì™€</strong> ì—°ê²°í•´ ì¤Œ â†’ Entity Type : <code class="language-plaintext highlighter-rouge">Member</code>, Method Name : <code class="language-plaintext highlighter-rouge">findByUsername</code> â‡’ <code class="language-plaintext highlighter-rouge">"Member.findByUsername"</code></li>
            </ul>
          </li>
        </ul>

        <aside>
  âš ï¸ <strong>@Query ì—†ì´ NamedQuery ì¸ì§€ ë©”ì„œë“œëª…ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„±ì¸ì§€ ì–´ë–»ê²Œ ì•Œì§€? â†’ [ë™ì‘ Ruleì— ë”°ë¼]</strong>
  <ul>
  <li> í•´ë‹¹ ë©”ì„œë“œëª… ì¡°ê±´ìœ¼ë¡œ NamedQuery ê°€ ìˆë‹¤ â†’ NamedQuery ë¡œ ë™ì‘ </li>
  <li> ì—†ë‹¤ â†’ Method ëª…ìœ¼ë¡œ query ìƒì„± â†’ ê´€ë¡€ë¥¼ ë”°ë¼ì„œ ìë™ìœ¼ë¡œ query ìƒì„± </li>
  </ul>
  </aside>
      </li>
    </ul>
  </li>
</ul>

<h3 id="query-ë¦¬í¬ì§€í† ë¦¬-ë©”ì„œë“œì—-ì¿¼ë¦¬-ì •ì˜">@Query (ë¦¬í¬ì§€í† ë¦¬ ë©”ì„œë“œì— ì¿¼ë¦¬ ì •ì˜)</h3>

<ul>
  <li><strong>NamedQueryì˜ ë°œì „í˜•</strong>ì´ë¼ ìƒê°í•˜ë©´ ë¨ (NamedQueryì˜ ëª¨ë“  ì¥ì ì„ ê°€ì ¸ì˜¤ë©´ì„œ <strong>ì‚¬ìš©ì€ ë” ê¹”ë”</strong>í•˜ê²Œ.)</li>
  <li>NamedQueryëŠ” Entity Class ë‹¨ì— ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ì •ì˜í•´ì•¼ë˜ì§€ë§Œ, <code class="language-plaintext highlighter-rouge">@Query</code>ëŠ” <strong>ë¦¬í¬ì§€í† ë¦¬ ë©”ì„œë“œì— ë°”ë¡œ ì¿¼ë¦¬ ì •ì˜</strong>ê°€ ê°€ëŠ¥ (í˜¸ì¶œ ì´ë¦„ë„ ì •í•˜ì§€ ì•ŠìŒ)</li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">@Query</code></p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nd">@Query</span><span class="o">(</span><span class="s">"select m from Member m where m.name = :username and m.age = :age"</span><span class="o">)</span>
  <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="nf">findUserByNameAndAge</span><span class="o">(</span><span class="nd">@Param</span><span class="o">(</span><span class="s">"username"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="nd">@Param</span><span class="o">(</span><span class="s">"age"</span><span class="o">)</span> <span class="kt">int</span> <span class="n">age</span><span class="o">);</span>
</code></pre></div>    </div>

    <ul>
      <li><strong>ì§ì ‘ jpql ë¬¸ì„ ì‘ì„±í•˜ì—¬ ì ìš©</strong>í•˜ëŠ” ê²ƒ.</li>
      <li>NamedQuery ëŒ€ì‹  ì´ê±¸ <strong>ì‹¤ë¬´ì—ì„œ ë§ì´ ì‚¬ìš©</strong>í•¨ â†’ NamedQuery ì˜ ì¥ì ì„ ê°€ì ¸ê°€ë©´ì„œ <strong>ì§ì ‘ Repo ì— jpql ì„ ì‘ì„±</strong>í•  ìˆ˜ ìˆìŒ</li>
      <li>ì¼ëª… ì´ë¦„ì´ ì—†ëŠ” NamedQuery</li>
    </ul>

    <aside>
  âš ï¸ <strong>Tip!</strong>
  <br />
  ì‹¤ë¬´ì—ì„œëŠ” ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„± ê¸°ëŠ¥ì€ íŒŒë¼ë¯¸í„°ê°€ ì¦ê°€í•˜ë©´ ë©”ì„œë“œ ì´ë¦„ì´ ë§¤ìš° ì§€ì €ë¶„í•´ì§. ë”°ë¼ì„œ <code>@Query</code> ê¸°ëŠ¥ì„ ìì£¼ ì‚¬ìš©
    
  </aside>
  </li>
  <li><strong>ì¡°íšŒ</strong>
    <ul>
      <li>
        <p><strong>ë‹¨ìˆœ ê°’</strong> ì¡°íšŒ</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nd">@Query</span><span class="o">(</span><span class="s">"select m.username from Member m"</span><span class="o">)</span>
  <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="nf">findUsernameList</span><span class="o">();</span>
</code></pre></div>        </div>

        <ul>
          <li>JPA <strong>ê°’ íƒ€ì…</strong>( â€¦ , <code class="language-plaintext highlighter-rouge">@Embedded</code>)ë„ í•´ë‹¹ ë°©ì‹ìœ¼ë¡œ ì¡°íšŒ ê°€ëŠ¥</li>
        </ul>
      </li>
      <li>
        <p><strong>DTOë¡œ ì§ì ‘</strong> ì¡°íšŒ</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nd">@Query</span><span class="o">(</span><span class="s">"select new study.datajpa.dto.MemberDto(m.id, m.username, t.name) "</span> <span class="o">+</span>
   <span class="s">"from Member m join m.team t"</span><span class="o">)</span>
  <span class="nc">List</span><span class="o">&lt;</span><span class="nc">MemberDto</span><span class="o">&gt;</span> <span class="nf">findMemberDto</span><span class="o">();</span>
</code></pre></div>        </div>

        <ul>
          <li>JPAì˜ <strong>new ëª…ë ¹ì–´</strong>ë¥¼ ì‚¬ìš© â†’ <code class="language-plaintext highlighter-rouge">new study.datajpa.dto.MemberDto(m.id, m.username, t.name)</code></li>
          <li><strong>ìƒì„±ìê°€ ë§ëŠ” DTOê°€ í•„ìš”</strong> â†’ JPAì˜ JPQLì‚¬ìš©ë°©ì‹ê³¼ ë™ì¼</li>
        </ul>
      </li>
      <li>
        <p>íŒŒë¼ë¯¸í„° ë°”ì¸ë”©</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nd">@Query</span><span class="o">(</span><span class="s">"select m from Member m where m.username = :name"</span><span class="o">)</span>
  <span class="nc">Member</span> <span class="nf">findMembers</span><span class="o">(</span><span class="nd">@Param</span><span class="o">(</span><span class="s">"name"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">username</span><span class="o">);</span>
</code></pre></div>        </div>

        <ul>
          <li><code class="language-plaintext highlighter-rouge">@Param("name")</code> ì„ í†µí•´ì„œ ë°”ì¸ë”©</li>
          <li>ìœ„ì¹˜ê¸°ë°˜ë„ ì¡´ì¬í•˜ì§€ë§Œ, ì‹¤ìˆ˜ê°€ ë°œìƒí•  ê°€ëŠ¥ì„±ì´ í¬ê³  ê°€ë…ì„±ì´ ë–¨ì–´ì§</li>
          <li>ê·¸ë˜ì„œ ì´ë¦„ê¸°ë°˜ìœ¼ë¡œ ë°”ì¸ë”©í•˜ëŠ” ê²ƒì„ ê¶Œì¥</li>
          <li>ì»¬ë ‰ì…˜ë„ ë™ì¼í•˜ê²Œ ë°”ì¸ë”© ê°€ëŠ¥ (<strong>in query</strong> ì—ì„œ ì‚¬ìš©)</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>ë°˜í™˜ íƒ€ì…</strong>
    <ul>
      <li>ì»¬ë ‰ì…˜(<code class="language-plaintext highlighter-rouge">List, Set, â€¦</code>), ë‹¨ê±´, ë‹¨ê±´ Optional(<code class="language-plaintext highlighter-rouge">Optional&lt;&gt;</code>) ê°€ëŠ¥</li>
    </ul>
  </li>
</ul>

<h2 id="ë¶€ê°€-ê¸°ëŠ¥-í˜ì´ì§•-ë²Œí¬ì—°ì‚°-">ë¶€ê°€ ê¸°ëŠ¥ (í˜ì´ì§•, ë²Œí¬ì—°ì‚°, â€¦)</h2>

<h3 id="ìŠ¤í”„ë§-ë°ì´í„°-jpa-í˜ì´ì§•ê³¼-ì •ë ¬">ìŠ¤í”„ë§ ë°ì´í„° JPA í˜ì´ì§•ê³¼ ì •ë ¬</h3>

<ul>
  <li>ìˆœìˆ˜ JPA í˜ì´ì§•ê³¼ ì •ë ¬
    <ul>
      <li>Spring Data Jpa ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ìˆœìˆ˜ JPAë¡œ í˜ì´ì§•ê³¼ ì •ë ¬</li>
      <li>jpqlì„ í†µí•´ <code class="language-plaintext highlighter-rouge">.setFirstResult()</code> [<strong>offset</strong>] , <code class="language-plaintext highlighter-rouge">.setMaxResults()</code> [<strong>limit</strong>] ì‚¬ìš©</li>
      <li>ì˜ˆì‹œ)
        <ul>
          <li>ë‚˜ì´ê°€ 10ì‚´ì¸ íšŒì›ì„ ì´ë¦„ìœ¼ë¡œ ë‚´ë¦¼ì°¨ìˆœí•˜ë©° í˜ì´ì§€ë‹¹ ë³´ì—¬ì¤„ ë°ì´í„°ëŠ” 3ê±´ì¸ ìƒí™©</li>
          <li>í˜ì´ì§€ì— ë”°ë¥¸ Content ì™€ ì´ countë¥¼ ë°˜í™˜í•˜ê³  ì‹¶ì€ ìƒí™©</li>
          <li>
            <p><strong>í˜ì´ì§•</strong></p>

            <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="nf">findByPage</span><span class="o">(</span><span class="kt">int</span> <span class="n">age</span><span class="o">,</span> <span class="kt">int</span> <span class="n">offset</span><span class="o">,</span> <span class="kt">int</span> <span class="n">limit</span><span class="o">)</span> <span class="o">{</span>
  	 <span class="k">return</span> <span class="n">em</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span><span class="s">"select m from Member m where m.age = :age order by m.username desc"</span><span class="o">,</span> <span class="nc">Member</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
  		 <span class="o">.</span><span class="na">setParameter</span><span class="o">(</span><span class="s">"age"</span><span class="o">,</span> <span class="n">age</span><span class="o">)</span>
  		 <span class="o">.</span><span class="na">setFirstResult</span><span class="o">(</span><span class="n">offset</span><span class="o">)</span>
  		 <span class="o">.</span><span class="na">setMaxResults</span><span class="o">(</span><span class="n">limit</span><span class="o">)</span>
  		 <span class="o">.</span><span class="na">getResultList</span><span class="o">();</span>
  <span class="o">}</span>
</code></pre></div>            </div>

            <ul>
              <li><code class="language-plaintext highlighter-rouge">.setFirstResult(offset)</code> ì„ í†µí•´ì„œ ê°€ì ¸ì˜¬ <strong>ì²˜ìŒ ìˆœì„œ</strong>ë¥¼ ì •í•˜ê³  â†’ <strong>offset</strong></li>
              <li><code class="language-plaintext highlighter-rouge">.setMaxResults(limit)</code> ì„ í†µí•´ì„œ <strong>ê°€ì ¸ì˜¬ ì–‘</strong>ì„ ì •í•¨ â†’ <strong>limit</strong></li>
            </ul>
          </li>
          <li>
            <p><strong>ì´ COUNT</strong></p>

            <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kt">long</span> <span class="nf">totalCount</span><span class="o">(</span><span class="kt">int</span> <span class="n">age</span><span class="o">)</span> <span class="o">{</span>
  	 <span class="k">return</span> <span class="n">em</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span><span class="s">"select count(m) from Member m where m.age = :age"</span><span class="o">,</span> <span class="nc">Long</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
  		 <span class="o">.</span><span class="na">setParameter</span><span class="o">(</span><span class="s">"age"</span><span class="o">,</span> <span class="n">age</span><span class="o">)</span>
  		 <span class="o">.</span><span class="na">getSingleResult</span><span class="o">();</span>
  <span class="o">}</span>
</code></pre></div>            </div>

            <ul>
              <li><code class="language-plaintext highlighter-rouge">count()</code> ì‚¬ìš©</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>ìˆœìˆ˜ JPAë¥¼ ì´ìš©í•œ í˜ì´ì§•ê³¼ ì •ë ¬ì€ ë¬¼ë¡  ë‹¤ì–‘í•œ DBì–¸ì–´ì— ë§ê²Œ í˜ì´ì§• ì¿¼ë¦¬ë¥¼ ìë™ìœ¼ë¡œ ë‚ ë ¤ì£¼ì§€ë§Œ, <strong>ë¶€ê°€ì ì¸ ê¸°ëŠ¥ì„ ì œê³µí•˜ì§€ ì•Šì•„</strong> í˜ì´ì§€ ê³„ì‚° ê³µì‹ ë“± <strong>ê°œë°œìê°€ ì§ì ‘ ë³µì¡í•œ ê³„ì‚° ê³µì‹ì„ ì‚¬ìš©í•˜ì—¬ ë¶€ê°€ì ì¸ ê¸°ëŠ¥ì„ êµ¬í˜„í•´ ë‚´ì•¼ ë¨</strong> â†’ ìŠ¤í”„ë§ë°ì´í„°JPAëŠ” ì§€ì›í•´ì¤Œ!</li>
    </ul>
  </li>
  <li><strong>ìŠ¤í”„ë§ ë°ì´í„° JPA í˜ì´ì§•ê³¼ ì •ë ¬</strong>
    <ul>
      <li><strong>JPAì—ë§Œ êµ­í•œ ëœ ê²ƒì´ ì•„ë‹Œ</strong>, ìŠ¤í”„ë§ ë°ì´í„° ê³µí†µì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œë” <strong>ê³µí†µ í‘œì¤€ìœ¼ë¡œ í˜ì´ì§•ê³¼ ì •ë ¬ì„ ì§€ì›</strong> (<code class="language-plaintext highlighter-rouge">org.springframework.data.domain.Pageable</code>)</li>
      <li><strong>í˜ì´ì§•</strong>ë¿ë§Œ ì•„ë‹ˆë¼ <strong>ìŠ¬ë¼ì´ì‹±</strong>ìœ¼ë¡œë„ ë°˜í™˜ ê°€ëŠ¥ (ìŠ¬ë¼ì´ì‹± : ë”ë³´ê¸° í˜•íƒœì˜ ìŠ¬ë¼ì´ìŠ¤ë¡œ í˜ì´ì§€ë¥¼ êµ¬ì„±í•˜ëŠ” ê¸°ëŠ¥). ì¶”ê°€ë¡œ í˜ì´ì§•ê¸°ëŠ¥ì„ ì‚¬ìš©í•´ë„ ì¼ë°˜ <strong>ì»¬ë ‰ì…˜</strong>ìœ¼ë¡œë„ ë°˜í™˜ ê°€ëŠ¥
        <ul>
          <li>í˜ì´ì§• : <code class="language-plaintext highlighter-rouge">org.springframework.data.domain.Page</code> : <strong>ì¶”ê°€ count ì¿¼ë¦¬ ì‹¤í–‰, ê²°ê³¼ í¬í•¨</strong></li>
          <li>ìŠ¬ë¼ì´ì‹± : <code class="language-plaintext highlighter-rouge">org.springframework.data.domain.Slice</code> : ì¶”ê°€ count ì¿¼ë¦¬ ì—†ì´ <strong>ë‹¤ìŒ í˜ì´ì§€ë§Œ í™•ì¸ ê°€ëŠ¥</strong></li>
          <li>ì¼ë°˜ List (ìë°” ì»¬ë ‰ì…˜):  ì¶”ê°€ count ì¿¼ë¦¬ ì—†ì´ <strong>ê²°ê³¼ë§Œ ë°˜í™˜</strong></li>
        </ul>
      </li>
      <li>
        <p>í˜ì´ì§•ê³¼ ì •ë ¬ ì‚¬ìš©ë²•</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nc">Page</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="nf">findByUsername</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="nc">Pageable</span> <span class="n">pageable</span><span class="o">);</span> <span class="c1">// í˜ì´ì§• : count ì¿¼ë¦¬ ì‚¬ìš©</span>
        
  <span class="nd">@Query</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"select m from Member m left join m.team t"</span><span class="o">,</span>
              <span class="n">countQuery</span> <span class="o">=</span> <span class="s">"select count(m) from Member m"</span><span class="o">)</span>
  <span class="nc">Page</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="nf">findByUsername</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="nc">Pageable</span> <span class="n">pageable</span><span class="o">);</span> <span class="c1">// í˜ì´ì§• : count ì¿¼ë¦¬ ì‚¬ìš©</span>
        
  <span class="nc">Slice</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="nf">findByUsername</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="nc">Pageable</span> <span class="n">pageable</span><span class="o">);</span> <span class="c1">// ìŠ¬ë¼ì´ì‹± : count ì¿¼ë¦¬ ì‚¬ìš© ì•ˆí•¨</span>
  <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="nf">findByUsername</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="nc">Pageable</span> <span class="n">pageable</span><span class="o">);</span> <span class="c1">// ì¼ë°˜ ê²°ê³¼ : count ì¿¼ë¦¬ ì‚¬ìš© ì•ˆí•¨</span>
  <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="nf">findByUsername</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="nc">Sort</span> <span class="n">sort</span><span class="o">);</span> <span class="c1">// ì •ë ¬ë§Œ ì‚¬ìš©. no paging</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p><strong>ë©”ì„œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„± + í˜ì´ì§•</strong></p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nc">Page</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="nf">findByAge</span><span class="o">(</span><span class="kt">int</span> <span class="n">age</span><span class="o">,</span> <span class="nc">Pageable</span> <span class="n">pageable</span><span class="o">);</span>
</code></pre></div>        </div>

        <ul>
          <li>ê¸°ì¡´ì— ì•Œì•„ë´¤ë˜ â€˜ë©”ì„œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„±â€™ì— <strong>Pageable(paging ì¡°ê±´)</strong>ë§Œ ë„£ì–´ì£¼ë©´ í•´ë‹¹ ì´ë¦„ìœ¼ë¡œ ìƒì„±ëœ ì¿¼ë¦¬ì˜ ê²°ê³¼ì— <strong>page ì¡°ê±´ì„ ìë™ìœ¼ë¡œ ì¶”ê°€í•´ì„œ queryë¥¼ ë‚ ë¦¬ê²Œ ë¨</strong></li>
          <li>
            <p>ì‚¬ìš©</p>

            <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nc">PageRequest</span> <span class="n">pageRequest</span> <span class="o">=</span> <span class="nc">PageRequest</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="nc">Sort</span><span class="o">.</span><span class="na">by</span><span class="o">(</span><span class="nc">Sort</span><span class="o">.</span><span class="na">Direction</span><span class="o">.</span><span class="na">DESC</span><span class="o">,</span> <span class="s">"name"</span><span class="o">));</span>
  <span class="nc">Page</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="n">page</span> <span class="o">=</span> <span class="n">memberRepository</span><span class="o">.</span><span class="na">findByAge</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="n">pageRequest</span><span class="o">);</span>
  <span class="nc">Page</span><span class="o">&lt;</span><span class="nc">MemberDto</span><span class="o">&gt;</span> <span class="n">memberDtos</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">member</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">MemberDto</span><span class="o">(...));</span>
</code></pre></div>            </div>

            <ul>
              <li><strong>Pageable</strong>ì— <strong>paging ì¡°ê±´</strong>(<code class="language-plaintext highlighter-rouge">PageRequest pageRequest</code>)ì„ ë„£ì–´ì£¼ê³  ì‚¬ìš©í•´ì£¼ë©´ ë¨</li>
              <li><code class="language-plaintext highlighter-rouge">PageRequest pageRequest = PageRequest.*of*(page, size, Sort);</code>
                <ul>
                  <li><strong>í˜ì´ì§• ì¡°ê±´</strong></li>
                  <li><code class="language-plaintext highlighter-rouge">page</code> : ì›í•˜ëŠ” í˜ì´ì§€ (<strong>0 ë¶€í„°</strong> ì‹œì‘)</li>
                  <li><code class="language-plaintext highlighter-rouge">size</code> : ê°€ì ¸ì˜¬ ê°œìˆ˜</li>
                  <li><code class="language-plaintext highlighter-rouge">Sort</code> : ì •ë ¬ ê¸°ì¤€</li>
                </ul>
              </li>
              <li><code class="language-plaintext highlighter-rouge">Page&lt;Member&gt; page = memberRepository.findByAge(10, pageRequest);</code>
                <ul>
                  <li>ì¡°ê±´(<code class="language-plaintext highlighter-rouge">pageRequest</code>  â†’ ì²«ë²ˆì§¸ í˜ì´ì§€, 3ê°œì˜ content, ì´ë¦„ ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ì •ë ¬) ì— ë§ëŠ” ê²°ê³¼ ë°˜í™˜</li>
                  <li><strong>ë°˜í™˜ë˜ëŠ” ê²°ê³¼</strong> : <code class="language-plaintext highlighter-rouge">List&lt;Member&gt;</code> <strong>ê²°ê³¼ +</strong> <code class="language-plaintext highlighter-rouge">totalCount</code> <strong>ê²°ê³¼</strong> (queryë¥¼ í†µí•´ í™•ì¸í•  ìˆ˜ ìˆìŒ)</li>
                  <li><code class="language-plaintext highlighter-rouge">Page&lt;Member&gt;</code>ë¡œ ë°˜í™˜ ë°›ì§€ ì•Šê³  <strong>ì¼ë°˜ì ì¸ <code class="language-plaintext highlighter-rouge">List&lt;Member&gt;</code> ë¡œë„ ë°˜í™˜ ê°€ëŠ¥!</strong> (í˜ì´ì§€ ì¡°ê±´ì„ ë‹¬ì•˜ì§€ë§Œ, í˜ì´ì§• ê¸°ëŠ¥ì„ ì“°ì§€ ì•ŠëŠ” ê²°ê³¼ë¥¼ ë°›ì„ ìˆ˜ ìˆëŠ” ê²ƒ)</li>
                </ul>
              </li>
              <li><code class="language-plaintext highlighter-rouge">Page&lt;MemberDto&gt; memberDtos = page.map(member -&gt; new MemberDto(...));</code>
                <ul>
                  <li>ì¶”ê°€ë¡œ í•­ìƒ EntityëŠ” Entity ìì²´ë¡œ ë°˜í™˜í•´ì£¼ë©´ ì•ˆë¨! â†’ <strong>DTOë¡œ ë°˜í™˜ í•„ìš”</strong></li>
                  <li>PageëŠ” <code class="language-plaintext highlighter-rouge">map</code>ì„ í†µí•´ ì‰½ê²Œ Entityë¥¼ <strong>DTOë¡œ ë³€í™˜</strong> í•  ìˆ˜ ìˆìŒ â‡’ <code class="language-plaintext highlighter-rouge">page.map()</code></li>
                </ul>
              </li>
            </ul>
          </li>
          <li>Pageë¥¼ í†µí•´ ì‰½ê²Œ ì–»ì„ ìˆ˜ ìˆëŠ” <strong>ë¶€ê°€ì ì¸ ì •ë³´</strong>
            <ul>
              <li><code class="language-plaintext highlighter-rouge">Page&lt;Member&gt; page = memberRepository.findByAge(10, pageRequest);</code> ë¥¼ í†µí•´ pageë¥¼ ì–»ì—ˆë‹¤ê³  ê°€ì •</li>
              <li>ë°˜í™˜ ê²°ê³¼ <strong>ë‚´ìš©</strong> : <code class="language-plaintext highlighter-rouge">List&lt;Member&gt; members = page.getContent();</code></li>
              <li>í•´ë‹¹ <strong>ì¡°ê±´ì„ ë”°ë¥¸ Entityì˜ ì „ì²´ ê°œìˆ˜</strong>(<code class="language-plaintext highlighter-rouge">count()</code> ì‚¬ìš©) : <code class="language-plaintext highlighter-rouge">long totalElements = page.getTotalElements();</code></li>
              <li><strong>í˜„ì¬ í˜ì´ì§€</strong> ë²ˆí˜¸ : <code class="language-plaintext highlighter-rouge">int pageNum = page.getNumber();</code></li>
              <li>ì „ì²´ <strong>í˜ì´ì§€ ê°œìˆ˜</strong>(ë³µì¡í•œ ê³„ì‚° ê³¼ì •ì„ ê±°ì¹  í•„ìš”ê°€ ì—†ì–´ì§) : <code class="language-plaintext highlighter-rouge">int totalPages = page.getTotalPages();</code></li>
              <li>ì²«ë²ˆì§¸ í˜ì´ì§€ì¸ì§€ í™•ì¸ : <code class="language-plaintext highlighter-rouge">page.isFirst()</code></li>
              <li>ë‹¤ìŒ í˜ì´ì§€ê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸ : <code class="language-plaintext highlighter-rouge">page.hasNext()</code></li>
            </ul>
          </li>
        </ul>
      </li>
      <li>
        <p><strong>ë©”ì„œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„± + ìŠ¬ë¼ì´ì‹±</strong></p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nc">PageRequest</span> <span class="n">pageRequest</span> <span class="o">=</span> <span class="nc">PageRequest</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="nc">Sort</span><span class="o">.</span><span class="na">by</span><span class="o">(</span><span class="nc">Sort</span><span class="o">.</span><span class="na">Direction</span><span class="o">.</span><span class="na">DESC</span><span class="o">,</span> <span class="s">"name"</span><span class="o">));</span>
  <span class="nc">Slice</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="n">page</span> <span class="o">=</span> <span class="n">memberRepository</span><span class="o">.</span><span class="na">findByAge</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="n">pageRequest</span><span class="o">);</span>
  <span class="nc">Page</span><span class="o">&lt;</span><span class="nc">MemberDto</span><span class="o">&gt;</span> <span class="n">memberDtos</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">member</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">MemberDto</span><span class="o">(...));</span>
</code></pre></div>        </div>

        <ul>
          <li>ë‚˜ë¨¸ì§€ëŠ” Page ì™€ ë™ì¼. ì¦‰, <strong>ë°˜í™˜ê°’ë§Œ Sliceë¡œ ë°”ê¿”ì£¼ë©´ Sliceë¡œì¨ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ (SliceëŠ” Pageì˜ í•˜ìœ„)</strong></li>
          <li>ë‹¤ë¥¸ì ì€ Sliceë¡œ ë°˜í™˜í•  ì‹œ <strong>ì „ì²´ count, ì „ì²´ page ê°œìˆ˜ ë¥¼ ê°€ì ¸ì™€ ì£¼ì§€ ì•ŠìŒ</strong> (ì“¸ì¼ì´ ì—†ìœ¼ë‹ˆ)</li>
        </ul>
      </li>
      <li>
        <p><strong><code class="language-plaintext highlighter-rouge">@Query</code> ë¥¼ í†µí•´ ë ˆí¬ì— ì§ì ‘ ì¿¼ë¦¬ ìƒì„± + í˜ì´ì§€/ìŠ¬ë¼ì´ì‹±</strong></p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nd">@Query</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"select m from Member m left join m.team t"</span><span class="o">,</span>
              <span class="n">countQuery</span> <span class="o">=</span> <span class="s">"select count(m) from Member m"</span><span class="o">)</span>
  <span class="nc">Page</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="nf">findByUsername</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="nc">Pageable</span> <span class="n">pageable</span><span class="o">);</span>
</code></pre></div>        </div>

        <ul>
          <li>ë©”ì„œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„± ë¿ë§Œ ì•„ë‹ˆë¼, <code class="language-plaintext highlighter-rouge">@Query</code>ë¥¼ í†µí•´ <strong>ì§ì ‘ ì¿¼ë¦¬ë¥¼ ìƒì„±í•˜ë©´ì„œ Page ì‚¬ìš© ê°€ëŠ¥!</strong></li>
          <li>ì¶”ê°€ë¡œ <strong>count Queryë¥¼ ë¶„ë¦¬í•˜ëŠ” ê²ƒ</strong>ë„ ê°€ëŠ¥ (<strong>ì‹¤ë¬´ì—ì„œ ì¤‘ìš”</strong>)
            <ul>
              <li><code class="language-plaintext highlighter-rouge">countQuery = "select count(m) from Member m"</code></li>
              <li>í•­ìƒ í˜ì´ì§• ì‹œ ì£¼ì˜í•  ì ì€ â€œc<strong>ontentë¥¼ ì–»ê³ ì í•˜ëŠ” queryì™€ count ì¿¼ë¦¬ëŠ” ë‹¤ë¥¼ ìˆ˜ ìˆë‹¤</strong>â€œëŠ” ê²ƒ â†’ count ì¿¼ë¦¬ëŠ” ë§ ê·¸ëŒ€ë¡œ ê°œìˆ˜ë§Œ í•„ìš”ë¡œ í•˜ëŠ” ê²ƒ. ì¦‰, <strong>ìµœì í™”ê°€ ê°€ëŠ¥</strong>í•¨ â‡’ contentì—ì„œ í•„ìš”ë¡œ í•  ìˆ˜ ë„ ìˆëŠ” <strong>joinë¬¸ì´ countì—ì„œëŠ” í•„ìš” ì—†ì„ ìˆ˜ë„ ìˆë‹¤</strong>ëŠ” ê²ƒ! (Memberì— Teamì„ Joiní•´ì¤˜ì„œ contentë¥¼ ë§Œë“ ë‹¤í•´ë„ <strong>ì´ countëŠ” ì‚¬ì‹¤ Member ë§Œ ìˆì–´ë„ ë¨!</strong> â†’ countì—ì„œëŠ” joinì„ ë¹¼ì„œ queryë¥¼ ë‚ ë¦´ ìˆ˜ ìˆìŒ )</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>ê²°êµ­ ì´ëŸ° <strong>Pageì˜ ë¶€ê°€ì ì¸ ê¸°ëŠ¥,ì •ë³´</strong>ë¥¼ í†µí•´ <strong>ì›¹ì˜ í˜ì´ì§€ ê¸°ëŠ¥ì„ êµ¬í˜„</strong>í•  ìˆ˜ ìˆìŒ (ì´ í˜ì´ì§€ ê°œìˆ˜ ë³´ì—¬ì£¼ê¸°, ë‹¤ìŒ í˜ì´ì§€ë¡œ ë„˜ê¸¸ ìˆ˜ ìˆëŠ”ì§€ í™•ì¸ í•˜ê¸°, â€¦ ë“±)</li>
      <li>ì¶”ê°€ë¡œ, <strong>Pageable ê¸°ëŠ¥ì€ ì–´ëŠ method(ë©”ì†Œë“œì´ë¦„ìœ¼ë¡œ, @Query ì‚¬ìš©í•˜ì—¬, â€¦ )ì—ë„ ì ìš©ì´ ê°€ëŠ¥</strong>í•¨!</li>
    </ul>
  </li>
</ul>

<h3 id="ë²Œí¬ì„±-ìˆ˜ì •-ì¿¼ë¦¬">ë²Œí¬ì„± ìˆ˜ì • ì¿¼ë¦¬</h3>

<ul>
  <li>ë²Œí¬ì—°ì‚° : ë³€ê²½ ê°ì§€ë¥¼ í†µí•´ UPDATE ì¿¼ë¦¬ë¥¼ ë‚ ë¦¬ëŠ” ê²ƒì´ ì•„ë‹Œ, ë³€ê²½í•  ê²ƒë“¤ì— ëŒ€í•´ <strong>í•œë²ˆì— UPDATE ì¿¼ë¦¬ë¥¼ in queryë¡œ</strong> í•œë°©ìœ¼ë¡œ ë‚ ë¦¬ëŠ” ê²ƒ</li>
  <li>ì£¼ì˜ì  : ë²Œí¬ì—°ì‚°ì€ ì˜ì†ì„±ì»¨í…ìŠ¤íŠ¸ë¥¼ ê±°ì³ê°€ëŠ”ê²ƒì´ ì•„ë‹ˆê¸°ì— <strong>ë³€ê²½ëœ ì‚¬í•­ë“¤ì„ ë°˜ì˜í•´ì£¼ê¸° ìœ„í•´ì„  í•­ìƒ ë²Œí¬ì—°ì‚° í›„ì— ì˜ì†ì„±ì»¨í…ìŠ¤íŠ¸ë¥¼ ì´ˆê¸°í™”</strong>(<code class="language-plaintext highlighter-rouge">em.clear()</code>) í•´ì£¼ì–´ì•¼ í•¨</li>
  <li>
    <p><strong>ìˆœìˆ˜ JPA</strong>ë¥¼ ì´ìš©í•œ ë²Œí¬ ì—°ì‚°</p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">bulkAgePlus</span><span class="o">(</span><span class="kt">int</span> <span class="n">age</span><span class="o">)</span> <span class="o">{</span>
  	 <span class="kt">int</span> <span class="n">resultCount</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span>
  		 <span class="s">"update Member m set m.age = m.age + 1"</span> <span class="o">+</span>
  		 <span class="s">"where m.age &gt;= :age"</span><span class="o">)</span>
  			 <span class="o">.</span><span class="na">setParameter</span><span class="o">(</span><span class="s">"age"</span><span class="o">,</span> <span class="n">age</span><span class="o">)</span>
  			 <span class="o">.</span><span class="na">executeUpdate</span><span class="o">();</span>
  	 <span class="k">return</span> <span class="n">resultCount</span><span class="o">;</span>
  <span class="o">}</span>
</code></pre></div>    </div>

    <ul>
      <li><code class="language-plaintext highlighter-rouge">executeUpdate()</code> : ë²Œí¬ì„± ì¿¼ë¦¬ë¥¼ ë‚ ë¦¬ê¸° ìœ„í•œ ì„¤ì •</li>
      <li>ìˆœìˆ˜ JPAëŠ” í•´ë‹¹ methodë¥¼ ì‹¤í–‰í•´ì¤€ ì§í›„ì— <strong>ì§ì ‘ <code class="language-plaintext highlighter-rouge">em.clear()</code> ë¥¼ í˜¸ì¶œí•˜ì—¬ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ ë¹„ì–´ì¤˜ì•¼ í•˜ëŠ” ë‹¨ì </strong> ì¡´ì¬</li>
    </ul>
  </li>
  <li>
    <p><strong>ìŠ¤í”„ë§ ë°ì´í„° JPA</strong>ë¥¼ ì‚¬ìš©í•œ ë²Œí¬ ì—°ì‚°</p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nd">@Modifying</span><span class="o">(</span><span class="n">clearAutomatically</span> <span class="o">=</span> <span class="kc">true</span><span class="o">)</span>
  <span class="nd">@Query</span><span class="o">(</span><span class="s">"update Member m set m.age = m.age + 1 where m.age &gt;= :age"</span><span class="o">)</span>
  <span class="kt">int</span> <span class="nf">bulkAgePlus</span><span class="o">(</span><span class="nd">@Param</span><span class="o">(</span><span class="s">"age"</span><span class="o">)</span> <span class="kt">int</span> <span class="n">age</span><span class="o">);</span>
</code></pre></div>    </div>

    <ul>
      <li><code class="language-plaintext highlighter-rouge">@Modifying</code> : ë²Œí¬ì„± ì¿¼ë¦¬ë¥¼ ë‚ ë¦¬ê¸° ìœ„í•œ ì„¤ì • (JPAì˜ <code class="language-plaintext highlighter-rouge">executeUpdate</code> ì—­í• ). í•´ë‹¹ <code class="language-plaintext highlighter-rouge">@Query</code>ì— ì§€ì •ëœ update queryë¥¼ ë‚ ë ¤ì¤Œ
        <ul>
          <li>ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ ì˜ˆì™¸ ë°œìƒ</li>
          <li><code class="language-plaintext highlighter-rouge">clearAutomatically = true</code> : í•´ë‹¹ ë²Œí¬ì—°ì‚°ì´ <strong>ëë‚œ ì§í›„ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ ë¹„ì›Œì¤Œ</strong> (falseê°€ default ì´ë©°, ë²Œí¬ì—°ì‚°ì´ ì˜ì†ì„±ì»¨í…ìŠ¤íŠ¸ì— Entityê°€ ì¡´ì¬í•˜ì§€ ì•Šì€ ìƒíƒœì—ì„œ ì´ë£¨ì–´ì§€ëŠ” ê²ƒì´ë©´ falseë¡œ ì§„í–‰í•´ë„ ë¨) â†’ <strong>ë³€ê²½ëœ ì  ë°˜ì˜ ê°€ëŠ¥</strong></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<aside>
âš ï¸ <strong>memberRepositoryë¥¼ í†µí•´ ì‚¬ìš©ì¤‘ì¸ EntityManger(ì˜ì†ì„±ì»¨í…ìŠ¤íŠ¸)ì™€ í•´ë‹¹ Testë‹¨ì—ì„œ ìƒˆë¡œ ë¶ˆëŸ¬ ì˜¤ëŠ” EntityMangerëŠ” ê°™ë‚˜?</strong> <br />
â‡’ ê°™ì€ Transaction ì•ˆì— ìˆìœ¼ë©´ í•­ìƒ ê°™ì€ Entity Mangerë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ê°™ìŒ! â‡’ ì¦‰, emì„ ë”°ë¡œ ë¶ˆëŸ¬ì™€ë„ memberRepositoryì™€ ë™ì¼ í•œ emì´ í• ë‹¹ ë¨!

</aside>

<h3 id="entitygraph-fetch-join">@EntityGraph (Fetch Join)</h3>

<ul>
  <li><strong>ì—°ê´€ëœ Entity ë“¤ì„ SQL í•œë²ˆì— ì¡°íšŒ</strong>í•˜ëŠ” ë°©ë²•</li>
  <li>Lazy ë¡œë”©ì¸ ì—°ê´€ Entityë“¤ì„ <strong>ë§ˆì¹˜ Eager ë¡œë”©ê³¼ ê°™ì´ ì¡°íšŒ</strong>í•˜ëŠ” ê²ƒ (<strong>Fetch Join</strong>)</li>
  <li>íŠ¹ì§• : INNER JOINì´ ì•„ë‹Œ <strong>LEFT OUTER JOIN</strong> ì‹¤í–‰</li>
  <li><strong>N+1 ë¬¸ì œì˜ í•´ê²°ë²•</strong>
    <ul>
      <li>N+1 ë¬¸ì œ
        <ul>
          <li>ì˜ˆë¥¼ ë“¤ì–´ Memberë¥¼ ì¡°íšŒí•˜ëŠ” ë°, ì¡°íšŒ í›„ ì—°ê´€ Entityì¸ Teamì˜ ì •ë³´ë„ í•¨ê»˜ í™•ì¸í•œë‹¤. (ì´ë•Œ Memberì™€ Teamì€ ë‹¤ëŒ€ì¼ ê´€ê³„, <strong>Lazy ë¡œë”©</strong>)</li>
          <li>
            <p><code class="language-plaintext highlighter-rouge">findAll()</code> ë¡œ Memberë¥¼ ëª¨ë‘ ì¡°íšŒí•œ í›„ Memberë¥¼ í›‘ìœ¼ë©´ì„œ ê° Memberì˜ Teamì˜ ì´ë¦„ì„ ì¡°íšŒ</p>

            <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="n">members</span> <span class="o">=</span> <span class="n">memberRepository</span><span class="o">.</span><span class="na">findAll</span><span class="o">();</span>
  <span class="k">for</span> <span class="o">(</span><span class="nc">Member</span> <span class="n">member</span> <span class="o">:</span> <span class="n">members</span><span class="o">)</span> <span class="o">{</span>
  	 <span class="n">member</span><span class="o">.</span><span class="na">getTeam</span><span class="o">().</span><span class="na">getName</span><span class="o">();</span>
  <span class="o">}</span>
</code></pre></div>            </div>
          </li>
          <li>ì´ë•Œ, <strong>N+1 ë¬¸ì œ</strong> ë°œìƒ â†’ <strong>ì „ì²´ Memberë¥¼ ì¡°íšŒ</strong>í•˜ëŠ” query <strong>1ê°œ</strong> (<code class="language-plaintext highlighter-rouge">findAll()</code>) + <strong>Nê°œì˜ ê° Memberì—ì„œ Teamì„ ì¡°íšŒ</strong>í•˜ëŠ” query <strong>Nê°œ</strong>(<code class="language-plaintext highlighter-rouge">member.getTeam().getName();</code> x N)</li>
        </ul>
      </li>
      <li>
        <p><strong>í•´ê²°ë²• 1 :</strong> <code class="language-plaintext highlighter-rouge">@Query</code> <strong>+ Fetch Join ì‚¬ìš©</strong></p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nd">@Query</span><span class="o">(</span><span class="s">"select m from Member m left join fetch m.team"</span><span class="o">)</span>
  <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="nf">findMemberFetchJoin</span><span class="o">();</span>
</code></pre></div>        </div>

        <ul>
          <li>m.teamê³¼ ê´€ë ¨ëœ Team Entityë¥¼ ê°€ì ¸ì™€ <strong>fetch join</strong> ì‹œì¼œ ì£¼ëŠ” ê²ƒ â†’ Eager Loadingì²˜ëŸ¼ ë™ì‘(fetch ê¹Œì§€ ì§„í–‰í–ˆê¸°ì—, <strong>memberì˜ team field(Team Entity) ë¥¼ ì±„ì›Œ</strong>ì¤Œ)</li>
        </ul>
      </li>
      <li><strong>í•´ê²°ë²• 2 : <code class="language-plaintext highlighter-rouge">@EntityGraph</code> ì‚¬ìš©</strong>
        <ul>
          <li>ìŠ¤í”„ë§ ë°ì´í„° JPAì—ì„œ JPAê°€ ì œê³µí•˜ëŠ” <strong>ì—”í‹°í‹° ê·¸ë˜í”„ ê¸°ëŠ¥ì„ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©</strong> ê°€ëŠ¥ â†’ <strong>JPQL ì—†ì´ í˜ì¹˜ ì¡°ì¸ì„ ì‚¬ìš© ê°€ëŠ¥!</strong></li>
          <li><code class="language-plaintext highlighter-rouge">@EntityGraph(attributePaths = {"team"})</code>
            <ul>
              <li><code class="language-plaintext highlighter-rouge">attributePaths = {â€teamâ€}</code> : ì¡°íšŒí•˜ê³ ìí•˜ëŠ” ê°ì²´ì˜ <strong>team field(ì—°ê´€ Entity)</strong>ë¥¼ Fetch Joinì„ í†µí•´ì„œ ê°€ì ¸ì˜¨ë‹¤ëŠ” ëœ»</li>
              <li>í•´ë‹¹ ê¸°ëŠ¥ì„ ì„¤ì •í•´ì£¼ë©´ JPQLì—ì„œ <strong>Fetch Joinì„ ì‚¬ìš©í•œ ê²ƒê³¼ ë™ì¼í•œ Query</strong>ê°€ ë‚˜ê°€ê²Œ ë¨ (fetch joinì„ <strong>í¸ë¦¬í•˜ê²Œ ì‚¬ìš©</strong>í•  ìˆ˜ ìˆìŒ!)</li>
            </ul>
          </li>
          <li>ìœ ì—°í•œ ì‚¬ìš©ë²•
            <ul>
              <li>
                <p><strong>ê³µí†µ ì¸í„°í˜ì´ìŠ¤ì—ì„œ ì œê³µí•˜ëŠ” ë©”ì„œë“œë¥¼ ì˜¤ë²„ë¼ì´ë“œ</strong> í•´ì„œ ì‚¬ìš©</p>

                <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">//ê³µí†µ ë©”ì„œë“œ ì˜¤ë²„ë¼ì´ë“œ</span>
  <span class="nd">@Override</span>
  <span class="nd">@EntityGraph</span><span class="o">(</span><span class="n">attributePaths</span> <span class="o">=</span> <span class="o">{</span><span class="s">"team"</span><span class="o">})</span>
  <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="nf">findAll</span><span class="o">();</span>
</code></pre></div>                </div>
              </li>
              <li>
                <p><strong>JPQLë¡œ ì§ì ‘ ì¿¼ë¦¬ë¥¼ ì‘ì„±í•˜ê³  Fetch Joinì„ ì‚¬ìš©í•˜ì§€ ì•Šê³ </strong> <code class="language-plaintext highlighter-rouge">@EntityGraph</code>ë¥¼ ì‚¬ìš©</p>

                <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nd">@EntityGraph</span><span class="o">(</span><span class="n">attributePaths</span> <span class="o">=</span> <span class="o">{</span><span class="s">"team"</span><span class="o">})</span>
  <span class="nd">@Query</span><span class="o">(</span><span class="s">"select m from Member m"</span><span class="o">)</span>
  <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="nf">findMemberEntityGraph</span><span class="o">();</span>
</code></pre></div>                </div>
              </li>
              <li>
                <p>â€œ<strong>ë©”ì„œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„±</strong>â€ì—ì„œ <code class="language-plaintext highlighter-rouge">@EntityGraph</code> ì‚¬ìš©</p>

                <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nd">@EntityGraph</span><span class="o">(</span><span class="n">attributePaths</span> <span class="o">=</span> <span class="o">{</span><span class="s">"team"</span><span class="o">})</span>
  <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="nf">findByUsername</span><span class="o">(</span><span class="nc">String</span> <span class="n">username</span><span class="o">)</span>
</code></pre></div>                </div>

                <ul>
                  <li><code class="language-plaintext highlighter-rouge">@EntityGraph</code> ì˜ ì‚¬ìš© íš¨ìœ¨ì´ ê·¹ëŒ€í™”ë˜ëŠ” ë°©ë²•</li>
                  <li>ì§ì ‘ JPQLì„ ì§œì§€ ì•Šê³ ë„ ê°„ë‹¨íˆ Fetch JOIN ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œë¨</li>
                  <li>ì¦‰, ê°„ë‹¨íˆ ë©”ì„œë“œ ëª…ìœ¼ë¡œë„ ë§Œë“¤ ìˆ˜ ìˆëŠ” ì¡°íšŒì— ëŒ€í•´ì„œ Fetch Joinì„ ì‚¬ìš©í•˜ê³  ì‹¶ì„ ë•Œ ìì£¼ ì‚¬ìš©ë¨</li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Spring Data Jpa ë§Œì˜ ê¸°ëŠ¥ì´ ì•„ë‹Œ ì›ë˜ JPA í‘œì¤€ ê¸°ëŠ¥
    <ul>
      <li>ì¦‰, <strong>JPAì—ì„œë„ ì‚¬ìš© ê°€ëŠ¥</strong> â†’ <code class="language-plaintext highlighter-rouge">NamedEntityGraph</code></li>
      <li><code class="language-plaintext highlighter-rouge">NamedEntityGraph</code>
        <ul>
          <li>
            <p>ì„ ì–¸</p>

            <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nd">@NamedEntityGraph</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"Member.all"</span><span class="o">,</span> <span class="n">attributeNodes</span> <span class="o">=</span>
  <span class="nd">@NamedAttributeNode</span><span class="o">(</span><span class="s">"team"</span><span class="o">))</span>
  <span class="nd">@Entity</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Member</span> <span class="o">{}</span>
</code></pre></div>            </div>

            <ul>
              <li>ì´ë¦„ì„ ì„¤ì •í•˜ê³  ì–´ë–¤ Fieldì˜ ì—°ê´€ê°ì²´ë¥¼ í•œë²ˆì— ê°€ì ¸ì˜¬ ì§€ ì„¤ì •</li>
            </ul>
          </li>
          <li>
            <p>ì‚¬ìš©</p>

            <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nd">@EntityGraph</span><span class="o">(</span><span class="s">"Member.all"</span><span class="o">)</span>
  <span class="nd">@Query</span><span class="o">(</span><span class="s">"select m from Member m"</span><span class="o">)</span>
  <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="nf">findMemberEntityGraph</span><span class="o">();</span>
</code></pre></div>            </div>

            <ul>
              <li>ì„¤ì •ëœ ì •ë³´ë¥¼ ê°€ì§€ê³  Fetch Join ì‹¤í–‰</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h3 id="jpa-hint--lock">JPA Hint &amp; Lock</h3>

<ul>
  <li>HINT
    <ul>
      <li>JPA Query íŒíŠ¸ (SQLì— ì˜í–¥ì„ ì£¼ëŠ” HINTê°€ ì•„ë‹Œ, <strong>JPA êµ¬í˜„ì²´ì—ê²Œ ì œê³µë˜ëŠ” HINT</strong>)</li>
      <li><code class="language-plaintext highlighter-rouge">@Transcational(readOnly = true)</code> ì™€ ë™ì¼í•œ ì—­í• ì„ í•˜ëŠ” ê¸°ëŠ¥</li>
      <li>
        <p>ì‚¬ìš©</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nd">@QueryHints</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="nd">@QueryHint</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"org.hibernate.readOnly"</span><span class="o">,</span> <span class="n">value</span> <span class="o">=</span><span class="s">"true"</span><span class="o">))</span>
  <span class="nc">Member</span> <span class="nf">findReadOnlyByUsername</span><span class="o">(</span><span class="nc">String</span> <span class="n">username</span><span class="o">);</span>
</code></pre></div>        </div>

        <ul>
          <li><code class="language-plaintext highlighter-rouge">@QueryHints</code> : ì ìš©í•  <code class="language-plaintext highlighter-rouge">@QueryHint</code> ëª¨ìŒ</li>
          <li><code class="language-plaintext highlighter-rouge">@QueryHint(name = "org.hibernate.readOnly", value ="true")</code> : Entityë¥¼ ê°€ì ¸ì˜¬ ë•Œ, readOnly modeë¡œ ê°€ì ¸ì˜¤ê² ë‹¤ëŠ” ì„¤ì •</li>
          <li><code class="language-plaintext highlighter-rouge">readOnly</code>ë¡œ ê°€ì ¸ì˜¤ê¸° ë•Œë¬¸ì— <strong>ë³€ê²½ê°ì§€ê°€ ì´ë£¨ì–´ì§€ì§€ ì•ŠìŒ!</strong></li>
        </ul>
      </li>
    </ul>

    <aside>
  âš ï¸ <strong>readOnly ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ </strong> <br />
  ì›ë˜ JPAëŠ” Entityë¥¼ DBì—ì„œ ê°€ì ¸ì˜¤ë©´ ì¶”í›„ ë³€ê²½ê°ì§€ ë“±ì„ ìœ„í•´ ìŠ¤ëƒ…ìƒ·(ì´ˆê¸° Entityëª¨ìŠµ)ì„ ìƒì„±í•˜ê³  <code>flush()</code>ê°€ ë°œìƒí•˜ë©´ ê° fieldë¥¼ ë¹„êµí•˜ì—¬ ë³€ê²½ëœ ì ì— ëŒ€í•œ UPDATE Queryë¥¼ ë‚ ë¦¼. í•˜ì§€ë§Œ, í•´ë‹¹ Entityê°€ ì½ê¸°ëª¨ë“œë¼ë©´, ë§ ê·¸ëŒ€ë¡œ ë³€ê²½í•  ê²ƒì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— <b>ìŠ¤ëƒ…ìƒ·ì„ ìƒì„±í•  í•„ìš”ê°€ ì—†ì–´ì§€ê³ , field ë¹„êµ ë˜í•œ ì´ë£¨ì–´ì§€ì§€ ì•ŠìŒ â†’ ì„±ëŠ¥ ìµœì í™” ê°€ëŠ¥!</b>
    
  </aside>
  </li>
  <li>LOCK
    <ul>
      <li>SQLì˜ <strong>select for update</strong></li>
      <li><strong>ë™ì‹œì„± ì œì–´</strong>ë¥¼ ìœ„í•˜ì—¬ íŠ¹ì • ë°ì´í„°(ROW)ì— ëŒ€í•´ <strong>ë² íƒ€ì  LOCKì„ ê±°ëŠ” ê¸°ëŠ¥</strong></li>
      <li>â€œ<strong>ë°ì´í„° ìˆ˜ì •í•˜ë ¤ê³  SELECT í•˜ëŠ” ì¤‘ì´ì•¼! ë‹¤ë¥¸ ì‚¬ëŒë“¤ì€ ë°ì´í„°ì— ì† ëŒ€ì§€ ë§ˆ!</strong>â€ ì˜ ëŠë‚Œ (ì˜í™” ì¢Œì„ ì˜ˆë§¤ë¥¼ ìœ„í•œ ì„ íƒ ë“±ì— ì‚¬ìš©ë¨)</li>
      <li>ì‚¬ìš©
        <ul>
          <li>
            <p>Spring Data JPA</p>

            <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nd">@Lock</span><span class="o">(</span><span class="nc">LockModeType</span><span class="o">.</span><span class="na">PESSIMISTIC_WRITE</span><span class="o">)</span>
  <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="nf">findByUsername</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">);</span>
</code></pre></div>            </div>
          </li>
          <li>
            <p>SQL ê²°ê³¼</p>

            <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">select</span> <span class="o">*</span>
  <span class="k">from</span> <span class="n">member</span> <span class="n">m</span>
  <span class="k">where</span> <span class="n">m</span><span class="p">.</span><span class="n">username</span> <span class="o">=</span> <span class="p">:</span><span class="n">username</span> <span class="k">for</span> <span class="k">update</span>
</code></pre></div>            </div>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
:ET