I"÷œ<h2 id="jpql-ì´ë€">JPQL ì´ë€?</h2>

<h3 id="jpqlì˜-í•„ìš”ì„±">JPQLì˜ í•„ìš”ì„±</h3>

<ul>
  <li>ì¼ë°˜ì ì¸ ì¡°íšŒ(<code class="language-plaintext highlighter-rouge">em.find()</code>, ê°ì²´ê·¸ë˜í”„ íƒìƒ‰)ê°€ ì•„ë‹Œ, <strong>ì¡°ê±´ì´ ë“¤ì–´ê°„ ì¡°íšŒ</strong>ê°€ í•„ìš”í•˜ë‹¤ë©´?</li>
  <li>ëª¨ë“  ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ê³  ì•±ë‹¨ì—ì„œ ê±¸ëŸ¬ì•¼ í•˜ë‚˜? â†’ NO!</li>
  <li><strong>í•„ìš”í•œ ë°ì´í„°ë§Œ DBì—ì„œ ë¶ˆëŸ¬</strong> ì˜¤ëŠ” ê²ƒ! (ê°ì²´ ì¤‘ì‹¬ìœ¼ë¡œ ì¡°íšŒ!) â†’ ì´ ë•Œ ê²°êµ­ <strong>ê²€ìƒ‰ ì¡°ê±´ì´ í¬í•¨ëœ SQLì´ í•„ìš”</strong> â‡’ <strong>JPQL ì‚¬ìš©</strong> í•„ìš”!</li>
</ul>

<h3 id="jpql">JPQL</h3>

<ul>
  <li><strong>Java Persistence Query Language</strong></li>
  <li><strong>SQLì„ ì¶”ìƒí™”í•œ ê°ì²´ ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´</strong></li>
  <li>SQLê³¼ ë¬¸ë²•ì´ ìœ ì‚¬í•¨ â†’ SELECT, FROM, WHERE, GROUP BY, HAVING, JOIN, â€¦</li>
  <li>í•µì‹¬ì€ <strong>Entity ê°ì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ ì¿¼ë¦¬ë¥¼ í•œë‹¤</strong>ëŠ” ê²ƒ (SQLì€ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì„ ëŒ€ìƒìœ¼ë¡œ ì¿¼ë¦¬) 
â‡’ JPQLì„ SQLë¡œ ë²ˆì—­í•˜ì—¬ ì‹¤ì œ DBë¡œ ë³´ëƒ„
    <ul>
      <li>
        <p>JPQL</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">// String jpql = "select m from Member m where m.age &gt; 18";</span>
  <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> 
  			<span class="n">em</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span>
  					<span class="s">"select m from Member m where m.age &gt; 18"</span><span class="o">,</span> 
  					<span class="nc">Member</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">getResultList</span><span class="o">();</span>
</code></pre></div>        </div>

        <ul>
          <li><code class="language-plaintext highlighter-rouge">.cerateQuery()</code> : JPQLì„ í†µí•´ query ìƒì„±</li>
          <li><code class="language-plaintext highlighter-rouge">jpql</code> : <strong>Entity ê°ì²´ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ queryë¥¼ ìƒì„±</strong>í•  ìˆ˜ ìˆìŒ
            <ul>
              <li><code class="language-plaintext highlighter-rouge">select m</code> : ê¸°ì¡´ SQLê°™ì€ ê²½ìš° ë‚´ê°€ ì¡°íšŒí•  í•­ëª©(Col)ë“¤ì„ ëª¨ë‘ ì‘ì„±í•´ì£¼ì–´ì•¼ í•˜ì§€ë§Œ <strong>JPQLì€ Entity ì¤‘ì‹¬ì´ê¸°ì— í•´ë‹¹ Entityë¡œ ë°˜í™˜</strong>í•  ìˆ˜ ìˆìŒ</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">Member.class</code> : ë°˜í™˜í•  Entity ì§€ì •</li>
        </ul>
      </li>
      <li>
        <p>JPQLì— ë”°ë¼ ì‹¤í–‰ëœ SQL query</p>

        <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">select</span>
  	<span class="n">m</span><span class="p">.</span><span class="n">id</span> <span class="k">as</span> <span class="n">id</span><span class="p">,</span>
  	<span class="n">m</span><span class="p">.</span><span class="n">age</span> <span class="k">as</span> <span class="n">age</span><span class="p">,</span>
  	<span class="n">m</span><span class="p">.</span><span class="n">USERNAME</span> <span class="k">as</span> <span class="n">USERNAME</span><span class="p">,</span>
  	<span class="n">m</span><span class="p">.</span><span class="n">TEAM_ID</span> <span class="k">as</span> <span class="n">TEAM_ID</span>
  <span class="k">from</span>
  	<span class="n">Member</span> <span class="n">m</span>
  <span class="k">where</span>
  	<span class="n">m</span><span class="p">.</span><span class="n">age</span><span class="o">&gt;</span><span class="mi">18</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>ì¦‰, <strong>ë³µì¡í•œ ì¿¼ë¦¬</strong>ë¥¼ ì‚¬ìš©í•  ë•Œ ë°œìƒí•  ìˆ˜ ìˆëŠ” <strong>JPAì™€ DBì˜ íŒ¨ëŸ¬ë‹¤ì„ ì°¨ì´ë¥¼ ê·¹ë³µ</strong>í•´ì£¼ëŠ” ê²ƒ</li>
  <li>ì‹¤ë¬´ì—ì„œ ì‚¬ìš©ë˜ëŠ” <strong>ë³µì¡í•œ ì¿¼ë¦¬ë¥¼ ê°ì²´ ì§€í–¥ì ìœ¼ë¡œ ì§¤ ìˆ˜ ìˆë„ë¡ ì§€ì›</strong> â†’ ì¦‰, ì¡°íšŒ ì‹œ DB Tableì´ ì•„ë‹Œ <strong>Entity ê°ì²´ë¥¼ ëŒ€ìƒ</strong>ìœ¼ë¡œ ê²€ìƒ‰</li>
  <li>JPAê°€ ì§€ì›í•˜ëŠ” ë‹¤ì–‘í•œ ì¿¼ë¦¬ ë°©ë²• ì¤‘ í•˜ë‚˜
    <ul>
      <li>JPAê°€ ì§€ì›í•˜ëŠ” ë‹¤ì–‘í•œ ì¿¼ë¦¬
        <ul>
          <li>ìë°” ì½”ë“œë¥¼ í†µí•´ JPQLì„ ë™ì ìœ¼ë¡œ ë¹Œë“œí•´ì£¼ëŠ” Genterator (ë™ì ìœ¼ë¡œ queryë¥¼ ë³€ê²½í•˜ê²Œ í•  ìˆ˜ ìˆìŒ)
            <ul>
              <li>JPA Criteria : JPA í‘œì¤€ ìŠ¤í™. ì‚¬ìš©ì´ ë³µì¡í•˜ë©° ì‹¤ìš©ì„±ì´ ì—†ìŒ</li>
              <li><strong>QueryDSL</strong> : ì˜¤í”ˆ ì†ŒìŠ¤. ì‹¤ë¬´ì—ì„œ ë™ì ì¸ queryë¥¼ ì§¤ ë•Œ ìì£¼ ì‚¬ìš©í•˜ëŠ” ê¸°ìˆ </li>
            </ul>
          </li>
          <li><strong>Native SQL</strong> : JPQLì„ ì‚¬ìš©í•´ë„ DB ì¢…ì†ì ì¸ ì½”ë“œê°€ í•„ìš”í•œë°, ê·¸ ë•Œ <strong>SQL ë¬¸ë²• ê·¸ëŒ€ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œë” ì§€ì›</strong>í•˜ëŠ” ê²ƒ</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>JPQLì€ JDBC API ì§ì ‘ ì‚¬ìš© or MyBatis, SpringJdbcì™€ í•¨ê»˜ ì‚¬ìš©ì´ ê°€ëŠ¥í•¨</li>
  <li>SQLì„ ì¶”ìƒí™”í•˜ê¸° ë•Œë¬¸ì— <strong>íŠ¹ì • ë°ì´í„°ë² ì´ìŠ¤ SQLì— ì˜ì¡´X</strong></li>
</ul>

<h2 id="jpql-ê¸°ë³¸-ë¬¸ë²•">JPQL ê¸°ë³¸ ë¬¸ë²•</h2>

<h3 id="ê¸°ë³¸-ë¬¸ë²•ê³¼-ì¿¼ë¦¬-api">ê¸°ë³¸ ë¬¸ë²•ê³¼ ì¿¼ë¦¬ API</h3>

<ul>
  <li>JPQL ê¸°ë³¸ query
    <ul>
      <li>
        <p>SELECT ë¬¸</p>

        <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">select</span> <span class="n">_</span>
  <span class="k">from</span> <span class="n">_</span>
  <span class="p">[</span><span class="k">where</span> <span class="n">_</span><span class="p">]</span>
  <span class="p">[</span><span class="k">group</span> <span class="k">by</span> <span class="n">_</span><span class="p">]</span>
  <span class="p">[</span><span class="k">having</span> <span class="n">_</span><span class="p">]</span>
  <span class="p">[</span><span class="k">order</span> <span class="k">by</span> <span class="n">_</span><span class="p">]</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p>UPDATE ë¬¸</p>

        <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">update</span> <span class="n">_</span>
  <span class="p">[</span><span class="k">where</span> <span class="n">_</span><span class="p">]</span>
</code></pre></div>        </div>

        <ul>
          <li><strong>ë²Œí¬ ì—°ì‚°</strong>ê³¼ ì—°ê´€ : JPAì˜ í•œê±´í•œê±´ì— ëŒ€í•œ ë³€ê²½ê°ì§€ì— ì˜í•´ ì§„í–‰ë˜ëŠ” updateê°€ ì•„ë‹Œ, <strong>ì—¬ëŸ¬ê±´ì„ í•œë°©ì— UPDATEí•˜ëŠ” ê²ƒ</strong></li>
        </ul>
      </li>
      <li>
        <p>DELETE ë¬¸</p>

        <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">delete</span> <span class="n">_</span>
  <span class="p">[</span><span class="k">where</span> <span class="n">_</span><span class="p">]</span>
</code></pre></div>        </div>
      </li>
      <li>ê¸°ì¡´ SQLê³¼ êµ‰ì¥íˆ ìœ ì‚¬!</li>
      <li>í•˜ì§€ë§Œ <strong>JPQLì€ Entity ê°ì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ Query!!</strong></li>
    </ul>
  </li>
  <li>JPQL ê¸°ë³¸ ë¬¸ë²•
    <ul>
      <li><code class="language-plaintext highlighter-rouge">select m from Member as m where m.age &gt; 18</code></li>
      <li>SQLê³¼ ê±°ì˜ ë™ì¼í•˜ì§€ë§Œ, Memberê°€ Tableì„ ëŒ€ìƒìœ¼ë¡œ í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ <strong>Entity ê°ì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ í•œë‹¤ëŠ” ê²ƒ</strong>ì´ ì¤‘ìš” â†’ ê·¸ë˜ì„œ m.age ì²˜ëŸ¼ ì†ì„±ê°’ì„ ë°”ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê²ƒ</li>
      <li>ë˜í•œ ì¡°íšŒ ìì²´ë¥¼ <strong>Entity ê°ì²´ë¡œ ë°˜í™˜</strong>í•  ìˆ˜ ìˆìŒ</li>
      <li>ì—”í‹°í‹°ì™€ ì†ì„±ì€ ëŒ€ì†Œë¬¸ì êµ¬ë¶„O (Member, age)</li>
      <li>JPQL í‚¤ì›Œë“œëŠ” ëŒ€ì†Œë¬¸ì êµ¬ë¶„X (SELECT, FROM, where)</li>
      <li><strong>[ì¤‘ìš”]</strong> ë³„ì¹­ì€ í•„ìˆ˜(m) (asëŠ” ìƒëµê°€ëŠ¥)</li>
    </ul>
  </li>
  <li>
    <p>ì§‘í•©ê³¼ ì •ë ¬</p>

    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">select</span>
  	 <span class="k">COUNT</span><span class="p">(</span><span class="n">m</span><span class="p">),</span> <span class="c1">-- íšŒì› ìˆ˜</span>
  	 <span class="k">SUM</span><span class="p">(</span><span class="n">m</span><span class="p">.</span><span class="n">age</span><span class="p">),</span> <span class="c1">-- ë‚˜ì´ í•©</span>
  	 <span class="k">AVG</span><span class="p">(</span><span class="n">m</span><span class="p">.</span><span class="n">age</span><span class="p">),</span> <span class="c1">-- í‰ê·  ë‚˜ì´</span>
  	 <span class="k">MAX</span><span class="p">(</span><span class="n">m</span><span class="p">.</span><span class="n">age</span><span class="p">),</span> <span class="c1">-- ìµœëŒ€ ë‚˜ì´</span>
  	 <span class="k">MIN</span><span class="p">(</span><span class="n">m</span><span class="p">.</span><span class="n">age</span><span class="p">)</span> <span class="c1">-- ìµœì†Œ ë‚˜ì´</span>
  <span class="k">from</span> <span class="n">Member</span> <span class="n">m</span>
</code></pre></div>    </div>

    <ul>
      <li>
        <table>
          <tbody>
            <tr>
              <td>Group by, Having</td>
              <td>Order by ë„ ê°€ëŠ¥</td>
            </tr>
          </tbody>
        </table>
      </li>
    </ul>
  </li>
  <li>TypedQuery vs Query <strong>[ì¿¼ë¦¬ ë°˜í™˜]</strong>
    <ul>
      <li>TypedQuery : ë°˜í™˜ íƒ€ì…ì´ <strong>ëª…í™•</strong>í•  ë•Œ ì‚¬ìš©
        <ul>
          <li><code class="language-plaintext highlighter-rouge">TypedQuery&lt;Member&gt; query = em.createQuery("SELECT m FROM Member m", Member.class);</code></li>
          <li>Selectì˜ ëŒ€ìƒì´ member entity ì´ë¯€ë¡œ ë°˜í™˜ íƒ€ì…ì´ ëª…í™•í•¨</li>
        </ul>
      </li>
      <li>Query : ë°˜í™˜ íƒ€ì…ì´ <strong>ëª…í™•í•˜ì§€ ì•Šì„ ë•Œ</strong> ì‚¬ìš©
        <ul>
          <li><code class="language-plaintext highlighter-rouge">Query query = em.createQuery("SELECT m.username, m.age from Member m");</code></li>
          <li>m.username ì€ Stringì´ê³  m.age ëŠ” int ë¡œ ë‘ ê°œì˜ íƒ€ì…ì´ ë‹¤ë¥´ê³ , ì´ë¥¼ ë§¤í•‘í•  íƒ€ì…ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŒ â†’ ë°˜í™˜ íƒ€ì…ì´ ëª…í™•í•˜ì§€ ì•ŠìŒ</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>ê²°ê³¼ ì¡°íšŒ API (Query API)
    <ul>
      <li><code class="language-plaintext highlighter-rouge">.getResultList()</code> : ì¡°íšŒ ê²°ê³¼ê°€ í•˜ë‚˜ ì´ìƒì¼ ë•Œ â†’ <strong>ë¦¬ìŠ¤íŠ¸ë¡œ ë°˜í™˜</strong>
        <ul>
          <li>ê²°ê³¼ ì—†ì„ ì‹œ ë¹ˆ ë¦¬ìŠ¤íŠ¸ ë°˜í™˜</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">.getSingleResult()</code> : ê²°ê³¼ê°€ ì •í™•íˆ í•˜ë‚˜ì¼ ë•Œ â†’ <strong>ë‹¨ì¼ ê°ì²´ë¡œ ë°˜í™˜</strong>
        <ul>
          <li>ê²°ê³¼ê°€ ì—†ì„ ì‹œ ì˜¤ë¥˜ ë°œìƒ â†’ <code class="language-plaintext highlighter-rouge">javax.persistence.NoResultException</code> (Spring Data JPA(Springê³¼ì˜ í†µí•© JPA) ì—ì„œëŠ” Null or Optionalë¡œ ë°˜í™˜í•  ìˆ˜ ìˆë„ë¡ ì„¤ì • ë¨)</li>
          <li>ê²°ê³¼ê°€ ë‘˜ ì´ìƒì¼ ì‹œ ì˜¤ë¥˜ ë°œìƒ â†’ <code class="language-plaintext highlighter-rouge">javax.persistence.NonUniqueResultException</code></li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>íŒŒë¼ë¯¸í„° ë°”ì¸ë”©</p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">em</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span>
  	<span class="s">"SELECT m FROM Member m where m.username=:username"</span><span class="o">,</span> <span class="nc">Member</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
  	<span class="o">.</span><span class="na">setParameter</span><span class="o">(</span><span class="s">"username"</span><span class="o">,</span> <span class="n">usernameParam</span><span class="o">);</span> <span class="c1">// usernameParam ì€ ë³€ìˆ˜</span>
</code></pre></div>    </div>

    <ul>
      <li>ë°”ì¸ë”© ì‹œ â€œì´ë¦„ ê¸°ì¤€â€ê³¼ â€œìœ„ì¹˜ ê¸°ì¤€â€ ì´ ì¡´ì¬ í•˜ì§€ë§Œ â€œ<strong>ì´ë¦„ ê¸°ì¤€</strong>â€ë§Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê¶Œì¥ (ìœ„ì˜ ì˜ˆì‹œëŠ” â€œì´ë¦„ ê¸°ì¤€â€ ë°”ì¸ë”©)</li>
      <li><code class="language-plaintext highlighter-rouge">:username</code> : íŒŒë¼ë¯¸í„° ì„¤ì • â†’ â€œ<code class="language-plaintext highlighter-rouge">:</code>â€</li>
      <li><code class="language-plaintext highlighter-rouge">.setParameter</code> : íŒŒë¼ë¯¸í„° ë°”ì¸ë”©</li>
    </ul>
  </li>
</ul>

<h3 id="í”„ë¡œì ì…˜-select">í”„ë¡œì ì…˜ (SELECT)</h3>

<ul>
  <li>SELECT ì ˆì— <strong>ì¡°íšŒí•  ëŒ€ìƒì„ ì§€ì •</strong>í•˜ëŠ” ê²ƒ</li>
  <li>ëŒ€ìƒ
    <ul>
      <li><strong>Entity ê°ì²´</strong> í”„ë¡œì ì…˜
        <ul>
          <li><code class="language-plaintext highlighter-rouge">em.createQuery("SELECT m FROM Member m", Member.class);</code></li>
          <li>ì¡°íšŒë˜ëŠ” ëª¨ë“  Entityê°€ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì˜í•´ ê´€ë¦¬ë¨</li>
        </ul>
      </li>
      <li><strong>Entity ì—°ê´€ ê°ì²´</strong> í”„ë¡œì ì…˜
        <ul>
          <li><code class="language-plaintext highlighter-rouge">em.createQuery("SELECT m.team FROM Member m",Team.class);</code></li>
          <li>SQLë‹¨ì—ì„œ <strong>JOIN ì ˆ ìë™ ì‹¤í–‰ (ë¬µì‹œì  JOIN)</strong> â†’ DBì…ì¥ì—ì„  Memberì˜ Teamì€ joiní•´ì£¼ì–´ì•¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŒ</li>
          <li>ì¢‹ì•„ ë³´ì´ì§€ë§Œ <strong>ì˜ˆê¸°ì¹˜ ëª»í•œ query(JOIN) ì´ê¸°ì— ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²ƒì´ ì¢‹ìŒ</strong> â†’ SQLê³¼ ë¹„ìŠ·í•˜ê²Œ joinì„ ì§ì ‘ ì‚¬ìš©í•´ì„œ ê°€ì ¸ì˜¤ëŠ” ê²ƒì„ ê¶Œì¥ (ëª…ì‹œì  JOIN)</li>
        </ul>
      </li>
      <li><strong>Embedded Type ê°ì²´</strong> ì¡°íšŒ
        <ul>
          <li><code class="language-plaintext highlighter-rouge">em.createQuery("SELECT m.address FROM Member m",Address.class);</code></li>
          <li>ê°’ íƒ€ì…ì´ê¸°ì— ë¬µì‹œì  JOINì´ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ â†’ DBì…ì¥ì—ì„  í•´ë‹¹ Colì´ ê·¸ëŒ€ë¡œ ìˆê¸° ë•Œë¬¸</li>
          <li>ê·¸ì € <strong>ë°˜í™˜ì´ Embedded Typeìœ¼ë¡œ ë‚˜ì˜¤ëŠ” ê²ƒ</strong></li>
          <li><code class="language-plaintext highlighter-rouge">From Address a</code> ì™€ ê°™ì´ ì§ì ‘ ì¡°íšŒëŠ” ë¶ˆê°€ëŠ¥ â†’ Entityê°€ ì•„ë‹˜! ì†Œì†ë˜ì–´ ìˆëŠ” ê°ì²´ì„</li>
        </ul>
      </li>
      <li><strong>Scala Type(int,Long,String, â€¦ ë“± ê¸°ë³¸ ë°ì´í„° íƒ€ì…)</strong> ì¡°íšŒ
        <ul>
          <li><code class="language-plaintext highlighter-rouge">em.createQuery("SELECT m.username, m.age FROM Member m");</code></li>
          <li>í•´ë‹¹ ê²°ê³¼ëŠ” ì—¬ëŸ¬ Type(String, int)ìœ¼ë¡œ ì¡°íšŒë¨ 
  â†’ ì—¬ëŸ¬ê°’ ì¡°íšŒ ë°©ë²• ì‚¬ìš©</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Scala Typeì—ì„œì˜ <strong>ì—¬ëŸ¬ ê°’ ì¡°íšŒ</strong>
    <ol>
      <li><strong>Query íƒ€ì…ìœ¼ë¡œ ì¡°íšŒ</strong>
        <ul>
          <li>Query íƒ€ì…(ë°˜í™˜ íƒ€ì…ì´ ëª…í™•í•˜ì§€ ì•Šì€ ìƒíƒœ)ìœ¼ë¡œ ë°›ì•„ì˜¨ í›„ Objectë¡œ ë¹¼ì˜¤ê¸°</li>
        </ul>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nc">Object</span> <span class="n">singleResult</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span><span class="s">"select m.name, m.age from Member m"</span><span class="o">).</span><span class="na">getSingleResult</span><span class="o">();</span>
 <span class="nc">Object</span><span class="o">[]</span> <span class="n">resultOf</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Object</span><span class="o">[])</span> <span class="n">singleResult</span><span class="o">;</span>
 <span class="k">for</span> <span class="o">(</span><span class="nc">Object</span> <span class="n">o</span> <span class="o">:</span> <span class="n">resultOf</span><span class="o">)</span> <span class="o">{</span>
     <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"result = "</span> <span class="o">+</span> <span class="n">o</span><span class="o">);</span>
 <span class="o">}</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p><strong>Object[] íƒ€ì…ìœ¼ë¡œ ì¡°íšŒ</strong></p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Object</span><span class="o">[]&gt;</span> <span class="n">resultList</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span><span class="s">"select m.name, m.age from Member m"</span><span class="o">).</span><span class="na">getResultList</span><span class="o">();</span>
 <span class="k">for</span> <span class="o">(</span><span class="nc">Object</span><span class="o">[]</span> <span class="n">ol</span> <span class="o">:</span> <span class="n">resultList</span><span class="o">)</span> <span class="o">{</span>
     <span class="k">for</span> <span class="o">(</span><span class="nc">Object</span> <span class="n">o</span> <span class="o">:</span> <span class="n">ol</span><span class="o">)</span> <span class="o">{</span>
 			<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"result = "</span><span class="o">,</span> <span class="n">o</span><span class="o">);</span>
 		<span class="o">}</span>
 <span class="o">}</span>
</code></pre></div>        </div>
      </li>
      <li><strong>new ëª…ë ¹ì–´ë¡œ ì¡°íšŒ (DTO ì‚¬ìš©) â†’ BEST!!</strong>
        <ul>
          <li><strong>DTOë¡œ ë°”ë¡œ ì¡°íšŒ</strong></li>
          <li>íŒ¨í‚¤ì§€ ëª…ì„ í¬í•¨í•œ ì „ì²´ í´ë˜ìŠ¤ ëª…ì„ ì…ë ¥í•´ì¤˜ì•¼ í•¨</li>
          <li>í•´ë‹¹ ì¡°íšŒë˜ëŠ” í•­ëª©ì˜ ìˆœì„œì™€ íƒ€ì…ì´ ì¼ì¹˜í•˜ëŠ” <strong>ìƒì„±ì í•„ìˆ˜</strong></li>
          <li>
            <p>DTO ìƒì„±</p>

            <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MemberDto</span> <span class="o">{</span>
      <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
      <span class="kd">private</span> <span class="kt">int</span> <span class="n">age</span><span class="o">;</span>
      <span class="kd">public</span> <span class="nf">MemberDto</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="kt">int</span> <span class="n">age</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
          <span class="k">this</span><span class="o">.</span><span class="na">age</span> <span class="o">=</span> <span class="n">age</span><span class="o">;</span>
      <span class="o">}</span>
  		<span class="o">...</span> <span class="c1">// getter setter</span>
  <span class="o">}</span>
</code></pre></div>            </div>
          </li>
          <li>
            <p>new ëª…ë ¹ì–´ ì¡°íšŒ</p>

            <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nc">List</span><span class="o">&lt;</span><span class="nc">MemberDto</span><span class="o">&gt;</span> <span class="n">resultList</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span><span class="s">"select new hellojpql.dto.MemberDto(m.name, m.age) from Member m"</span><span class="o">,</span> <span class="nc">MemberDto</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">getResultList</span><span class="o">();</span>
            
  <span class="k">for</span> <span class="o">(</span><span class="nc">MemberDto</span> <span class="n">memberDto</span> <span class="o">:</span> <span class="n">resultList</span><span class="o">)</span> <span class="o">{</span>
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"memberDto = "</span> <span class="o">+</span> <span class="n">memberDto</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">", "</span> <span class="o">+</span> <span class="n">memberDto</span><span class="o">.</span><span class="na">getAge</span><span class="o">());</span>
  <span class="o">}</span>
</code></pre></div>            </div>
          </li>
        </ul>
      </li>
    </ol>
  </li>
  <li><strong>DISTINCTë¡œ ì¤‘ë³µì œê±° ê°€ëŠ¥</strong>
    <ul>
      <li>SQL ë‹¨ì˜ DISTINCT : <strong>ì™„ì „íˆ ì¼ì¹˜í•˜ëŠ” row</strong>ì— ëŒ€í•œ ì¤‘ë³µ ì œê±°</li>
      <li>JPA ë‹¨ì˜ DISTINCT : <strong>ê°™ì€ ì‹ë³„ì(Primary Key)ë¥¼ ê°€ì§„ Entity</strong>ì— ëŒ€í•œ ì¤‘ë³µ ì œê±°</li>
      <li>JPQLì—ì„œì˜ DISTINCT ëŠ” <strong>ë‘ ê¸°ëŠ¥ì„ ëª¨ë‘ ì‘ë™</strong>í•˜ì—¬ ì¤‘ë³µ ì œê±° ì‹¤í–‰</li>
    </ul>
  </li>
</ul>

<h3 id="í˜ì´ì§•-api">í˜ì´ì§• API</h3>

<ul>
  <li>í˜ì´ì§•ì€ MySQL, ORACLE ë“±ì„ ì´ìš©í•´ì„œ ì§ì ‘ queryë¥¼ ì§œë ¤ë©´ ì„œë¡œ ë‹¤ë¥¸ ì ë„ ìˆê³  ë³µì¡í•¨ (íŠ¹íˆ ORACLEì˜ í˜ì´ì§•ì€ êµ‰ì¥íˆ ë³µì¡í•¨!) â†’ But <strong>JPAëŠ” SQL Dialect ì¡´ì¬</strong></li>
  <li>í•˜ì§€ë§Œ <strong>JPAëŠ” í˜ì´ì§•ì„ ë‘ê°€ì§€ì˜ APIë¡œ ì¶”ìƒí™”</strong>í•˜ì—¬ ì‰½ê²Œ ì´ìš© ê°€ëŠ¥
    <ul>
      <li><code class="language-plaintext highlighter-rouge">.setFirstResult()</code> : ì¡°íšŒ ì‹œì‘ ìœ„ì¹˜ (0ë¶€í„° ì‹œì‘)</li>
      <li><code class="language-plaintext highlighter-rouge">.setMaxResult()</code> : ì¡°íšŒí•  ë°ì´í„° ìˆ˜</li>
    </ul>
  </li>
  <li>
    <p>ì˜ˆì‹œ</p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">em</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span><span class="s">"select m from Member m order by m.age desc"</span><span class="o">,</span> <span class="nc">Member</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
  	<span class="o">.</span><span class="na">setFirstResult</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="c1">// offset ìë™ ì¶”ê°€ (offset = 1)</span>
  	<span class="o">.</span><span class="na">setMaxResults</span><span class="o">(</span><span class="mi">10</span><span class="o">)</span> <span class="c1">// limit ìë™ ì¶”ê°€ (limit = 10 -&gt; 10ê°œ)</span>
  	<span class="o">.</span><span class="na">getResultList</span><span class="o">();</span> <span class="c1">// order by member.age desc limit ? offset ?</span>
</code></pre></div>    </div>

    <ul>
      <li>.<code class="language-plaintext highlighter-rouge">setFirstResult(1)</code>
        <ul>
          <li><strong>ë‘ë²ˆì§¸ ë°ì´í„°ë¶€í„°</strong> ê°€ì ¸ì˜¨ë‹¤ëŠ” ëœ» (<strong>ì¸í…ìŠ¤ 0ë¶€í„°</strong> ì‹œì‘)</li>
          <li>SQLë¡œ ë³´ë©´ <strong>offset</strong> â†’ <code class="language-plaintext highlighter-rouge">offset 1</code> ì„ ìë™ ì¶”ê°€ í•´ì£¼ëŠ” ê²ƒ</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">setMaxResults(10)</code>
        <ul>
          <li><strong>10ê°œì˜ ë°ì´í„°</strong>ë¥¼ ê°€ì ¸ì˜¨ë‹¤ëŠ” ëœ» â†’ 2ë²ˆì§¸ë¶€í„° 10ê°œì˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜´ (11ë²ˆì¬ ë°ì´í„°ê¹Œì§€ ì¡°íšŒ)</li>
          <li>SQLë¡œ ë³´ë©´ limit â†’ <code class="language-plaintext highlighter-rouge">limit 10</code> ì„ ìë™ ì¶”ê°€ í•´ì£¼ëŠ” ê²ƒ</li>
        </ul>
      </li>
      <li>ê²°ê³¼ â‡’ <code class="language-plaintext highlighter-rouge">select m from Member m order by member.age desc limit ? offset ?</code></li>
      <li>
        <p>ê²°ê³¼ SQL</p>

        <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">SELECT</span>
  	 <span class="n">M</span><span class="p">.</span><span class="n">ID</span> <span class="k">AS</span> <span class="n">ID</span><span class="p">,</span>
  	 <span class="n">M</span><span class="p">.</span><span class="n">AGE</span> <span class="k">AS</span> <span class="n">AGE</span><span class="p">,</span>
  	 <span class="n">M</span><span class="p">.</span><span class="n">TEAM_ID</span> <span class="k">AS</span> <span class="n">TEAM_ID</span><span class="p">,</span>
  	 <span class="n">M</span><span class="p">.</span><span class="n">NAME</span> <span class="k">AS</span> <span class="n">NAME</span>
  <span class="k">FROM</span>
  	 <span class="n">MEMBER</span> <span class="n">M</span>
  <span class="k">ORDER</span> <span class="k">BY</span>
  	 <span class="n">M</span><span class="p">.</span><span class="n">NAME</span> <span class="k">DESC</span> <span class="k">LIMIT</span> <span class="mi">10</span> <span class="k">OFFSET</span> <span class="mi">1</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ul>

<h3 id="join">JOIN</h3>

<ul>
  <li>ë‹¤ì–‘í•œ JOIN ì§€ì›
    <ul>
      <li><strong>ë‚´ë¶€ ì¡°ì¸</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">SELECT m FROM Member m [INNER] JOIN m.team t</code></li>
          <li>teamì´ ì—†ëŠ” Memberì— ëŒ€í•´ì„  ì œì™¸í•˜ê³  ì¡°íšŒë¨</li>
        </ul>
      </li>
      <li><strong>ì™¸ë¶€ ì¡°ì¸</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">SELECT m FROM Member m LEFT [OUTER] JOIN m.team t</code></li>
          <li>teamì´ ì—†ëŠ” Memberì— ëŒ€í•´ì„  Nullë¡œ ì„¤ì •ëœ ì±„ë¡œ ì¡°íšŒë¨</li>
        </ul>
      </li>
      <li><strong>ì„¸íƒ€ ì¡°ì¸</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">select count(m) from Member m, Team t where m.username = t.name</code></li>
          <li>ì—°ê´€ê´€ê³„ì— ìˆì§€ ì•Šì€ ê²ƒë“¤ì„ JOINí•˜ëŠ” ê²ƒ (ì¼ëª… ë§‰ì¡°ì¸)</li>
          <li>memberê°€ 3ê°œê³  teamì´ 2ê°œë©´ 3x2ì˜ rowë¥¼ ìƒì„±í•˜ëŠ” join (ì¼ëª… Cross JOIN)</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>ON ì ˆì„ í™œìš©í•˜ì—¬ JOIN
    <ul>
      <li><strong>JOIN ëŒ€ìƒ í•„í„°ë§</strong>
        <ul>
          <li>on ì„ í†µí•´ JOIN ì‹œ <strong>ì¡°ê±´ì„ ê±¸ì–´ ì›í•˜ëŠ” ëŒ€ìƒë§Œ JOINí•  ìˆ˜ ìˆë„ë¡ í•„í„°ë§</strong> í•˜ëŠ” ê²ƒ</li>
          <li><strong>on t.name = â€™Aâ€™</strong>  â‡’ ON m.TEAM_ID = t.id <strong>AND</strong> t.name = â€˜Aâ€™</li>
          <li>JPQL â‡’ <code class="language-plaintext highlighter-rouge">em.createQuery(â€SELECT m, t FROM Member m LEFT JOIN m.team t on t.name = 'A'â€)</code></li>
          <li>SQL â‡’ <code class="language-plaintext highlighter-rouge">SELECT m.* **t.*** FROM Member m LEFT JOIN Team t ON m.TEAM_ID=t.id and t.name='A'</code></li>
        </ul>
      </li>
      <li><strong>ì—°ê´€ê´€ê³„ ì—†ëŠ” Entity ì™¸ë¶€ ì¡°ì¸</strong>
        <ul>
          <li>on ì„ í†µí•´ ì„œë¡œ ì•„ë¬´ <strong>ì—°ê´€ê´€ê³„ê°€ ì—†ëŠ” Entity</strong>ë¼ë„ <strong>Cross Joinì´ ê°€ëŠ¥</strong></li>
          <li>JPQL â‡’ <code class="language-plaintext highlighter-rouge">em.createQuery(â€SELECT m, t FROM Member m LEFT JOIN Team t on m.username = t.nameâ€)</code></li>
          <li>SQL â‡’ <code class="language-plaintext highlighter-rouge">SELECT m.*, t.* FROM Member m LEFT JOIN Team t ON m.username = t.name</code></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h3 id="ì„œë¸Œ-ì¿¼ë¦¬">ì„œë¸Œ ì¿¼ë¦¬</h3>

<ul>
  <li><strong>ì¿¼ë¦¬ ì†ì— ë˜ ë‹¤ë¥¸ ì¿¼ë¦¬</strong>ë¥¼ ë§Œë“¤ì–´ ì ìš©í•˜ëŠ” ê²ƒ</li>
  <li>ì˜ˆì‹œ
    <ul>
      <li>
        <p>ë‚˜ì´ê°€ í‰ê·  ì´ˆê³¼ì¸ íšŒì›</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">select</span> <span class="n">m</span> <span class="n">from</span> <span class="nc">Member</span> <span class="n">m</span>
  <span class="n">where</span> <span class="n">m</span><span class="o">.</span><span class="na">age</span> <span class="o">&gt;</span> <span class="o">(</span><span class="n">select</span> <span class="nf">avg</span><span class="o">(</span><span class="n">m2</span><span class="o">.</span><span class="na">age</span><span class="o">)</span> <span class="n">from</span> <span class="nc">Member</span> <span class="n">m2</span><span class="o">)</span>
</code></pre></div>        </div>

        <ul>
          <li>ì„œë¸Œ ì¿¼ë¦¬ : <code class="language-plaintext highlighter-rouge">(select avg(m2.age) from Member m2)</code></li>
          <li><strong>ë©”ì¸ ì¿¼ë¦¬ì™€ ì„œë¸Œ ì¿¼ë¦¬ëŠ” Entityë¥¼ ê³µìš©ìœ¼ë¡œ ì‚¬ìš©í•˜ë©´ ì•ˆë¨</strong> â†’ m2ë¥¼ mìœ¼ë¡œ ë°”ê¿”ì¨ ë©”ì¸ì¿¼ë¦¬ì˜ Entityë¥¼ ê³µìš©ìœ¼ë¡œ ì‚¬ìš©í•˜ë©´ X</li>
        </ul>
      </li>
      <li>
        <p>ìµœì†Œ í•œ ê±´ì´ë¼ë„ ì£¼ë¬¸í•œ íšŒì›</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">select</span> <span class="n">m</span> <span class="n">from</span> <span class="nc">Member</span> <span class="n">m</span>
  <span class="nf">where</span> <span class="o">(</span><span class="n">select</span> <span class="nf">count</span><span class="o">(</span><span class="n">o</span><span class="o">)</span> <span class="n">from</span> <span class="nc">Order</span> <span class="n">o</span> <span class="n">where</span> <span class="n">m</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="na">member</span><span class="o">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
</code></pre></div>        </div>

        <ul>
          <li>ì„œë¸Œ ì¿¼ë¦¬ : <code class="language-plaintext highlighter-rouge">(select count(o) from Order o where m = o.member)</code></li>
        </ul>
      </li>
    </ul>
  </li>
  <li>ì§€ì› í•¨ìˆ˜
    <ul>
      <li><code class="language-plaintext highlighter-rouge">**[NOT] EXISTS (subquery)**</code> : ì„œë¸Œì¿¼ë¦¬ì˜ ê²°ê³¼ê°€ ì¡´ì¬í•˜ë©´ ì°¸
        <ul>
          <li>ex) Team A ì†Œì†ì¸ íšŒì› â†’ <code class="language-plaintext highlighter-rouge">String query = "select m from Member m where exists (select t from m.team t where t.name = 'TeamA')";</code></li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">**{ALL | ANY | SOME} (subquery)**</code>
        <ul>
          <li><strong>ALL</strong> : ëª¨ë‘ ë§Œì¡±í•˜ë©´ ì°¸
            <ul>
              <li>ex) ì „ì²´ ìƒí’ˆ ê°ê°ì˜ ì¬ê³ ë³´ë‹¤ ì£¼ë¬¸ëŸ‰ì´ ë§ì€ ì£¼ë¬¸ë“¤ â†’ <code class="language-plaintext highlighter-rouge">select o from Order o where o.orderAmount &gt; ALL (select p.stockAmount from Product p)</code></li>
            </ul>
          </li>
          <li><strong>ANY</strong>, <strong>SOME</strong> : ì¡°ê±´ì„ í•˜ë‚˜ë¼ë„ ë§Œì¡±í•˜ë©´ ì°¸
            <ul>
              <li>ex) ì–´ë–¤ íŒ€ì´ë“  íŒ€ì— ì†Œì†ëœ íšŒì› â†’ <code class="language-plaintext highlighter-rouge">select m from Member m
  where m.team = ANY (select t from Team t)</code></li>
            </ul>
          </li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">**[NOT] IN (subquery)**</code> : ì„œë¸Œì¿¼ë¦¬ì˜ ê²°ê³¼ ì¤‘ í•˜ë‚˜ë¼ë„ ê°™ì€ ê²ƒì´ ìˆìœ¼ë©´ ì°¸</li>
    </ul>
  </li>
  <li>JPA ì„œë¸Œ ì¿¼ë¦¬ì˜ í•œê³„
    <ul>
      <li>JPA í‘œì¤€ ì—ì„œëŠ” <strong>WHERE, HAVING ì ˆì—ì„œë§Œ ì„œë¸Œ ì¿¼ë¦¬ ì‚¬ìš©</strong> ê°€ëŠ¥</li>
      <li>í•˜ì´ë²„ë„¤ì´íŠ¸ êµ¬í˜„ì²´ì—ì„œëŠ” SELECT ì ˆë„ ì‚¬ìš© ê°€ëŠ¥! â†’ <code class="language-plaintext highlighter-rouge">select (select â€¦ )</code></li>
      <li><strong>FROM ì ˆì˜ ì„œë¸Œì¿¼ë¦¬ëŠ” JPQLì—ì„  ë¶ˆê°€ëŠ¥!</strong>
        <ul>
          <li><strong>JOIN</strong> ìœ¼ë¡œ (í’€ ìˆ˜ ìˆìœ¼ë©´) í’€ì–´ì„œ í•´ê²°í•˜ëŠ” ê²ƒì´ ë°©ë²•</li>
          <li>í˜¹ì€ <strong>Native queryë¡œ ì§ì ‘ SQLë¬¸ì„ ì§œëŠ” ê²ƒ</strong>ë„ ë°©ë²•</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h3 id="jpql-íƒ€ì…-í‘œí˜„">JPQL íƒ€ì… í‘œí˜„</h3>

<ul>
  <li>ë¬¸ì : ì‘ì€ë”°ì˜´í‘œ í™œìš© â†’ <code class="language-plaintext highlighter-rouge">â€˜Helloâ€™</code> , <code class="language-plaintext highlighter-rouge">â€˜Sheâ€™â€™sâ€™</code></li>
  <li>ìˆ«ì : ìë°” ê¸°ë³¸ ìˆ«ì í‘œí˜„ í™œìš© â†’ <code class="language-plaintext highlighter-rouge">10L(Long)</code>, <code class="language-plaintext highlighter-rouge">10D(Double)</code>, <code class="language-plaintext highlighter-rouge">10F(Float)</code></li>
  <li>Boolean : <code class="language-plaintext highlighter-rouge">TRUE</code>, <code class="language-plaintext highlighter-rouge">FALSE</code></li>
  <li><strong>ENUM : íŒ¨í‚¤ì§€ëª… í¬í•¨í•˜ì—¬ í™œìš©</strong> â†’ <code class="language-plaintext highlighter-rouge">jpabasic.StudyState.STUDYING</code>
    <ul>
      <li>
        <p><strong>íŒŒë¼ë¯¸í„°ë¥¼ í™œìš©</strong>í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥ (ìë°” ì½”ë“œë¡œ ê²€ì¦í•˜ëŠ” ê²ƒ)</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nc">String</span> <span class="n">query</span> <span class="o">=</span> <span class="s">"select m from Member m where m.state = :studyState"</span><span class="o">;</span>
  <span class="n">em</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span><span class="n">query</span><span class="o">,</span> <span class="nc">Member</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
  				<span class="o">.</span><span class="na">setParameter</span><span class="o">(</span><span class="s">"studyState"</span><span class="o">,</span> <span class="nc">StudyState</span><span class="o">.</span><span class="na">STUDYING</span><span class="o">)</span>
  				<span class="o">.</span><span class="na">getResultList</span><span class="o">();</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li><strong>Entity type : íƒ€ì… ì¼ì¹˜ ì—¬ë¶€ í™•ì¸</strong> (ìƒì† ê´€ê³„ì—ì„œ ì‚¬ìš©) â†’ <code class="language-plaintext highlighter-rouge">TYPE(m) = Member</code>
    <ul>
      <li>ë‹¤í˜•ì„±ì„ ìì£¼ í™œìš©í•œë‹¤ë©´ ì‚¬ìš© ê°€ëŠ¥</li>
      <li><code class="language-plaintext highlighter-rouge">em.createQuery(â€select i from Item i where type(i) = Bookâ€, Item.class);</code> â†’ DTYPEìœ¼ë¡œ íŒë‹¨í•´ ì¤Œ</li>
    </ul>
  </li>
</ul>

<h3 id="ì¡°ê±´ì‹-case-ì‹">ì¡°ê±´ì‹ (CASE ì‹)</h3>

<ul>
  <li>ê¸°ë³¸ CASE ì‹
    <ul>
      <li>ë²”ìœ„ì— í•´ë‹¹ í•˜ë©´ ë°œë™</li>
    </ul>

    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">select</span>
  	 <span class="k">case</span> <span class="k">when</span> <span class="n">m</span><span class="p">.</span><span class="n">age</span> <span class="o">&lt;=</span> <span class="mi">10</span> <span class="k">then</span> <span class="s1">'student'</span>
  				<span class="k">when</span> <span class="n">m</span><span class="p">.</span><span class="n">age</span> <span class="o">&gt;=</span> <span class="mi">30</span> <span class="k">then</span> <span class="s1">'adult'</span>
  			  <span class="k">else</span> <span class="s1">'normal'</span>
  	 <span class="k">end</span>
  <span class="k">from</span> <span class="n">Member</span> <span class="n">m</span>
</code></pre></div>    </div>
  </li>
  <li>ë‹¨ìˆœ CASE ì‹
    <ul>
      <li>ì •í™•íˆ ë§ì•„ ë–¨ì–´ì§€ë©´ ë°œë™</li>
    </ul>

    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">select</span>
  	 <span class="k">case</span> <span class="n">t</span><span class="p">.</span><span class="n">name</span>
  			 <span class="k">when</span> <span class="s1">'TeamA'</span> <span class="k">then</span> <span class="s1">'+110%'</span>
  			 <span class="k">when</span> <span class="s1">'TeamB'</span> <span class="k">then</span> <span class="s1">'+120%'</span>
  			 <span class="k">else</span> <span class="s1">'+105%'</span>
  	 <span class="k">end</span>
  <span class="k">from</span> <span class="n">Team</span> <span class="n">t</span>
</code></pre></div>    </div>
  </li>
  <li>COALESCE
    <ul>
      <li>í•˜ë‚˜ì”© ì¡°íšŒí•´ì„œ nullì´ë©´ ì •í•´ì§„ ê°’ìœ¼ë¡œ ë°˜í™˜</li>
      <li><code class="language-plaintext highlighter-rouge">select coalesce(m.username,'No Name') from Member m</code></li>
    </ul>
  </li>
  <li>NULLIF
    <ul>
      <li>ë‘ ê°’ì´ ê°™ìœ¼ë©´ null ë°˜í™˜, ë‹¤ë¥´ë©´ ì²«ë²ˆì§¸ ê°’ ë°˜í™˜</li>
      <li><code class="language-plaintext highlighter-rouge">select NULLIF(m.username, 'AMIN') from Member m</code></li>
    </ul>
  </li>
</ul>

<h3 id="jpql-ê¸°ë³¸-í•¨ìˆ˜">JPQL ê¸°ë³¸ í•¨ìˆ˜</h3>

<ol>
  <li><strong>JPQL í‘œì¤€ í•¨ìˆ˜</strong>
    <ul>
      <li>CONCAT : ë¬¸ì ë”í•˜ê¸° â†’ <code class="language-plaintext highlighter-rouge">CONCAT('a', 'b')</code> or <code class="language-plaintext highlighter-rouge">'a' || 'b'</code></li>
      <li>SUBSTRING : ë¬¸ì ìë¥´ê¸° â†’ <code class="language-plaintext highlighter-rouge">SUBSTRING(m.name, 2, 4)</code></li>
      <li>TRIM : ê³µë°± ì œê±°</li>
      <li>LOWER, UPPER : ëŒ€ì†Œë¬¸ì ë¡œ ë³€ê²½</li>
      <li>LENGTH : ê¸¸ì´</li>
      <li>LOCATE : ìœ„ì¹˜ ì°¾ê¸° â†’ <code class="language-plaintext highlighter-rouge">LOCATE(â€™deâ€™, â€˜abcdefghâ€™)</code> â†’ 4</li>
      <li>ABS, SQRT, MOD : ìˆ˜í•™ í•¨ìˆ˜</li>
      <li>SIZE (JPA ìš©ë„) : ì»¬ë ‰ì…˜ì˜ í¬ê¸° â†’ <code class="language-plaintext highlighter-rouge">SELECT SIZE(t.members) FROM Team t;</code></li>
      <li>INDEX (JPA ìš©ë„) : @OrderColumn ì‚¬ìš© ì‹œì˜ INDEX í™•ì¸ìš©</li>
    </ul>
  </li>
  <li><strong>ì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜</strong>
    <ul>
      <li>ì‚¬ìš© ì „ <strong>ë°©ì–¸ì— ì¶”ê°€</strong>í•´ì£¼ì–´ì•¼ í•¨ (hibernate êµ¬í˜„ì²´ëŠ”)</li>
      <li>ì‚¬ìš©í•˜ëŠ” <strong>DB Dialectë¥¼ ìƒì†ë°›ê³ , ì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜ë¥¼ ë“±ë¡</strong></li>
      <li>ì˜ˆì‹œ
        <ul>
          <li>H2 DBë¥¼ ì‚¬ìš©í•˜ë©´ì„œ ì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜ë¥¼ ë“±ë¡í•˜ê³ ì í•  ë•Œ (í•¨ìˆ˜ëŠ” ì´ë¯¸ ë§Œë“¤ì—ˆë‹¤ê³  ê°€ì •)</li>
          <li>
            <p>ë°©ì–¸ ìƒì„± í›„ ë“±ë¡</p>

            <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">// ë°©ì–¸ ìƒì„±</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyH2Dialect</span> <span class="kd">extends</span> <span class="nc">H2Dialect</span> <span class="o">{</span>
  		<span class="kd">public</span> <span class="nf">MyH2Dialect</span><span class="o">()</span> <span class="o">{</span>
  				<span class="n">regiterFunction</span><span class="o">(</span><span class="s">"group_concat"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">StandardSQLFunction</span><span class="o">(</span><span class="s">"group_concat"</span><span class="o">,</span> <span class="nc">StandardBasicTypes</span><span class="o">.</span><span class="na">STRING</span><span class="o">));</span>
  		<span class="o">}</span>
  <span class="o">}</span>
</code></pre></div>            </div>

            <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c">&lt;!-- ë“±ë¡ --&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"hibernate.dialect"</span> <span class="na">value=</span><span class="s">"org.hibernate.dialect.MyH2Dialect"</span><span class="nt">/&gt;</span>
</code></pre></div>            </div>
          </li>
          <li>
            <p>ì‚¬ìš©</p>

            <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">em</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span><span class="s">"select function('group_concat', i.name) from Item i"</span><span class="o">)</span>
</code></pre></div>            </div>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ol>
:ET