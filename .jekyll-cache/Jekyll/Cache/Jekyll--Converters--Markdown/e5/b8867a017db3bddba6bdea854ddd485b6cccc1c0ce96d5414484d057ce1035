I"<h2 id="chapter-3-ì„œë¸”ë¦¿-jsp-mvc-íŒ¨í„´">Chapter 3 [ì„œë¸”ë¦¿, JSP, MVC íŒ¨í„´]</h2>

<blockquote>
  <p><strong>íšŒì› ê´€ë¦¬ ì•±ì„ í†µí•œ ì„œë¸”ë¦¿, JSP, MVC íŒ¨í„´ ì´í•´</strong><br />
â€˜ì„œë¸”ë¦¿ë§Œâ€™ì„ ì´ìš©í•œ ì•± â†’ â€˜ì„œë¸”ë¦¿ + Template Engine(JSP)â€™ ì„ ì´ìš©í•œ ì•± â†’ â€˜ì„œë¸”ë¦¿ + Template Engine(JSP) + MVC íŒ¨í„´â€™ì„ ì´ìš©í•œ ì•± ìˆœìœ¼ë¡œ ê°œë°œì„ ì§„í–‰í•˜ë©° êµ¬ì¡°ì ìœ¼ë¡œ ì–´ë–»ê²Œ ë°œì „í•´ ì™”ëŠ”ì§€ë¥¼ í™•ì¸</p>

</blockquote>

<h3 id="íšŒì›-ê´€ë¦¬-ì•±">íšŒì› ê´€ë¦¬ ì•±</h3>

<ul>
  <li>ìš”êµ¬ì‚¬í•­
    <ul>
      <li>íšŒì› ì •ë³´ : ì´ë¦„, ë‚˜ì´</li>
      <li>ê¸°ëŠ¥ : íšŒì› ì €ì¥, íšŒì› ëª©ë¡ ì¡°íšŒ</li>
    </ul>
  </li>
  <li>íšŒì› ë„ë©”ì¸ ëª¨ë¸ (Member.class)
    <ul>
      <li><code class="language-plaintext highlighter-rouge">Long id</code> : ì‹ë³„ì</li>
      <li><code class="language-plaintext highlighter-rouge">String username</code> : ì´ë¦„</li>
      <li><code class="language-plaintext highlighter-rouge">int age</code> : ë‚˜ì´</li>
    </ul>
  </li>
  <li>íšŒì› ì €ì¥ì†Œ (MemberRepository)
    <ul>
      <li><code class="language-plaintext highlighter-rouge">static Map&lt;Long, Member&gt; store</code> : HashMap, ì›ë˜ëŠ” ë™ì‹œì„±ì„ ê³ ë ¤í•´ì„œ HashMapì„ ì‚¬ìš©í•˜ë©´ ì•ˆë¨.</li>
      <li><code class="language-plaintext highlighter-rouge">static long sequence</code> : ì‹ë³„ì ë¶€ì—¬ ê°’</li>
      <li><code class="language-plaintext highlighter-rouge">static final MemberRepository instance</code> : ì‹±ê¸€í†¤. í•˜ë‚˜ì˜ ì¸ìŠ¤í„´ìŠ¤ë§Œì„ ì‚¬ìš©</li>
      <li><code class="language-plaintext highlighter-rouge">save, findById, findAll, clearStore</code> Method ìƒì„±</li>
      <li>í•´ë‹¹ ì €ì¥ì†Œì— ëŒ€í•œ Test ì‘ì„±
        <ul>
          <li><code class="language-plaintext highlighter-rouge">@AfterEach</code>ë¥¼ í†µí•´ ê° Testë§ˆë‹¤ storeì´ ì´ˆê¸°í™” ë  ìˆ˜ ìˆë„ë¡ ì„¤ì •</li>
          <li><code class="language-plaintext highlighter-rouge">save, findById, findAll, clearStore</code> Method ê°ê°ì— ëŒ€í•œ Test ì„¤ì •. â†’ <code class="language-plaintext highlighter-rouge">Assertions.assertThat</code> ìœ¼ë¡œ ê²€ì¦</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h3 id="ì„œë¸”ë¦¿servletìœ¼ë¡œ-ì•±-ë§Œë“¤ê¸°">ì„œë¸”ë¦¿(Servlet)ìœ¼ë¡œ ì•± ë§Œë“¤ê¸°</h3>

<ul>
  <li>íšŒì› ê°€ì… formì„ ë³´ì—¬ì£¼ëŠ” servlet
    <ul>
      <li><code class="language-plaintext highlighter-rouge">public class MemberFormServlet extends HttpServlet</code> -&gt; <code class="language-plaintext highlighter-rouge">@WebServlet(name = "memberFormServlet", urlPatterns = "/servlet/members/new-form")</code> : í•´ë‹¹ urlë¡œ ë“¤ì–´ì˜¤ê²Œ ë˜ë©´ ìƒì„±ëœ request, response ê°ì²´ë¥¼ ë‹´ì€ MemberFormServletì˜ service method ì‹¤í–‰.</li>
      <li>
        <p><code class="language-plaintext highlighter-rouge">protected void service( ... )</code> â†’ from ì„ ë³´ì—¬ì£¼ëŠ” í™”ë©´ì´ê¸°ì— requestëŠ” ì‚¬ìš©í•˜ì§€ ì•Šê³  responseë§Œì„ ì‚¬ìš© (íšŒì› ì •ë³´ë¥¼ ë°›ëŠ” htmlì„ ë°˜í™˜í•´ì¤˜ì•¼ í•¨)</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">response</span><span class="o">.</span><span class="na">setContentType</span><span class="o">(</span><span class="s">"text/html"</span><span class="o">);</span>
  <span class="n">response</span><span class="o">.</span><span class="na">setCharacterEncoding</span><span class="o">(</span><span class="s">"utf-8"</span><span class="o">);</span>
        
  <span class="nc">PrintWriter</span> <span class="n">w</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getWriter</span><span class="o">();</span>
  <span class="n">w</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"&lt;!DOCTYPE html&gt;\n"</span> <span class="o">+</span>
          <span class="s">"&lt;html&gt;\n"</span> <span class="o">+</span>
          <span class="s">"&lt;head&gt;\n"</span> <span class="o">+</span>
          <span class="o">...</span> <span class="o">)</span>
</code></pre></div>        </div>

        <ul>
          <li>html ì„ ë°˜í™˜í• ê±°ë¼ëŠ” ì •ë³´ë¥¼ ì•Œë ¤ì£¼ê³  ì¸ì½”ë”© ì§„í–‰.</li>
          <li>ê·¸ í›„ html ê·¸ ìì²´ë¥¼ íŒŒì¼í˜•ì‹ì´ ì•„ë‹Œ <strong>textí˜•ì‹ìœ¼ë¡œ ë³´ë‚´ì¤Œ</strong>. (servletì„ ì‚¬ìš©í•  ê²½ìš°. ì´ë¥¼ í†µí•œ ë™ì  í™”ë©´ë„ ê°€ëŠ¥.)</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>ì €ì¥ëœ íšŒì› ë¦¬ìŠ¤íŠ¸ë¥¼ ë³´ì—¬ì£¼ëŠ” servlet
    <ul>
      <li><code class="language-plaintext highlighter-rouge">public class MemberListServlet extends HttpServlet</code> â†’ <code class="language-plaintext highlighter-rouge">@WebServlet(name = "memberListServlet", urlPatterns = "/servlet/members")</code>  : í•´ë‹¹ urlë¡œ ë“¤ì–´ì˜¤ê²Œ ë˜ë©´ ìƒì„±ëœ request, response ê°ì²´ë¥¼ ë‹´ì€ MemberListServletì˜ <strong>service method ì‹¤í–‰.</strong></li>
      <li><code class="language-plaintext highlighter-rouge">private MemberRepository memberRepository = MemberRepository.*getInstance*();</code> â†’ ì €ì¥ëœ íšŒì›ë“¤ì˜ ëª©ë¡ì„ ê°€ì ¸ì˜¤ê¸°ì— ì €ì¥ì†Œ (MemberRepository) ì‚¬ìš©</li>
      <li>
        <p><code class="language-plaintext highlighter-rouge">protected void service( ... )</code> â†’ íšŒì› ëª©ë¡ë§Œì„ ë³´ì—¬ì£¼ëŠ” í™”ë©´ì´ê¸°ì— requestëŠ” ì‚¬ìš©í•˜ì§€ ì•Šê³  responseë§Œì„ ì‚¬ìš© (íšŒì› ì •ë³´ë¥¼ ë°›ëŠ” htmlì„ ë°˜í™˜í•´ì¤˜ì•¼ í•¨)</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">response</span><span class="o">.</span><span class="na">setContentType</span><span class="o">(</span><span class="s">"text/html"</span><span class="o">);</span>
  <span class="n">response</span><span class="o">.</span><span class="na">setCharacterEncoding</span><span class="o">(</span><span class="s">"utf-8"</span><span class="o">);</span>
        
  <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="n">members</span> <span class="o">=</span> <span class="n">memberRepository</span><span class="o">.</span><span class="na">findAll</span><span class="o">();</span>
        
  <span class="nc">PrintWriter</span> <span class="n">w</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getWriter</span><span class="o">();</span>
  <span class="n">w</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"&lt;html&gt;"</span><span class="o">);</span>
  <span class="o">...</span>
  <span class="k">for</span> <span class="o">(</span><span class="nc">Member</span> <span class="n">member</span> <span class="o">:</span> <span class="n">members</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">w</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">" &lt;tr&gt;"</span><span class="o">);</span>
      <span class="n">w</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">" &lt;td&gt;"</span> <span class="o">+</span> <span class="n">member</span><span class="o">.</span><span class="na">getId</span><span class="o">()</span> <span class="o">+</span> <span class="s">"&lt;/td&gt;"</span><span class="o">);</span>
      <span class="n">w</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">" &lt;td&gt;"</span> <span class="o">+</span> <span class="n">member</span><span class="o">.</span><span class="na">getUsername</span><span class="o">()</span> <span class="o">+</span> <span class="s">"&lt;/td&gt;"</span><span class="o">);</span>
      <span class="n">w</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">" &lt;td&gt;"</span> <span class="o">+</span> <span class="n">member</span><span class="o">.</span><span class="na">getAge</span><span class="o">()</span> <span class="o">+</span> <span class="s">"&lt;/td&gt;"</span><span class="o">);</span>
      <span class="n">w</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">" &lt;/tr&gt;"</span><span class="o">);</span>
  <span class="o">}</span> <span class="c1">// ë™ì ìœ¼ë¡œ í™”ë©´ì„ êµ¬ì„±í•  ìˆ˜ ìˆìŒ</span>
  <span class="o">...</span>
</code></pre></div>        </div>

        <ul>
          <li>html ì„ ë°˜í™˜í• ê±°ë¼ëŠ” ì •ë³´ë¥¼ ì•Œë ¤ì£¼ê³  ì¸ì½”ë”© ì§„í–‰.</li>
          <li>ê·¸ í›„ html ê·¸ ìì²´ë¥¼ íŒŒì¼í˜•ì‹ì´ ì•„ë‹Œ textí˜•ì‹ìœ¼ë¡œ ë³´ë‚´ì¤Œ. (servletì„ ì‚¬ìš©í•  ê²½ìš°. ì´ë¥¼ í†µí•œ ë™ì  í™”ë©´ë„ ê°€ëŠ¥.)</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>íšŒì› ì €ì¥, ì €ì¥ í›„ ì •ë³´ë¥¼ ë³´ì—¬ì£¼ëŠ” Servlet
    <ul>
      <li><code class="language-plaintext highlighter-rouge">public class MemberSaveServlet extends HttpServlet</code> â†’ <code class="language-plaintext highlighter-rouge">@WebServlet(name = "memberSaveServlet", urlPatterns = "/servlet/members/save")</code> : í•´ë‹¹ urlë¡œ ë“¤ì–´ì˜¤ê²Œ ë˜ë©´ ìƒì„±ëœ request, response ê°ì²´ë¥¼ ë‹´ì€ MemberFormServletì˜ service method ì‹¤í–‰.</li>
      <li><code class="language-plaintext highlighter-rouge">private MemberRepository memberRepository = MemberRepository.*getInstance*();</code> â†’ ì €ì¥ëœ íšŒì›ë“¤ì˜ ëª©ë¡ì„ ê°€ì ¸ì˜¤ê¸°ì— ì €ì¥ì†Œ (MemberRepository) ì‚¬ìš©</li>
      <li>
        <p><code class="language-plaintext highlighter-rouge">protected void service( ... )</code> â†’ ì´ì „ê³¼ëŠ” ë‹¤ë¥´ê²Œ íšŒì›ì„ ì €ì¥í•˜ëŠ” ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ì–´ response ë¿ë§Œ ì•„ë‹Œ requestë„ ì‚¬ìš©.</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">// username=ë­ì‹œê¸°&amp;age=ìˆ«ì</span>
  <span class="nc">String</span> <span class="n">username</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"username"</span><span class="o">);</span>
  <span class="kt">int</span> <span class="n">age</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"age"</span><span class="o">));</span>
        
  <span class="c1">// ê°’ì— ë”°ë¥¸ Member ê°ì²´ ìƒì„±</span>
  <span class="nc">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Member</span><span class="o">(</span><span class="n">username</span><span class="o">,</span> <span class="n">age</span><span class="o">);</span>
  <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"member = "</span> <span class="o">+</span> <span class="n">member</span><span class="o">);</span>
        
  <span class="c1">// member ì €ì¥</span>
  <span class="n">memberRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">member</span><span class="o">);</span>
        
  <span class="c1">// response(ë°˜í™˜ê°’) ì„¤ì •</span>
  <span class="n">response</span><span class="o">.</span><span class="na">setContentType</span><span class="o">(</span><span class="s">"text/html"</span><span class="o">);</span>
  <span class="n">response</span><span class="o">.</span><span class="na">setCharacterEncoding</span><span class="o">(</span><span class="s">"utf-8"</span><span class="o">);</span>
  <span class="nc">PrintWriter</span> <span class="n">w</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getWriter</span><span class="o">();</span>
  <span class="n">w</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"&lt;html&gt;\n"</span> <span class="o">+</span>
          <span class="s">"&lt;head&gt;\n"</span> <span class="o">+</span>
  				<span class="o">...</span> <span class="o">+</span>
  				<span class="s">"&lt;ul&gt;\n"</span> <span class="o">+</span>
            <span class="s">" &lt;li&gt;id="</span><span class="o">+</span><span class="n">member</span><span class="o">.</span><span class="na">getId</span><span class="o">()+</span><span class="s">"&lt;/li&gt;\n"</span> <span class="o">+</span>
            <span class="s">" &lt;li&gt;username="</span><span class="o">+</span><span class="n">member</span><span class="o">.</span><span class="na">getUsername</span><span class="o">()+</span><span class="s">"&lt;/li&gt;\n"</span> <span class="o">+</span>
            <span class="s">" &lt;li&gt;age="</span><span class="o">+</span><span class="n">member</span><span class="o">.</span><span class="na">getAge</span><span class="o">()+</span><span class="s">"&lt;/li&gt;\n"</span> <span class="o">+</span>
  				<span class="o">...</span> 
  <span class="o">)</span>
</code></pre></div>        </div>

        <ul>
          <li>requestë¥¼ í†µí•´ ë„˜ê²¨ì ¸ ì˜¨ form í˜•ì‹ì˜ Form Data ë¥¼ ì¡°íšŒ</li>
          <li>ì¡°íšŒëœ ê°’ë“¤ì„ MemberRepositoryë¥¼ í†µí•´ ì €ì¥</li>
          <li>ì €ì¥ëœ ê²°ê³¼ë¥¼ responseë¥¼ í†µí•´ ë°˜í™˜ (ë™ì ìœ¼ë¡œ html ìƒì„±)</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<aside>
ğŸš¨ <strong>í•˜ì§€ë§Œ!</strong><br />
ì´ë ‡ê²Œ Servletë§Œì„ ì‚¬ìš©í•´ì„œ HTMLì„ ìƒì„±í•˜ì—¬ ë³´ë‚´ì£¼ëŠ” ê²ƒì€ ë™ì ì¸ í™”ë©´ì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆì§€ë§Œ, ì§ì ‘ HTMLì„ JAVAì½”ë“œ ì•ˆì—ì„œ Text í˜•íƒœë¡œ ì‘ì„±í•´ì•¼ ëœë‹¤ëŠ” ë‹¨ì ì´ ìˆìŒ. (ê´‘ì¥íˆ ê·€ì°®ì•„!) â†’ Template Engine(JSP, Thymeleaf) ì‚¬ìš©ì„ í†µí•´ í•´ê²° ê°€ëŠ¥

</aside>

<h3 id="-view-template-jspë¥¼-ì´ìš©í•œ-ì•±-ë§Œë“¤ê¸°">+ View Template (JSP)ë¥¼ ì´ìš©í•œ ì•± ë§Œë“¤ê¸°</h3>

<blockquote>
  <p>JSPëŠ” í˜„ì¬ ì˜ ì‚¬ìš©ë˜ê³  ìˆëŠ” View Templateì€ ì•„ë‹ˆì§€ë§Œ, ê·¸ë˜ë„ ì´ì „ì— ê³„ì† ì‚¬ìš©ë˜ì—ˆê¸°ì— í•œë²ˆ ë§›ë³´ê³  ë„˜ì–´ê°€ëŠ” ê²ƒ. ì´í›„ì—ëŠ” Veiw Templateì„ Thymeleafë¡œ ì‚¬ìš©í•  ê²ƒì„.</p>
</blockquote>

<ul>
  <li>JSP
    <ul>
      <li>
        <p>JSP implemantation</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">implementation</span> <span class="err">'</span><span class="n">org</span><span class="o">.</span><span class="na">apache</span><span class="o">.</span><span class="na">tomcat</span><span class="o">.</span><span class="na">embed</span><span class="o">:</span><span class="n">tomcat</span><span class="o">-</span><span class="n">embed</span><span class="o">-</span><span class="n">jasper</span><span class="err">'</span>
  <span class="n">implementation</span> <span class="err">'</span><span class="n">javax</span><span class="o">.</span><span class="na">servlet</span><span class="o">:</span><span class="n">jstl</span><span class="err">'</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p>JSP ëŠ” webapp í•˜ìœ„ì— ì„¤ì •í•´ì•¼ ë¨ (src/main/webapp/jsp/..)</p>
      </li>
    </ul>

    <aside>
  ğŸ’¡ <strong>JSPëŠ” íŒŒì¼ í•˜ë‚˜ ì•ˆì—ì„œ html, java ë‘˜ ë‹¤ ì‚¬ìš©ì´ ê°€ëŠ¥.</strong><br />
  <ul>
  <li>ì¦‰, javaë¡œ ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì„ ë§Œë“¤ê³ </li>
  <li>ê·¸ ê²°ê³¼ì— ë”°ë¥¸ ê°’ë“¤ì„ ì´ìš©í•œ htmlíŒŒì¼ì„ ë§Œë“¤ ìˆ˜ ìˆìŒ (ë™ì  í™”ë©´)</li>
  <li>ë˜í•œ, jspëŠ” Survletìœ¼ë¡œ ìë™ ë³€í™˜ë˜ì–´ì„œ ì‚¬ìš©ë˜ê¸°ì— jsp ì•ˆì—ì„œ responseì™€ requestë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ</li>
  </ul>
  </aside>
  </li>
  <li>íšŒì› ì €ì¥ (save.jsp)
    <ul>
      <li>
        <p>ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ (JAVA ì½”ë“œ)</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="o">...</span>
  <span class="o">&lt;%</span><span class="err">@</span> <span class="n">page</span> <span class="n">contentType</span><span class="o">=</span><span class="s">"text/html;charset=UTF-8"</span> <span class="n">language</span><span class="o">=</span><span class="s">"java"</span> <span class="o">%&gt;</span>
  <span class="o">&lt;%</span> <span class="c1">// ë¡œì§</span>
      <span class="nc">MemberRepository</span> <span class="n">memberRepository</span> <span class="o">=</span> <span class="nc">MemberRepository</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
      <span class="nc">String</span> <span class="n">username</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"username"</span><span class="o">);</span>
      <span class="o">...</span>
  <span class="o">%&gt;</span>
</code></pre></div>        </div>

        <ul>
          <li>ì—¬ê¸°ì„œ ë°›ì•„ì˜¤ê±°ë‚˜ ì‚¬ìš©ëœ ë³€ìˆ˜ëŠ” htmlì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ! â†’ <code class="language-plaintext highlighter-rouge">&lt;%=member.getId()%&gt;</code> : ìë°”ì½”ë“œì˜ ê²°ê³¼ë¥¼ ì¶œë ¥ í•˜ëŠ” ê²ƒ (<code class="language-plaintext highlighter-rouge">&lt;%=  %&gt;</code>, soutv() ë¼ê³  ìƒê°í•˜ë©´ ë¨)</li>
        </ul>
      </li>
      <li>
        <p>ë°˜í™˜ë  í™”ë©´ (HTML ì½”ë“œ)</p>

        <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
  ...
  <span class="nt">&lt;ul&gt;</span>
      <span class="nt">&lt;li&gt;</span>id=<span class="nt">&lt;</span><span class="err">%=</span><span class="na">member.getId</span><span class="err">()%</span><span class="nt">&gt;&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;</span>username=<span class="nt">&lt;</span><span class="err">%=</span><span class="na">member.getUsername</span><span class="err">()%</span><span class="nt">&gt;&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;</span>age=<span class="nt">&lt;</span><span class="err">%=</span><span class="na">member.getAge</span><span class="err">()%</span><span class="nt">&gt;&lt;/li&gt;</span>
  <span class="nt">&lt;/ul&gt;</span>
  ...
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>íšŒì› ë¦¬ìŠ¤íŠ¸
    <ul>
      <li>
        <p>ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ (JAVA ì½”ë“œ)</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="o">...</span>
  <span class="o">&lt;%</span><span class="err">@</span> <span class="n">page</span> <span class="n">contentType</span><span class="o">=</span><span class="s">"text/html;charset=UTF-8"</span> <span class="n">language</span><span class="o">=</span><span class="s">"java"</span> <span class="o">%&gt;</span>
  <span class="o">&lt;%</span>
      <span class="nc">MemberRepository</span> <span class="n">memberRepository</span> <span class="o">=</span> <span class="nc">MemberRepository</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
      <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="n">members</span> <span class="o">=</span> <span class="n">memberRepository</span><span class="o">.</span><span class="na">findAll</span><span class="o">();</span>
  <span class="o">%&gt;</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p>ë°˜í™˜ë  í™”ë©´ (HTML ì½”ë“œ)</p>

        <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
  ...
      <span class="nt">&lt;</span><span class="err">%</span>
          <span class="na">for</span> <span class="err">(</span><span class="na">Member</span> <span class="na">member</span> <span class="na">:</span> <span class="na">members</span><span class="err">)</span> <span class="err">{</span>
              <span class="na">out.write</span><span class="err">("</span> <span class="err">&lt;</span><span class="na">tr</span><span class="nt">&gt;</span>");
              out.write(" <span class="nt">&lt;td&gt;</span>" + member.getId() + "<span class="nt">&lt;/td&gt;</span>");
              out.write(" <span class="nt">&lt;td&gt;</span>" + member.getUsername() + "<span class="nt">&lt;/td&gt;</span>");
              out.write(" <span class="nt">&lt;td&gt;</span>" + member.getAge() + "<span class="nt">&lt;/td&gt;</span>");
              out.write(" <span class="nt">&lt;/tr&gt;</span>");
          }
      %&gt;
  ...
</code></pre></div>        </div>

        <ul>
          <li><strong>HTML ì½”ë“œ ì•ˆì— ìë°” ì½”ë“œë¥¼ ë„£ìŒ</strong>ìœ¼ë¡œì¨ í›¨ì”¬ <strong>ë” ë™ì ì¸ í™”ë©´ ìƒì„±</strong> ê°€ëŠ¥. (servletì—ì„œ ì‘ì„±í–ˆë˜ ì½”ë“œì™€ ìœ ì‚¬)</li>
          <li>HTML ì•ˆì—ì„œ ìë°”ì½”ë“œë¥¼ ì‹¤í–‰í•˜ë ¤ë©´ <code class="language-plaintext highlighter-rouge">&lt;%</code><code class="language-plaintext highlighter-rouge">%&gt;</code> ì‚¬ìš©. (servletì—ì„œì™€ ê°™ì´ ë™ì‘í•¨)</li>
        </ul>
        <aside>
  ğŸš¨ <strong>í•˜ì§€ë§Œ!</strong><br />
   JSP(+servlet)ë§Œì„ ì‚¬ìš©í•˜ê²Œ ëœë‹¤ë©´, ë·°ì˜ í•­ëª©ê³¼ ë¹„ì§€ë‹ˆìŠ¤ ì½”ë“œê°€ ë¶„ë¦¬ë˜ì§€ ì•Šì•˜ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŒ. ì¦‰, ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì„ ë³€ê²½í•˜ë ¤í•´ë„ JSPì—ì„œ ìˆ˜ì •í•´ì•¼ ë˜ê³ , ë³´ì—¬ì§€ëŠ” í™”ë©´ì— ëŒ€í•´ ìˆ˜ì •í•  ë•Œë„ JSPì—ì„œ ìˆ˜ì •í•´ì•¼ë¨!<br />
  â†’ JSPëŠ” ëª©ì ì— ë§ê²Œ HTMLë¡œ í™”ë©´(View)ì„ ê·¸ë¦¬ëŠ” ì¼ì— ì§‘ì¤‘í•˜ë„ë¡ í•´ì•¼ í•¨<br />
  â†’ ë¶„ë¦¬í•  í•„ìš”ê°€ ìˆìŒ!!! (MVC íŒ¨í„´ ë„ì… í•„ìš”!)
        
  </aside>
      </li>
    </ul>
  </li>
</ul>

<h3 id="-mvc-íŒ¨í„´-ë„ì…">+ MVC íŒ¨í„´ ë„ì…</h3>

<ul>
  <li>ê°œìš”
    <ul>
      <li>ë„ˆë¬´ ë§ì€ ì—­í•  : í˜„ì¬ ì½”ë“œëŠ” ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì„ êµ¬í˜„í•˜ëŠ” ì—­í• , í™”ë©´(View)ë¥¼ ê·¸ë¦¬ëŠ” ì—­í•  ë“± ë¶„ë¦¬ë˜ì§€ ì•Šê³  <strong>í•œë²ˆì— ë§ì€ ì—­í• </strong>ì„ ë§¡ê³  ìˆìŒ</li>
      <li>ë³€ê²½ì˜ ë¼ì´í”„ ì‚¬ì´í´ : ë˜í•œ ì´ ì—­í• ë“¤ì˜ <strong>ë¼ì´í”„ ì‚¬ì´í´ì´ ë‹¤ë¥´ë‹¤</strong>ëŠ” ê²ƒ. ì¦‰, ê°ê°ì˜ ë³€ê²½ì€ ë‹¤ë¥´ê²Œ ë°œìƒí•  ê²½ìš°ê°€ ë†’ê³  ì„œë¡œ ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŒ. ê·¸ëŸ°ë° ë‘˜ì´ ê°™ì€ ì½”ë“œì— ê°™ì´ ì¡´ì¬í•˜ëŠ” ê²ƒì€ ì˜³ì§€ ì•ŠìŒ</li>
      <li>ê¸°ëŠ¥ íŠ¹í™” : í™”ë©´ì„ ë Œë”ë§ í•˜ëŠ”ë°ì— ìµœì í™” ëœ Veiw Templateì€ <strong>ê·¸ ì—­í• ì—ë§Œ ì§‘ì¤‘</strong>í•˜ëŠ” ê²ƒì´ ë§ìŒ</li>
    </ul>
  </li>
  <li>MVC (Model View Controller)
    <ul>
      <li>ì„œë¡œ ë™ì‘í•˜ëŠ” ì—­í• ì— ë”°ë¼ Controller View ë¼ëŠ” ì˜ì—­ìœ¼ë¡œ ë‚˜ëˆ„ëŠ” ê²ƒ</li>
      <li><strong>Controller</strong> : <strong>HTTP ìš”ì²­ì„ ë°›</strong>ì•„ íŒŒë¼ë¯¸í„°ë¥¼ í™•ì¸í•˜ê³ , <strong>ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì„ ì‹¤í–‰</strong>. ë§ˆì§€ë§‰ìœ¼ë¡œ ë·°ì— ì „ë‹¬í•  ìµœì¢… ë°ì´í„°ë¥¼ ëª¨ë¸ì— ë‹´ìŒ (ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ê¹Œì§€ Controllerì— ë§¡ê¸°ë©´ Controllerì˜ ì—­í•  ì´ ë°©ëŒ€í•´ì§. ê·¸ë˜ì„œ ë³´í†µ Service, Repository(ì €ì¥ì†Œ)ë¼ëŠ” ì¶”ê°€ì ì¸ ê³„ì¸µì„ ë§Œë“¤ì–´ ìˆ˜í–‰. ë”°ë¼ì„œ ControllerëŠ” Serviceì˜ ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì„ í˜¸ì¶œí•˜ëŠ” ì—­í• ë§Œì„ ìˆ˜í–‰)</li>
      <li><strong>Model</strong> : ë·°ì—ì„œ ì‚¬ìš©ë  <strong>ë°ì´í„°</strong>ë¥¼ ë‹´ìŒ. ì´ëŸ° ëª¨ë¸ì´ ìˆê¸°ì— ViewëŠ” ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì„ ëª°ë¼ë„ ë˜ê³  ë°ì´í„°ë¥¼ ì§ì ‘ ì ‘ê·¼í•  í•„ìš”ê°€ ì—†ì–´ì ¸ í™”ë©´ì„ ë Œë”ë§ í•˜ëŠ” ì—­í• ì— ì§‘ì¤‘ ê°€ëŠ¥</li>
      <li><strong>View</strong> : ëª¨ë¸ì— ë‹´ê²¨ ìˆëŠ” ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ <strong>í™”ë©´ì„ ë Œë”ë§ í•˜ëŠ” ì¼</strong>ì— ì§‘ì¤‘. (HTML ìƒì„± ë¶€ë¶„)</li>
    </ul>
  </li>
  <li>íšŒì› ê°€ì… formì„ ë³´ì—¬ì£¼ëŠ” Servlet Controller
    <ul>
      <li><code class="language-plaintext highlighter-rouge">public class MvcMemberFormServlet extends HttpServlet</code> â†’ <code class="language-plaintext highlighter-rouge">@WebServlet(name = "mvcMemberFormServlet", urlPatterns = "/servlet-mvc/members/new-form")</code></li>
      <li>
        <p>service ë‚´ì—ì„œ Controllerì˜ ì—­í•  (ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ ìˆ˜í–‰, View ë Œë”ë§ í›„ ë°˜í™˜) ìˆ˜í–‰</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nc">String</span> <span class="n">viewPath</span> <span class="o">=</span> <span class="s">"/WEB-INF/views/new-form.jsp"</span><span class="o">;</span>
  <span class="nc">RequestDispatcher</span> <span class="n">dispatcher</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="n">viewPath</span><span class="o">);</span>
  <span class="n">dispatcher</span><span class="o">.</span><span class="na">forward</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
</code></pre></div>        </div>

        <ul>
          <li>WEB-INF :  ì´ í•˜ìœ„ íŒŒì¼ë“¤ì€ ì™¸ë¶€ì—ì„œ í˜¸ì¶œí•´ë„ í˜¸ì¶œë˜ì§€ ì•ŠìŒ. ì¦‰, controllerë¥¼ í†µí•´ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥</li>
          <li><code class="language-plaintext highlighter-rouge">request dispatcher</code>ì— ì´ë™í•  viewPathë¥¼ ì„¤ì •.</li>
          <li><code class="language-plaintext highlighter-rouge">forward</code>ë¥¼ í†µí•´ ì‘ë™(ë Œë”ë§ ë° ë°˜í™˜ ì‹¤ì‹œ) â†’  ì„œë¸”ë¦¿ì—ì„œ <strong>jspë¥¼ í˜¸ì¶œ</strong>í•˜ëŠ” ê¸°ëŠ¥, ì„œë²„ ë‚´ë¶€ì—ì„œ ë‹¤ì‹œ í˜¸ì¶œ ë°œìƒ (redirectê°€ ì•„ë‹˜! ë©”ì„œë“œ í˜¸ì¶œí•˜ë“¯ì´ ì„œë²„ë¼ë¦¬ ë…¸ëŠ” ê²ƒ!)</li>
        </ul>
      </li>
      <li>ViewëŠ” ì´ì „ê³¼ ë™ì¼ (ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì„ ì œì™¸í•œ View)</li>
    </ul>
  </li>
  <li>íšŒì› ì €ì¥ ë° ì €ì¥ëœ ê²°ê³¼ë¥¼ ë³´ì—¬ì£¼ëŠ” Servlet Controller
    <ul>
      <li><code class="language-plaintext highlighter-rouge">public class MvcMemberSaveServlet extends HttpServlet</code> â†’ <code class="language-plaintext highlighter-rouge">@WebServlet(name = "mvcMemberSaveServlet", urlPatterns = "/servlet-mvc/members/save")</code></li>
      <li>
        <p>service ë‚´ì—ì„œ Controller ì—­í•  (ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ ìˆ˜í–‰, View ë Œë”ë§ í›„ ë°˜í™˜) ìˆ˜í–‰. ì¶”ê°€ì ìœ¼ë¡œ ë Œë”ë§ ì‹œ ì‚¬ìš©ë  ë³€ìˆ˜ë¥¼ Modelì— ë‹´ì•„ ë„˜ê²¨ì¤Œ</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="o">...</span>
  <span class="n">request</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"member"</span><span class="o">,</span> <span class="n">member</span><span class="o">);</span>
        
  <span class="nc">String</span> <span class="n">viewPath</span> <span class="o">=</span> <span class="s">"/WEB-INF/views/save-result.jsp"</span><span class="o">;</span>
  <span class="nc">RequestDispatcher</span> <span class="n">dispatcher</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="n">viewPath</span><span class="o">);</span>
  <span class="n">dispatcher</span><span class="o">.</span><span class="na">forward</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
</code></pre></div>        </div>

        <ul>
          <li><code class="language-plaintext highlighter-rouge">request.setAttribute()</code> ë¥¼ í†µí•´ reqeust ë‚´ë¶€ ì €ì¥ì†Œ ì‚¬ìš©. (Model part)</li>
          <li><code class="language-plaintext highlighter-rouge">forward</code>ë¥¼ í†µí•´ Modelì´ ì €ì¥ëœ request ë° responseë¥¼ ë„˜ê²¨ì¤Œ. â†’ JSPì—ì„œ ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì˜ ê²°ê³¼ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ</li>
        </ul>
      </li>
      <li>ViewëŠ” ì´ì „ê³¼ ìœ ì‚¬ (ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì„ ì œì™¸í•œ View)
        <ul>
          <li>But, requestì— memberë¥¼ ë‹´ì•˜ê¸° ë•Œë¬¸ì—, requestë¥¼ í†µí•´ì„œ ê°’ì„ ì‚¬ìš©í•´ì•¼ ë¨. â†’ <code class="language-plaintext highlighter-rouge">((Member) request.getAttribute("member")).id</code></li>
          <li>í˜¹ì€ JSPì—ì„œ ì œê³µí•˜ëŠ” í‘œí˜„ì‹ ì‚¬ìš© â†’ <code class="language-plaintext highlighter-rouge">${member.id}</code></li>
        </ul>
      </li>
    </ul>
  </li>
  <li>íšŒì› ëª©ë¡ ì¡°íšŒ Servlet Controller
    <ul>
      <li><code class="language-plaintext highlighter-rouge">public class MvcMemberListServlet extends HttpServlet</code> â†’ <code class="language-plaintext highlighter-rouge">@WebServlet(name = "mvcMemberListServlet", urlPatterns = "/servlet-mvc/members")</code></li>
      <li>
        <p>service ë‚´ì—ì„œ Controller ì—­í•  (ì´ì „ Controllerì™€ ë™ì¼)</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="n">members</span> <span class="o">=</span> <span class="n">memberRepository</span><span class="o">.</span><span class="na">findAll</span><span class="o">();</span>
  <span class="n">request</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"members"</span><span class="o">,</span> <span class="n">members</span><span class="o">);</span>
  <span class="nc">String</span> <span class="n">viewPath</span> <span class="o">=</span> <span class="s">"/WEB-INF/views/members.jsp"</span><span class="o">;</span>
  <span class="nc">RequestDispatcher</span> <span class="n">dispatcher</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="n">viewPath</span><span class="o">);</span>
  <span class="n">dispatcher</span><span class="o">.</span><span class="na">forward</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
</code></pre></div>        </div>
      </li>
      <li>ViewëŠ” ì´ì „ê³¼ ìœ ì‚¬ (ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì„ ì œì™¸í•œ View)
        <ul>
          <li>JSP ì—ì„œ ì œê³µí•˜ëŠ” loop ë¬¸ë²• ì‚¬ìš© â†’ <code class="language-plaintext highlighter-rouge">&lt;c:forEachvar="item" items="${members}"&gt;...</code> (<code class="language-plaintext highlighter-rouge">&lt;%@ **taglib** prefix="c" uri="http://java.sun.com/jsp/jstl/core"%&gt;</code>)</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>MVC íŒ¨í„´ì˜ í•œê³„</strong>
    <ul>
      <li>í¬ì›Œë”©ì˜ ì¤‘ë³µ : <code class="language-plaintext highlighter-rouge">dispatcher.forward(request, response)</code>ê°€ ë°˜ë³µì ìœ¼ë¡œ ì´ë£¨ì–´ì§€ê³  ìˆìŒ</li>
      <li>ViewPathì˜ ì¤‘ë³µ : ê¸°ë³¸ ë£¨íŠ¸ ê²½ë¡œì˜ ì¤‘ë³µ(<code class="language-plaintext highlighter-rouge">â€/WEB-INF/views/â€</code>)ì´ ìˆìŒ</li>
      <li>ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì½”ë“œ : request, responseëŠ” ì•ˆì“°ëŠ” ê²½ìš°ë„ ìˆìŒ (íŠ¹íˆ í˜„ì¬ëŠ” responseë¥¼ ëª¨ë“  ì½”ë“œì—ì„œ ì‚¬ìš©í•˜ì§€ ì•Šê³  ìˆìŒ)</li>
      <li><strong>ê³µí†µ ì²˜ë¦¬ì˜ ì–´ë ¤ì›€</strong> : ê° Controllerì—ì„œ ê³µí†µì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œë” ë¡œì§ì„ ì„¤ì •í•˜ëŠ” ê²ƒì´ ê¹Œë‹¤ë¡œì›€ (í˜„ì¬ëŠ” ì¤‘ë³µì ì¸ ì½”ë“œë¡œ ë„£ì„ ìˆ˜ ë°–ì— ì—†ê³  ì´ ì¤‘ë³µì„ ë©”ì„œë“œë¡œ í˜¸ì¶œí•œë‹¤í•´ë„ ê·¸ ë˜í•œ ì¤‘ë³µì¸ ê²ƒì€ ë§ˆì°¬ê°€ì§€)</li>
      <li>ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ê°œë…ì´ â€œ<strong>í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬</strong>â€ â†’ ê° ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í˜¸ì¶œí•˜ê¸° ì „ì— ë¨¼ì € ê³µí†µ ê¸°ëŠ¥ì„ ì²˜ë¦¬í•˜ëŠ” <strong>ìˆ˜ë¬¸ì¥ ì—­í• </strong>ì´ í•„ìš”. ì¦‰, ëª¨ë“  ìš”ì²­ì˜ ì…êµ¬ë¥¼ í•˜ë‚˜ë¡œ ë§Œë“œëŠ” ê²ƒ!</li>
    </ul>
  </li>
</ul>

<h2 id="chapter-4-mvc-íŒ¨í„´">Chapter 4 [MVC íŒ¨í„´]</h2>

<blockquote>
  <p>ì£¼ì–´ì ¸ ìˆê³  ìë™í™”ë˜ëŠ” Spring ê·¸ ìì²´ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ, servletì„ ì´ìš©í•˜ì—¬ MVC íŒ¨í„´ì„ êµ¬í˜„ â†’ ì¶”í›„ ì‚¬ìš©ë˜ëŠ” Spring Bootê°€ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ ì´í•´í•˜ê¸° ìœ„í•¨ (Servletì„ ì´ìš©í•´ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë„ì…í•˜ê³ , Viewë¥¼ ë¶„ë¦¬í•˜ê³ , Modelì„ ì¶”ê°€í•˜ê³  ì‹¤ìš©ì ì´ê³  ìœ ì—°í•œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë„ì…í•˜ë©´ ê²°êµ­ ìš°ë¦¬ê°€ ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” <strong>Spring MVCì™€ ë˜‘ê°™ì€ êµ¬ì¡°</strong>ë¥¼ ê°€ì§€ê²Œ ë¨)</p>

</blockquote>

<h3 id="í”„ë¡ íŠ¸-ì»¨íŠ¸ë¡¤ëŸ¬-íŒ¨í„´">í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ íŒ¨í„´</h3>

<p><img src="/images/posts/post-220504/Untitled.png" alt="" /></p>

<ul>
  <li>ê°ê°ì˜ controllerì—ì„œ ì§„í–‰ ë˜ì—ˆë˜ <strong>ê³µí†µë¡œì§ì— ëŒ€í•œ ì²˜ë¦¬</strong>ë¥¼ Front Controllerì—ì„œ ì§„í–‰ ê°€ëŠ¥</li>
  <li>ìš”ì²­ì€ ëª¨ë‘ Front Controllerë¡œ ê°€ê²Œ ë˜ê³ , ê·¸ í›„ì— í•´ë‹¹ í•˜ëŠ” Controllerë¥¼ í˜¸ì¶œí•˜ëŠ” ë°©ì‹</li>
  <li>ì¦‰, Front Controllerë¥¼ ì œì™¸í•œ ê° Controllerë“¤ì€ Servletì— ì˜ì¡´í•˜ì§€ ì•Šì•„ë„ ë¨ (Front Controllerì—ì„œ ì²˜ë¦¬í•˜ë‹ˆê¹)</li>
  <li><strong>ìŠ¤í”„ë§ ì›¹ MVCë„ FrontController íŒ¨í„´</strong>ìœ¼ë¡œ êµ¬í˜„ë˜ì–´ ìˆìŒ</li>
</ul>

<h3 id="front-controller-ë„ì…---ver1">Front Controller ë„ì… - ver1</h3>

<ul>
  <li>ì¼ë‹¨ ê° Controllerë“¤ì˜ ë‹¤í˜•ì„±ì„ ìœ„í•´ ControllerV1ì„ ìƒì„± â†’ ë‚˜ì¤‘ì— front controllerì—ì„œ ê° Controllerë¥¼ ì œì•½ì—†ì´ ì‚¬ìš©í•˜ê¸° ìœ„í•¨(ë‹¤í˜•ì„±)</li>
  <li><code class="language-plaintext highlighter-rouge">public interface ControllerV1</code> â†’ responseì™€ requestë¥¼ ë°›ì•„ ì‘ë™í•˜ëŠ” <code class="language-plaintext highlighter-rouge">process</code> ë©”ì„œë“œë¥¼ í•„ìˆ˜ ë©”ì„œë“œë¡œ ì„¤ì • (<code class="language-plaintext highlighter-rouge">void process(HttpServletRequest request, HttpServletResponse response) throws ...</code>)</li>
  <li>ê·¸ë¦¬ê³  ì´ ControllerV1ì„ êµ¬í˜„í•œ FormController(Servlet), SaveController(Servlet), ListController(Servlet) ìƒì„±
    <ul>
      <li>ì´ë ‡ê²Œ ë˜ë©´ FrontControllerì—ì„œ ê° Controllerë¥¼ Controller V1ìœ¼ë¡œì¨ ì‚¬ìš© ê°€ëŠ¥ (ë‹¤í˜•ì„±)</li>
      <li>FormController(Servlet), SaveController(Servlet), ListController(Servlet) ëŠ” ControllerV1ì„ êµ¬í˜„(<code class="language-plaintext highlighter-rouge">implements ControllerV1</code>)í•œ ê²ƒë§Œ ë‹¤ë¥´ê³  ì´ì „ê³¼ ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì€ ë™ì¼</li>
    </ul>
  </li>
  <li>
    <p>FrontController</p>

    <p><img src="/images/posts/post-220504/Untitled 1.png" alt="" /></p>

    <ul>
      <li>ì–´ë–¤ ìš”ì²­ì´ ë“¤ì–´ì™€ë„ ê°€ì¥ ë¨¼ì € ì‹¤í–‰ë˜ëŠ” Controller, ê° URLì— ë§ëŠ” Controllerë¥¼ ControllerV1ì˜ êµ¬í˜„ì²´ë¡œì¨ í˜¸ì¶œí•˜ì—¬ ë¡œì§ ì‹¤í–‰</li>
      <li><code class="language-plaintext highlighter-rouge">public class FrontControllerServletV1 extends HttpServlet</code> â†’ <code class="language-plaintext highlighter-rouge">@WebServlet(name = "frontControllerServletV1", urlPatterns = "/front-controller/v1/*")</code> 
  â‡’ HttpServletì„ ìƒì†ë°›ìœ¼ë©´ì„œ Servletì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ì„¤ì •. URLì€ v1 í•˜ìœ„ url(<code class="language-plaintext highlighter-rouge">urlPatterns = "/front-controller/v1/*"</code>)ì€ ëª¨ë‘ ë°›ì•„ ì‹¤í–‰ë  ìˆ˜ ìˆë„ë¡ ì„¤ì •</li>
      <li><strong>FrontControllerì˜ ì—­í• </strong>
        <ol>
          <li>URL ë§¤í•‘ ì •ë³´ì—ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ ì¡°íšŒ
            <ul>
              <li><strong>URL ë§¤í•‘</strong> ì •ë³´ ì €ì¥ì†Œ : <code class="language-plaintext highlighter-rouge">private Map&lt;String, ControllerV1&gt; controllerV1Map = new HashMap&lt;&gt;();</code></li>
              <li>
                <p>default ìƒì„±ìë¥¼ í†µí•´ í•´ë‹¹ FrontServletì´ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆì— ë“±ë¡ ë  ë•Œ ê° Mapping ì •ë³´ê°€ ì €ì¥ ë  ìˆ˜ ìˆë„ë¡ ì„¤ì •</p>

                <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="nf">FrontControllerServletV1</span><span class="o">()</span> <span class="o">{</span>
  	  <span class="n">controllerV1Map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"front-controller/v1/members/new-form"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">MemberFormControllerV1</span><span class="o">());</span>
  	  <span class="n">controllerV1Map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"front-controller/v1/members/save"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">MemberSaveControllerV1</span><span class="o">());</span>
  	  <span class="n">controllerV1Map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"front-controller/v1/members/members"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">MemberListControllerV1</span><span class="o">());</span>
  <span class="o">}</span>
</code></pre></div>                </div>
              </li>
            </ul>
          </li>
          <li>ìš”ì²­ëœ URL ì •ë³´ë¥¼ ì–»ì–´ì™€ ê·¸ URLì— ë§ëŠ” Controllerë¥¼ ì¡°íšŒ ë° í˜¸ì¶œ â†’ <code class="language-plaintext highlighter-rouge">ControllerV1 controller = controllerV1Map.get(request.getRequestURI());</code> (ë‹¤í˜•ì„±ì´ ì‚¬ìš©ë˜ëŠ” ë¶€ë¶„! Interface)</li>
          <li>ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì—­í• ì— ë§ëŠ” ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì„ ìˆ˜í–‰í•˜ê³  JSP foward ì§„í–‰ â†’ <code class="language-plaintext highlighter-rouge">controller.process(request, response);</code></li>
        </ol>
      </li>
    </ul>
  </li>
</ul>

<h3 id="view-ë¶„ë¦¬---ver-2">View ë¶„ë¦¬ - ver 2</h3>

<p><img src="/images/posts/post-220504/Untitled 2.png" alt="" /></p>

<ul>
  <li>ëª¨ë“  Controllerì—ì„œ Viewë¡œ ì´ë™í•˜ëŠ” ë¶€ë¶„ì— ì¤‘ë³µ ì¡´ì¬, ê¹”ë”í•˜ì§€ ì•Šì•˜ìŒ (<code class="language-plaintext highlighter-rouge">dispatcher.forward(requset, response)</code> ë¶€ë¶„)</li>
  <li>ì´ë¥¼ ë³„ë„ë¡œ ì²˜ë¦¬í•˜ëŠ” ê°ì²´ë¥¼ í†µí•´ ê³µí†µ ì²˜ë¦¬ í•„ìš”</li>
  <li>ì¦‰, Controllerë¥¼ í˜¸ì¶œí•˜ê³  ê° Controllerì—ì„œ forwardê¹Œì§€ ì§„í–‰í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ, Viewì™€ ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆëŠ” <strong>MyView ê°ì²´</strong>ë¥¼ ë°˜í™˜í•˜ì—¬ Front Controllerì—ì„œ <strong>MyViewë¥¼ ì´ìš©í•˜ì—¬ rendering(forward)ê¹Œì§€ ì§„í–‰</strong></li>
  <li>MyView ê°ì²´ â†’ <code class="language-plaintext highlighter-rouge">public class MyView</code>
    <ul>
      <li>String ViewPath : view(jsp) ê²½ë¡œ</li>
      <li><code class="language-plaintext highlighter-rouge">public void render(HttpServletRequest request, HttpServletResponse response) throws â€¦</code> â†’ forward method, ê¸°ì¡´ì˜ ê° Controllerì—ì„œ ì§„í–‰í–ˆë˜ forwardë¥¼ ê³µí†µì ìœ¼ë¡œ MyViewì—ì„œ ì§„í–‰í•  ìˆ˜ ìˆìŒ (ê³µí†µ ì²˜ë¦¬)</li>
    </ul>
  </li>
  <li>ControllerV2 (interface) â†’ <code class="language-plaintext highlighter-rouge">public interface ControllerV2</code>
    <ul>
      <li>ì´ì „ê³¼ ë™ì¼í•˜ê²Œ ê° Controllerë¥¼ í˜¸ì¶œí•˜ê³  ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ Interface Controller ì„¤ì •. (ê° ControllerëŠ” í•´ë‹¹ Controller V2ë¥¼ êµ¬í˜„í•˜ëŠ” ê²ƒ)</li>
      <li>ì´ì „ê³¼ëŠ” ë‹¤ë¥´ê²Œ ê° ControllerëŠ” MyViewë¥¼ í†µí•´ ViewPath ì„¤ì • ë° forwardë¥¼ ì§„í–‰í•˜ê¸°ì— MyViewë¥¼ ë°˜í™˜í•´ ì¤˜ì•¼ í•¨. â†’ <code class="language-plaintext highlighter-rouge">MyView process(HttpServletRequest ...) throws ...</code></li>
    </ul>
  </li>
  <li>ControllerV2ë¥¼ êµ¬í˜„í•œ ê° Controllerë“¤ (Form, Save, List)
    <ul>
      <li>ì´ì „ ë²„ì „ê³¼ ë¡œì§ì€ ë™ì¼í•˜ê³  forward ë¶€ë¶„ ëŒ€ì‹  MyView ê°ì²´ì— ì›í•˜ëŠ” ê²½ë¡œë¥¼ ìƒì„±í•´ì„œ ë°˜í™˜ë§Œ í•´ì£¼ë©´ ë¨</li>
      <li>ì¦‰, ê° Controllerì—ì„œ forwardë¥¼ ì§„í–‰í•˜ì§€ ì•Šê³  FrontControllerë¡œ ë°˜í™˜ëœ MyViewê°ì²´ë¥¼ í†µí•´ forwardê°€ ì§„í–‰ë¨ (ê³µí†µ ì²˜ë¦¬)</li>
    </ul>
  </li>
  <li>FrontController
    <ul>
      <li>
        <p>ì´ì „ê³¼ ë™ì¼í•œ íë¦„ìœ¼ë¡œ ê°€ì§€ë§Œ, controller í˜¸ì¶œ í›„ <strong>JSP forward ë¶€ë¶„ì´ í˜¸ì¶œ í›„ ë°˜í™˜ ëœ MyViewë¥¼ í†µí•´ ì§„í–‰</strong>ë¨.</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nc">MyView</span> <span class="n">view</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="na">process</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
  <span class="n">view</span><span class="o">.</span><span class="na">render</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p>ì¦‰, Front Controller ë„ì…ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">MyView</code> ê°ì²´ì˜ <code class="language-plaintext highlighter-rouge">render()</code> ë¥¼ í˜¸ì¶œí•˜ëŠ” ë¶€ë¶„ì„ ëª¨ë‘ ì¼ê´€ë˜ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŒ. ê°ê°ì˜ ControllerëŠ” <code class="language-plaintext highlighter-rouge">MyView</code> ê°ì²´ë¥¼ ìƒì„±ë§Œ í•´ì„œ ë°˜í™˜í•´ì£¼ë©´ ë¨</p>
      </li>
    </ul>
  </li>
</ul>

<h3 id="model-ì¶”ê°€---ver-3">Model ì¶”ê°€ - ver 3</h3>

<ul>
  <li>ver 2 ê¹Œì§€ ë³´ë©´, HttpServletRequest, HttpServletResponseê°€ í•„ìš” ì—†ëŠ” Controllerê°€ ì¡´ì¬. ì¦‰, <strong>Servletì˜ ì˜ì¡´ì„±</strong>ì„ ë²—ì–´ë‚  í•„ìš”ê°€ ìˆìŒ</li>
  <li>requestê°€ í•„ìš”í•œ ê³³ì€ ë”°ë¡œ Java Mapì„ ì´ìš©í•´ì„œ ë„˜ê²¨ì£¼ë©´ ë¨. â†’ Servletì˜ ì˜ì¡´ì„±ì„ ë²—ì–´ë‚  ìˆ˜ ìˆìŒ</li>
  <li>ë˜í•œ ViewPath ì´ë¦„ì—ì„œ <strong>ë…¼ë¦¬ ì´ë¦„</strong>ë§Œì„ ë°˜í™˜ ë°›ë„ë¡ ì„¤ì • í•„ìš” â†’ ì¤‘ë³µë˜ëŠ” ê²½ë¡œì™€ íŒŒì¼ í™•ì¥ëª…ì„ ê³µí†µì²˜ë¦¬ í•´ì¤„ í•„ìš” ìˆìŒ (ì¶”ê°€ë¡œ, ê²½ë¡œë¥¼ ë³€ê²½í•  ë•Œ ê³µí†µ ì²˜ë¦¬ë¶€ë¶„ì—ì„œë§Œ ë³€ê²½í•´ì£¼ë©´ ë¨)</li>
</ul>

<p><img src="/images/posts/post-220504/Untitled 3.png" alt="" /></p>

<ul>
  <li>MyView ê°ì²´ì—ì„œ Modelì´ ì¶”ê°€ëœ ModelViewë¥¼ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ Servletì˜ ì˜ì¡´ì„±ì—ì„œ ë²—ì–´ë‚˜ê³ , viewResolverë¥¼ í†µí•´ Controllerì—ì„œëŠ” ë…¼ë¦¬ì´ë¦„ë§Œ ì‚¬ìš©í•˜ë„ë¡ ì„¤ì •</li>
  <li>ModelView â†’ <code class="language-plaintext highlighter-rouge">public class ModelView</code>
    <ul>
      <li>String viewName : view pathë¥¼ ì €ì¥ (ë…¼ë¦¬ ì´ë¦„ë§Œì„ ì €ì¥, ì¶”í›„ viewResolver ì‚¬ìš©)</li>
      <li>Map&lt;String, Object&gt; model : renderingí•  ë–„ ì‚¬ìš© ë˜ëŠ” ë³€ìˆ˜ë“¤ ì €ì¥ ( requestë¥¼ ë°›ì§€ ì•Šê¸° ë•Œë¬¸ì— request.setAttribute ëŒ€ì‹  ì‚¬ìš©. )</li>
    </ul>
  </li>
  <li>ControllerV3 (interface) â†’ <code class="language-plaintext highlighter-rouge">public interface ControllerV3</code>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">ModelView process(Map&lt;String, String&gt; paramMap);</code> : request, responseë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ ë¨ (request â†’ Modelë¡œ ëŒ€ì²´, responseëŠ” Viewë¡œ ëŒ€ì²´. ì¦‰, Servletì„ ModelViewë¡œ ëŒ€ì²´í•¨ìœ¼ë¡œì¨ Servlet ì˜ì¡´ì„± ì œê±°)</li>
    </ul>
  </li>
  <li>ControllerV3 (interface)ë¥¼ êµ¬í˜„í•˜ëŠ” ê° Controllerë“¤
    <ul>
      <li>ì´ì „ ë²„ì „ê³¼ ì—­ì‹œ ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì€ ë™ì¼. but ViewPathë¥¼ ì €ì¥í•  ë•ŒëŠ” ë…¼ë¦¬ì´ë¦„ìœ¼ë¡œ,  Saveì™€ List ë“± reqeust.getParamì´ ì‚¬ìš©ë˜ëŠ” ë¶€ë¶„ì€ ë„˜ê²¨ ë°›ì€ paramMapì„ í†µí•´ ì²˜ë¦¬(get) â†’ (requestë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ì„œ Servletì˜ ì˜ì¡´ì„± ì œê±°), request.setParamì´ ì‚¬ìš©ë˜ëŠ” ë¶€ë¶„ì€ ModelViewì˜ Modelì„ ì´ìš©. (Modelì— ì €ì¥í•˜ì—¬ front controllerì— ë°˜í™˜)</li>
    </ul>
  </li>
  <li>FrontController
    <ul>
      <li>ì´ì „ê³¼ ë‹¤ë¥´ê²Œ controllerì— request,responseê°€ ì‚¬ìš©ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ frontController ì•ˆì—ì„œ requestì—ì„œ ë„˜ê²¨ì˜¤ëŠ” ê°’ë“¤ì„ ë”°ë¡œ ì¡°íšŒí•˜ì—¬ <strong>paramMap</strong>ì— ì €ì¥í•œ í›„ ì´ë¥¼ ê° controllerì— ë³´ë‚´ê³  ìˆìŒ</li>
      <li>ë˜í•œ, ê° controllerëŠ” Model ê³¼ Viewì˜ ì •ë³´ë¥¼ ë‹´ì€ <strong>ModelView</strong> ê°ì²´ë¥¼ ë°˜í™˜. ê²°êµ­ frontControllerëŠ” ì´ë¥¼ ë°›ì•„ ì•ì„  ë¡œì§ê³¼ ë™ì¼í•˜ê²Œ ì²˜ë¦¬í•´ ì¤˜ì•¼ ë¨.</li>
      <li>ì¶”ê°€ë¡œ, ModelViewì˜ viewPathëŠ” ë…¼ë¦¬ì´ë¦„ìœ¼ë¡œë§Œ ì €ì¥í•˜ê³  ìˆê¸°ì— ì´ë¥¼ ë”°ë¡œ ì²˜ë¦¬í•´ì¤„ <strong>viewResolver</strong> í•„ìš”</li>
      <li>
        <p>front controllerì˜ ì²˜ë¦¬ ë¡œì§</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">paramMap</span> <span class="o">=</span> <span class="n">createParamMap</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
  <span class="nc">ModelView</span> <span class="n">mv</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="na">process</span><span class="o">(</span><span class="n">paramMap</span><span class="o">);</span>
  <span class="nc">String</span> <span class="n">viewName</span> <span class="o">=</span> <span class="n">mv</span><span class="o">.</span><span class="na">getViewName</span><span class="o">();</span> <span class="c1">// ë…¼ë¦¬ ì´ë¦„ (ex. new-form)</span>
  <span class="nc">MyView</span> <span class="n">view</span> <span class="o">=</span> <span class="n">viewResolver</span><span class="o">(</span><span class="n">viewName</span><span class="o">);</span>
  <span class="n">view</span><span class="o">.</span><span class="na">render</span><span class="o">(</span><span class="n">mv</span><span class="o">.</span><span class="na">getModel</span><span class="o">(),</span> <span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span> 
</code></pre></div>        </div>
      </li>
      <li>
        <p>paramMapì„ ìƒì„±í•˜ëŠ” createParamMap() method</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">private</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="nf">createParamMap</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
      <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">paramMap</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;();</span>
      <span class="n">request</span><span class="o">.</span><span class="na">getParameterNames</span><span class="o">().</span><span class="na">asIterator</span><span class="o">()</span>
              <span class="o">.</span><span class="na">forEachRemaining</span><span class="o">(</span><span class="n">paramName</span> <span class="o">-&gt;</span> <span class="n">paramMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">paramName</span><span class="o">,</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="n">paramName</span><span class="o">)));</span>
      <span class="k">return</span> <span class="n">paramMap</span><span class="o">;</span>
  <span class="o">}</span>
</code></pre></div>        </div>

        <ul>
          <li>requestì—ì„œ ë“¤ì–´ì˜¨ ëª¨ë“  íŒŒë¼ë¯¸í„° ê°’ë“¤ì„ paramMapì— ì €ì¥</li>
          <li>ê° controllerëŠ” ì´ë¥¼ ì´ìš©í•˜ì—¬ request ì—†ì´ parameter ì‚¬ìš© ê°€ëŠ¥</li>
        </ul>
      </li>
      <li>
        <p>ë…¼ë¦¬ view pathë¥¼ ë¬¼ë¦¬ viewpathë¡œ ë³€ê²½í•´ì£¼ëŠ” viewResolver</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">private</span> <span class="nc">MyView</span> <span class="nf">viewResolver</span><span class="o">(</span><span class="nc">String</span> <span class="n">viewName</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="k">new</span> <span class="nf">MyView</span><span class="o">(</span><span class="s">"/WEB-INF/views/"</span> <span class="o">+</span> <span class="n">viewName</span> <span class="o">+</span> <span class="s">".jsp"</span><span class="o">);</span>
  <span class="o">}</span>
</code></pre></div>        </div>

        <ul>
          <li>ê° ControllerëŠ” viewResolver ë•ë¶„ì— ì¤‘ë³µë˜ê³  ê¸¸ì—ˆë˜ ë¬¼ë¦¬ì´ë¦„ë§ê³  ê°„ë‹¨í•œ ë…¼ë¦¬ì´ë¦„ë§Œ ModelView ê°ì²´ì— ì €ì¥í•´ì£¼ë©´ ë¨</li>
        </ul>
      </li>
      <li>
        <p>forward ì‹œ ì‚¬ìš©ë  ê°’ë“¤ì„ ë„£ì–´ì£¼ë©° ë™ì‘í•˜ëŠ” <code class="language-plaintext highlighter-rouge">view.render()</code></p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">render</span><span class="o">(</span><span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">model</span><span class="o">,</span> <span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span> <span class="o">{</span>
      <span class="n">model</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="nl">request:</span><span class="o">:</span><span class="n">setAttribute</span><span class="o">);</span> <span class="c1">// ê¸°ì¡´ì—ëŠ” ê°ê°ì˜ controller ì•ˆì—ì„œ request setAttributeë¥¼ í†µí•´ ì„¤ì •í•¨. but V3ì—ì„œëŠ” ê°ê°ì˜ controllerê°€ servletì— ì˜ì¡´í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— renderì—ì„œ ë°›ì•„ì˜¨ paramMapì„ í†µí•´ setAttribute ì‹¤ì‹œ</span>
      <span class="nc">RequestDispatcher</span> <span class="n">dispatcher</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="n">viewPath</span><span class="o">);</span> <span class="c1">// í•´ë‹¹ viewPathë¡œ ì´ë™í•˜ëŠ” ì—­í• </span>
      <span class="n">dispatcher</span><span class="o">.</span><span class="na">forward</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span> <span class="c1">//ì‘ë™. ì„œë¸”ë¦¿ì—ì„œ jspë¥¼ í˜¸ì¶œí•˜ëŠ” ê¸°ëŠ¥, ì„œë²„ ë‚´ë¶€ì—ì„œ ë‹¤ì‹œ í˜¸ì¶œ ë°œìƒ (redirectê°€ ì•„ë‹˜! ë©”ì„œë“œ í˜¸ì¶œí•˜ë“¯ì´ ì„œë²„ë¼ë¦¬ ë…¸ëŠ” ê²ƒ!)</span>
  <span class="o">}</span>
</code></pre></div>        </div>

        <ul>
          <li>ModelViewì˜ Modelì˜ ê°’ë“¤ì„ requestì— ë„£ì–´ì¤Œìœ¼ë¡œì¨ forward ì‹œ í•´ë‹¹ ê°’ì„ JSPì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ì„¤ì • (JSP íŠ¹ì„± ìƒ í•´ì£¼ëŠ” ë¶€ë¶„)</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h3 id="ë‹¨ìˆœí•˜ê³ -ì‹¤ìš©ì ì¸-ì»¨íŠ¸ë¡¤ëŸ¬---ver-4">ë‹¨ìˆœí•˜ê³  ì‹¤ìš©ì ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ - ver 4</h3>

<ul>
  <li>ver 3 ëŠ” ì•„í‚¤í…ì³ êµ¬ì¡°ì ìœ¼ë¡œëŠ” ì¢‹ìŒ. but ê°œë°œí•˜ëŠ” ê°œë°œìê°€ ë‹¨ìˆœí•˜ê³  í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ê°€ ì—†ìŒ. ì¦‰, ì‹¤ìš©ì„±ì´ ì—†ìŒ</li>
</ul>

<p><img src="/images/posts/post-220504/Untitled 4.png" alt="" /></p>

<ul>
  <li>ê¸°ë³¸ì ì¸ êµ¬ì¡°ëŠ” v3ì™€ ë™ì¼. but Controllerê°€ ModelViewë¥¼ ë°˜í™˜í•˜ì§€ ì•Šê³ , ViewNameë§Œì„ ë°˜í™˜ â†’ ì‹¤ìš©ì„± UP</li>
  <li>ControllerV4 (interface) â†’ <code class="language-plaintext highlighter-rouge">public interface ControllerV4</code>
    <ul>
      <li>ModeViewë¥¼ ë°˜í™˜í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ String (viewName)ì„ ë°˜í™˜ â†’ <code class="language-plaintext highlighter-rouge">String process(</code><code class="language-plaintext highlighter-rouge">Map&lt;String, String&gt; paramMap, Map&lt;String, Object&gt; model)</code>  â†’ ì—¬ê¸°ì„œì˜ modelì€ frontControllerì—ì„œ ì„¤ì •í•´ì„œ ì¸ìë¡œ ë„˜ê²¨ì£¼ëŠ” ê²ƒ, ê° ControllerëŠ” ë°›ì•„ì˜¨ ì´ modelì— ê°’ì„ ì €ì¥í•´ì£¼ë©´ ë¨. (ì¦‰, ModelView ê°ì²´ë¥¼ ì‚¬ìš©í•  í•„ìš”ê°€ ì—†ì–´ì§)</li>
    </ul>
  </li>
  <li>ControllerV4 (interface)ë¥¼ êµ¬í˜„í•œ ê° Controller ë“¤
    <ul>
      <li>
        <p>ê¸°ì¡´ì—ëŠ” ModelViewë¥¼ ìƒì„±í•´ì„œ view nameì„ ë„£ì–´ì£¼ê³ , ModelViewì˜ modelì— ê°’ë“¤ì„ ì €ì¥ â†’ ê·¸ëƒ¥ ë°›ì•„ ì˜¨ ì¸ì <strong>modelì— ê°’ì„ ë„£ì–´ì£¼ê³  view nameì„ ë°˜í™˜</strong>í•´ì£¼ë©´ ë¨</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">// ex) save controllerì˜ process</span>
  <span class="n">model</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"member"</span><span class="o">,</span> <span class="n">member</span><span class="o">);</span>
  <span class="k">return</span> <span class="s">"save-result"</span><span class="o">;</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>FrontController
    <ul>
      <li>
        <p>viewNameì€ ê° Controllerì˜ ë°˜í™˜ê°’ìœ¼ë¡œ ë°›ì•„ ì˜¤ê³  modelì€ í˜„ì¬ frontControllerì—ì„œ ì´ˆê¸°í™” í•´ì¤€ í›„ ê° Controllerë¡œ ë„˜ê²¨ ê°’ì„ ë°›ì•„ ì˜¤ë©´ ë¨</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">paramMap</span> <span class="o">=</span> <span class="n">createParamMap</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
  <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">model</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;();</span> <span class="c1">// model ìƒì„±</span>
        
  <span class="nc">String</span> <span class="n">viewName</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="na">process</span><span class="o">(</span><span class="n">paramMap</span><span class="o">,</span> <span class="n">model</span><span class="o">);</span> <span class="c1">// controller ìì²´ì—ì„œ viewname ë°˜í™˜</span>
  <span class="nc">MyView</span> <span class="n">view</span> <span class="o">=</span> <span class="n">voewResolver</span><span class="o">(</span><span class="n">viewName</span><span class="o">);</span>
        
  <span class="n">view</span><span class="o">.</span><span class="na">render</span><span class="o">(</span><span class="n">model</span><span class="o">,</span> <span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span> <span class="c1">// controller ë‚´ë¶€ì˜ model ì‚¬ìš©</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p>í•˜ì§€ë§Œ V4ì˜ ë‹¨ì ì€. ConrollerV4ì—ë§Œ í•œì •ë˜ì–´ ìˆìŒ. ì¦‰, ë‚´ê°€ ì–´ë–¤ urlì— ëŒ€í•´ì„œ V3ë¥¼ ì“°ê³  ì‹¶ì€ë° í˜„ì¬ëŠ” V4ë¡œë§Œ ê³ ì •ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— <strong>ìœ ì—°í•˜ê²Œ ì‚¬ìš©í•˜ì§€ ëª»í•¨</strong> â†’ <strong>Handler ê°œë…</strong> ë„ì…!</p>
      </li>
    </ul>
  </li>
</ul>

<h3 id="ìœ ì—°í•œ-ì»¨íŠ¸ë¡¤ëŸ¬---v5">ìœ ì—°í•œ ì»¨íŠ¸ë¡¤ëŸ¬ - v5</h3>

<aside>
ğŸ’¡ <strong>í˜„ì¬ Spring Bootì™€ ê°€ì¥ ìœ ì‚¬í•œ êµ¬ì¡°ë¥¼ ë³´ì´ê³  ì‡ëŠ” ë²„ì „</strong>

</aside>

<ul>
  <li>ControllerV3ì™€ ControllerV4ë¥¼ ìœ ì—°í•˜ê²Œ ë³€ê²½í•˜ë©° ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡</li>
  <li>ì–´ëŒ‘í„° íŒ¨í„´
    <ul>
      <li>ì§€ê¸ˆê¹Œì§€ëŠ” í•œê°€ì§€ ë°©ì‹ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ ì¸í„°í˜ì´ìŠ¤ë§Œ ì‚¬ìš© ê°€ëŠ¥ í–ˆìŒ</li>
      <li>but, <strong>ì—¬ëŸ¬ê°€ì§€ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ ì¸í„°í˜ì´ìŠ¤</strong>ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ì•¼ í•¨</li>
      <li>ë”°ë¼ì„œ ì´ë ‡ê²Œ ì—¬ëŸ¬ê°€ì§€ê°€ í˜¸í™œë  ìˆ˜ ìˆë„ë¡ <strong>ì–´ëŒ‘í„° íŒ¨í„´</strong>ì„ ì ìš©í•´ì•¼ ë¨</li>
    </ul>

    <p><img src="/images/posts/post-220504/Untitled 5.png" alt="" /></p>

    <ul>
      <li>í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ëª©ë¡ì„ í†µí•´ í˜„ì¬ ìš”ì²­ì´ ë“¤ì–´ì˜¨ controllerë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ì–´ëŒ‘í„°ë¥¼ ì¡°íšŒ</li>
      <li>ê·¸ë˜ì„œ í•´ë‹¹ ìš”ì²­ì— ëŒ€í•œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í˜¸ì¶œí•  ë•Œ, ì§ì ‘ í˜¸ì¶œí•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì´ë¥¼ <strong>í˜¸í™˜í•´ì£¼ëŠ” í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë¥¼ í†µí•´ í˜¸ì¶œ</strong></li>
    </ul>
  </li>
  <li><strong>Handler Adaptor (interface)</strong> â†’ <code class="language-plaintext highlighter-rouge">public interface MyHandlerAdapter</code>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">boolean supports(Object handler);</code>
        <ul>
          <li>ìš”ì²­ì— ë”°ë¥¸ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë‹¤ë£° ìˆ˜ ìˆëŠ”ì§€, ì¦‰, í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì‚¬ìš©í•˜ê²Œë” í•˜ëŠ” ì–´ëŒ‘í„°ê°€ ìˆëŠ”ì§€ í™•ì¸</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">ModelView handle(HttpServletRequest request, HttpServletResponse response, Object handler) throws ServletException, IOException;</code>
        <ul>
          <li>ì‹¤ì œ ì–´ëŒ‘í„°ì˜ ì—­í• ì„ í•˜ëŠ” ë©”ì„œë“œ.</li>
          <li>ì‹¤ì œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í˜¸ì¶œí•˜ê³ , ê·¸ ê²°ê³¼ë¡œ ModelViewë¥¼ ë°˜í™˜</li>
          <li>ì´ì „ê³¼ ë‹¤ë¥´ê²Œ ì§ì ‘ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì´ ì•„ë‹Œ, <strong>ì–´ëŒ‘í„°ë¥¼ í†µí•´ í˜¸ì¶œ</strong></li>
        </ul>
      </li>
      <li>ì¦‰, Front Controllerì—ì„œ ìš”ì²­ì„ ë°›ìœ¼ë©´, ê·¸ ìš”ì²­ì— ë§ëŠ” Controllerë¥¼ ì°¾ê³  í•´ë‹¹ Controllerë¥¼ ì§€ì›í•˜ëŠ” ì§€ Handler Adaptorë¥¼ í†µí•´ í™•ì¸(<code class="language-plaintext highlighter-rouge">supports</code>). ë§Œì•½ ì§€ì›í•œë‹¤ë©´ ê·¸ í•´ë‹¹ Adaptorë¥¼ í†µí•´ Controllerì— ì ‘ê·¼(ì¡°íšŒ)í•˜ì—¬ ë¡œì§ì„ ìˆ˜í–‰í•˜ê³  ModelViewë¥¼ ë°˜í™˜í•˜ëŠ” ê²ƒ (<code class="language-plaintext highlighter-rouge">handle</code>)</li>
    </ul>
  </li>
  <li>ControllerV3ë¥¼ ì§€ì›í•˜ëŠ” Handler â†’ <code class="language-plaintext highlighter-rouge">public class ControllerV3HandlerAdapter implements MyHandlerAdapter</code>
    <ul>
      <li><strong>supports</strong>
        <ul>
          <li>front controllerì—ì„œ ë°›ì•„ì˜¨ handler(ìš”ì²­ëœ controller)ê°€ ControllerV3ì´ë©´ true</li>
        </ul>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">supports</span><span class="o">(</span><span class="nc">Object</span> <span class="n">handler</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="o">(</span><span class="n">handler</span> <span class="k">instanceof</span> <span class="nc">ControllerV3</span><span class="o">);</span>
  <span class="o">}</span>
</code></pre></div>        </div>
      </li>
      <li><strong>handler</strong>
        <ul>
          <li>ControllerV3ì— ë§ëŠ” ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ ìˆ˜í–‰</li>
          <li>frontControllerì—ì„œ supportsë¡œ V3ì¸ì§€ í™•ì¸ í›„ ê°€ë™ëœë‹¤ê³  ìƒê°í•˜ë©´ ë¨, ê·¸ë˜ì„œ ë°”ë¡œ cascade í•˜ëŠ” ê²ƒ</li>
        </ul>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="nc">ModelView</span> <span class="nf">handle</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span> <span class="nc">Object</span> <span class="n">handler</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span> <span class="o">{</span>
  	  <span class="nc">ControllerV3</span> <span class="n">controller</span> <span class="o">=</span> <span class="o">(</span><span class="nc">ControllerV3</span><span class="o">)</span> <span class="n">handler</span><span class="o">;</span> 
  	  <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">paramMap</span> <span class="o">=</span> <span class="n">createParamMap</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
  	  <span class="nc">ModelView</span> <span class="n">mv</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="na">process</span><span class="o">(</span><span class="n">paramMap</span><span class="o">);</span>
  	  <span class="k">return</span> <span class="n">mv</span><span class="o">;</span>
  <span class="o">}</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>ControllerV4ë¥¼ ì§€ì›í•˜ëŠ” Handler â†’ <code class="language-plaintext highlighter-rouge">public class ControllerV4HandlerAdapter implements MyHandlerAdapter</code>
    <ul>
      <li><strong>supports</strong>
        <ul>
          <li>front controllerì—ì„œ ë°›ì•„ì˜¨ handler(ìš”ì²­ëœ controller)ê°€ ControllerV4ì´ë©´ true</li>
        </ul>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">supports</span><span class="o">(</span><span class="nc">Object</span> <span class="n">handler</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="o">(</span><span class="n">handler</span> <span class="k">instanceof</span> <span class="nc">ControllerV4</span><span class="o">);</span>
  <span class="o">}</span>
</code></pre></div>        </div>
      </li>
      <li><strong>handler</strong>
        <ul>
          <li>ControllerV4ì— ë§ëŠ” ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ ìˆ˜í–‰</li>
          <li>frontControllerì—ì„œ supportsë¡œ V4ì¸ì§€ í™•ì¸ í›„ ê°€ë™ëœë‹¤ê³  ìƒê°í•˜ë©´ ë¨, ê·¸ë˜ì„œ ë°”ë¡œ cascade í•˜ëŠ” ê²ƒ</li>
        </ul>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="nc">ModelView</span> <span class="nf">handle</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span> <span class="nc">Object</span> <span class="n">handler</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span> <span class="o">{</span>
      <span class="nc">ControllerV4</span> <span class="n">controller</span> <span class="o">=</span> <span class="o">(</span><span class="nc">ControllerV4</span><span class="o">)</span> <span class="n">handler</span><span class="o">;</span>
      <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">paramMap</span> <span class="o">=</span> <span class="n">createParamMap</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
      <span class="nc">HashMap</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">model</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;();</span>
        
  		<span class="c1">// adaptorê°€ í•„ìš”í•œ ì´ìœ  (controllerì˜ ë°˜í™˜ê°’ì´ ë²„ì „ë§ˆë‹¤ ë‹¤ë¦„)</span>
      <span class="nc">String</span> <span class="n">viewName</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="na">process</span><span class="o">(</span><span class="n">paramMap</span><span class="o">,</span><span class="n">model</span><span class="o">);</span>
      <span class="n">mv</span><span class="o">.</span><span class="na">setModel</span><span class="o">(</span><span class="n">model</span><span class="o">);</span> <span class="c1">// ì—¬ê¸°ì„œ ì²˜ë¦¬í•´ì£¼ë©´ ë¨ -&gt; adpatorì˜ ì—­í• </span>
        		
      <span class="k">return</span> <span class="n">mv</span><span class="o">;</span>
  <span class="o">}</span>
</code></pre></div>        </div>

        <aside>
  ğŸ’¡  <strong> adaptorê°€ ê¼­ í•„ìš”í•œ ì´ìœ  : V4 ì™€ V3ì˜ ìŠ¤í™ì´ ë‹¤ë¥´ë©´ì„œ ìƒê¸°ëŠ” ë¬¸ì œ -&gt; adaptorë¡œ í•´ê²° ê°€ëŠ¥ </strong><br />
  <ul>
  <li>V3ëŠ” model ê³¼ view ì •ë³´ë¥¼ ë‹´ëŠ” ModelView ê°ì²´ë¥¼ ì‚¬ìš©</li>
  <li>V4ëŠ” front controllerì—ì„œ model, view ì •ë³´ settingì„ ë‹¤í•¨ â†’ V4ëŠ” ModelViewë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê¸° ë•Œë¬¸ (`ModelView mv = new ModelView(viewName);`)</li>
  </ul>
  </aside>
      </li>
    </ul>
  </li>
  <li>FrontController
    <ul>
      <li>
        <p>Mapping Info ì´ˆê¸°í™”</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="nf">FrontControllerServletV5</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">initHandlerMappingMap</span><span class="o">();</span>
      <span class="n">initHandlerAdapters</span><span class="o">();</span>
  <span class="o">}</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p>ì´ì „ê³¼ ë‹¤ë¥´ê²Œ Controller Mapping Mapì— ControllerV4 ë¿ë§Œ ì•„ë‹ˆë¼ ControllerV3ê¹Œì§€ mappingì´ ê°€ëŠ¥í•´ì•¼ ë¨ (ControllverV4 â†’ Object) â†’ <code class="language-plaintext highlighter-rouge">private final Map&lt;String, Object&gt; handlerMappingMap = new HashMap&lt;&gt;();</code> , v3,v4 ë§¤í•‘ ì •ë³´ë¥¼ ë„£ì–´ì¤Œ ()</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">private</span> <span class="kt">void</span> <span class="nf">initHandlerMappingMap</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">handlerMappingMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"front-controller/v5/v3/members/new-form"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">MemberFormControllerV3</span><span class="o">());</span>
      <span class="n">handlerMappingMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"front-controller/v5/v3/members/save"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">MemberSaveControllerV3</span><span class="o">());</span>
      <span class="n">handlerMappingMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"front-controller/v5/v3/members/members"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">MemberListControllerV3</span><span class="o">());</span>
        
      <span class="c1">// V4 ì¶”ê°€</span>
      <span class="n">handlerMappingMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"front-controller/v5/v4/members/new-form"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">MemberFormControllerV4</span><span class="o">());</span>
      <span class="n">handlerMappingMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"front-controller/v5/v4/members/save"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">MemberSaveControllerV4</span><span class="o">());</span>
      <span class="n">handlerMappingMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"front-controller/v5/v4/members/members"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">MemberListControllerV4</span><span class="o">());</span>
  <span class="o">}</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p>ë˜í•œ ì–´ëŒ‘í„°ë“¤ì— ëŒ€í•œ ì •ë³´ë“¤ì„ ë„£ì–´ì¤˜ì•¼ í•¨. (ControllerV3, ControllerV4 ë¥¼ ì§€ì›í•˜ëŠ” adapterë“¤ì˜ ì •ë³´ë¥¼ Listë¡œ ì €ì¥) â†’  <code class="language-plaintext highlighter-rouge">private final List&lt;MyHandlerAdapter&gt; handlerAdapters = new ArrayList&lt;&gt;();</code></p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">private</span> <span class="kt">void</span> <span class="nf">initHandlerAdapters</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">handlerAdapters</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">ControllerV3HandlerAdapter</span><span class="o">());</span>
      <span class="n">handlerAdapters</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">ControllerV4HandlerAdapter</span><span class="o">());</span>
  <span class="o">}</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p><strong>service</strong></p>
        <ul>
          <li>
            <p>ìš”ì²­ëœ URLì— ë§ëŠ” Controller(Handler) ì¡°íšŒ (Mapping ëœ Map ì´ìš©)</p>

            <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nc">String</span> <span class="n">requestURI</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getRequestURI</span><span class="o">();</span> <span class="c1">// ìš”ì²­ëœ URLì˜ ì •ë³´ë¥¼ ì–»ì–´ ì˜¬ ìˆ˜ ìˆìŒ</span>
  <span class="k">return</span> <span class="n">handlerMappingMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">requestURI</span><span class="o">);</span> <span class="c1">// ìš”ì²­ëœ URLì— ë”°ë¥¸ Controller ì‚¬ìš©. (ì´ ë¶€ë¶„ ë•Œë¬¸ì— Interfaceë¥¼ ì‚¬ìš©í•œ ê²ƒ -&gt; ë‹¤í˜•ì„±)</span>
</code></pre></div>            </div>
          </li>
          <li>
            <p>í•´ë‹¹ Controller(handler)ë¥¼ ì§€ì›í•˜ëŠ” Adaptor ì¡°íšŒ (Adaptor ëª©ë¡ì„ ëŒë¦¬ë©´ì„œ supportë¥¼ í†µí•´ ì§€ì› ì—¬ë¶€ í™•ì¸)</p>

            <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">for</span> <span class="o">(</span><span class="nc">MyHandlerAdapter</span> <span class="n">adapter</span> <span class="o">:</span> <span class="n">handlerAdapters</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">adapter</span><span class="o">.</span><span class="na">supports</span><span class="o">(</span><span class="n">handler</span><span class="o">))</span> <span class="o">{</span>
          <span class="k">return</span> <span class="n">adapter</span><span class="o">;</span>
      <span class="o">}</span>
  <span class="o">}</span>
</code></pre></div>            </div>
          </li>
          <li>
            <p>ì§€ì› ê°€ëŠ¥í•œ Adaptorë¥¼ í†µí•´ ìš”ì²­ëœ Controller(handler) ì¡°íšŒ ë° ë¡œì§ ìˆ˜í–‰ í›„ ModelView ë°˜í™˜, í•´ë‹¹ ModelViewì˜ ì •ë³´ë¥¼ í†µí•´ view forward ìˆ˜í–‰</p>

            <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nc">ModelView</span> <span class="n">mv</span> <span class="o">=</span> <span class="n">adapter</span><span class="o">.</span><span class="na">handle</span><span class="o">(</span><span class="n">request</span><span class="o">,</span><span class="n">response</span><span class="o">,</span><span class="n">handler</span><span class="o">);</span>
  <span class="nc">String</span> <span class="n">viewName</span> <span class="o">=</span> <span class="n">mv</span><span class="o">.</span><span class="na">getViewName</span><span class="o">();</span> <span class="c1">// ë…¼ë¦¬ ì´ë¦„ (ex. new-form)</span>
  <span class="nc">MyView</span> <span class="n">view</span> <span class="o">=</span> <span class="n">viewResolver</span><span class="o">(</span><span class="n">viewName</span><span class="o">);</span>
            
  <span class="n">view</span><span class="o">.</span><span class="na">render</span><span class="o">(</span><span class="n">mv</span><span class="o">.</span><span class="na">getModel</span><span class="o">(),</span> <span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
</code></pre></div>            </div>
          </li>
        </ul>
      </li>
    </ul>

    <aside>
  ğŸ’¡ <strong> V3ì—ì„œ V4ê¹Œì§€ ì§€ì›í•˜ê²Œ ë” í™•ì¥í•  ë•Œ, main ì½”ë“œë¥¼ ê±°ì˜ ê±´ë“¤ì´ì§€ ì•Šê³ , init ë¶€ë¶„ì— í•´ë‹¹ ë²„ì „ì— ëŒ€í•œ ì •ë³´ë“¤(Mapping)ë§Œ ë„£ì–´ì¤Œ â†’ OCPë¥¼ ì§€í‚¬ ìˆ˜ ìˆìŒ! </strong>
    
  </aside>

    <aside>
  ğŸ’¡ <strong>ì´ êµ¬ì¡°ê°€ ê²°êµ­ Spring MVCì—ì„œ êµ¬ì¶•ëœ êµ¬ì¡°!!! Spring MVCëŠ” ì´ êµ¬ì¡°ë¥¼ Annotation ê¸°ë°˜ìœ¼ë¡œ í›¨ì”¬ ë” ì‰½ê²Œ ì´ìš©í•  ìˆ˜ ìˆê²Œ ì„¤ì •í•´ ë‘ </strong>
    
  </aside>
  </li>
</ul>
:ET