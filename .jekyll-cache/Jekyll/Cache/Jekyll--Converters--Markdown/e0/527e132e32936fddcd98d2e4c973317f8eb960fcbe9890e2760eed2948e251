I"†7<h2 id="querydsl">Querydsl</h2>

<h3 id="querydsl-ì´ë€">Querydsl ì´ë€?</h3>

<ul>
  <li><strong>ì •ì  íƒ€ì…</strong>ì„ ì´ìš©í•´ì„œ SQLê³¼ ê°™ì€ ì¿¼ë¦¬ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” í”„ë ˆì„ì›Œí¬</li>
  <li>JPAë‚˜ Spring Data JPAì™€ ê°™ì´ ë¬¸ìì—´ë¡œ JPQLì„ ì‘ì„±í•˜ëŠ” ê²ƒê³¼ëŠ” ë‹¤ë¥´ê²Œ <strong>ìë°”ì½”ë“œë¡œì¨ SQL ì¿¼ë¦¬ë¥¼ ì‘ì„±</strong>í•  ìˆ˜ ìˆëŠ” ê²ƒ</li>
  <li>ì¦‰, SQL, JPQLì„ ìë°” ì½”ë“œë¡œ ì‘ì„±í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” <strong>ì˜¤í”ˆì†ŒìŠ¤ ë¹Œë” API</strong></li>
  <li>ì¥ì 
    <ul>
      <li><strong>ì¿¼ë¦¬ë¥¼ ìë°” ì½”ë“œë¡œ ì‘ì„±</strong> ê°€ëŠ¥ (+ ì‰¬ìš´ SQL ìŠ¤íƒ€ì¼ ë¬¸ë²•, ì¬ì‚¬ìš© ê°€ëŠ¥)</li>
      <li>ê·¸ì— ë”°ë¼ ë¬¸ë²• ì˜¤ë¥˜ë¥¼ ì ‘ê·¼ ì‹œì ì´ ì•„ë‹Œ <strong>ì»´íŒŒì¼ ì‹œì ì— í™•ì¸ ê°€ëŠ¥</strong> (ìë°” ì½”ë“œë¡œ ì‘ì„±í•˜ê¸° ë•Œë¬¸! â†’ ìë°” ì»´íŒŒì¼ëŸ¬ê°€ ë¬¸ë²• ì˜¤ë¥˜ë¥¼ ì¡ì•„ì¤Œ!)
        <ul>
          <li>jpql ê°™ì€ ê²½ìš° sql queryë¥¼ ë¬¸ìì—´ë¡œ ì‘ì„±í•˜ê¸° ë•Œë¬¸ì— ì»´íŒŒì¼ ì‹œì ì— ì˜¤ë¥˜ë¥¼ ë°œê²¬í•  ìˆ˜ ì—†ìŒ! (ìŠ¤í”„ë§ ë°ì´í„° JPAì˜ <code class="language-plaintext highlighter-rouge">@Query</code>ëŠ” ê°€ëŠ¥)</li>
        </ul>
      </li>
      <li><strong>ë™ì  ì¿¼ë¦¬ ê°€ëŠ¥</strong></li>
    </ul>
  </li>
</ul>

<h3 id="ì‚¬ìš©í•´ì•¼-ë˜ëŠ”-ì´ìœ ">ì‚¬ìš©í•´ì•¼ ë˜ëŠ” ì´ìœ </h3>

<ul>
  <li>ìµœì‹  ìë°” ë°±ì—”ë“œ ê¸°ìˆ ì€ <strong>ìŠ¤í”„ë§ ë¶€íŠ¸ + JPA + ìŠ¤í”„ë§ ë°ì´í„° JPA</strong> ê¸°ìˆ ë“¤ì„ ì¡°í•©í•´ì„œ ì‚¬ìš©í•˜ëŠ” ì¶”ì„¸</li>
  <li>í•˜ì§€ë§Œ ì´ëŸ° ê¸°ìˆ ë“¤ë¡œëŠ” í•´ê²°í•˜ì§€ ëª»í•˜ëŠ” <strong>í•œê³„ì </strong> ì¡´ì¬ â†’ <strong>ë³µì¡í•œ ì¿¼ë¦¬, ë™ì  ì¿¼ë¦¬</strong> (ì‹¤ë¬´ì—ì„œ ë³µì¡í•œ ì¿¼ë¦¬ì™€ ë™ì  ì¿¼ë¦¬ëŠ” í•„ìˆ˜ì ìœ¼ë¡œ ì‚¬ìš©ë¨)</li>
  <li><strong>Querydsl</strong>ì„ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ <strong>ë³µì¡í•œ ì¿¼ë¦¬, ë™ì  ì¿¼ë¦¬ë¥¼ ìë°” ì½”ë“œë¡œ í•´ê²°</strong>í•´ ë‚¼ ìˆ˜ ìˆìŒ</li>
</ul>

<h3 id="querydsl-ì„¤ì •-ì¤‘ìš”">Querydsl ì„¤ì • [ì¤‘ìš”]</h3>

<ul>
  <li><strong>Querydsl</strong>ì€ ì„¤ì •ì´ ì¢€ ê¹Œë‹¤ë¡œìš°ë©° <strong>ë²„ì „ì— ë”°ë¼ ì„¤ì •ì´ ê³„ì† ë³€í•˜</strong>ì—¬ <strong>ë²„ì „ ì—…ë°ì´íŠ¸ ì‹œ í•­ìƒ ì„¤ì • ë¶€ë¶„ì— ìœ ì˜</strong>í•´ì•¼ ë¨
    <ol>
      <li><strong>Querydsl ì„¤ì • (for Querydsl 5.0.0)</strong></li>
    </ol>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">build.gradle</code> ì—ì„œ Querydslì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ <code class="language-plaintext highlighter-rouge">buildscript</code>, <code class="language-plaintext highlighter-rouge">plugins</code>, <code class="language-plaintext highlighter-rouge">dependencies</code>, <strong>+ë³„ë„ì˜ ì„¸íŒ…</strong> ì„ ì¶”ê°€í•´ì£¼ì–´ì•¼ í•¨</li>
      <li>
        <p><strong>buildscript</strong> ì„¤ì • (<strong>ë²„ì „</strong> ëª…ì‹œìš©)</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">buildscript</span> <span class="o">{</span>
  	<span class="n">ext</span> <span class="o">{</span>
  		<span class="n">queryDslVersion</span> <span class="o">=</span> <span class="s">"5.0.0"</span>
  	<span class="o">}</span>
  <span class="o">}</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p><strong>plugins</strong> ì¶”ê°€ (<strong>í”„ë ˆì„ì›Œí¬ë¡œì¨ ì‚¬ìš©</strong>í•  ìˆ˜ ìˆê²Œë” ì„¤ì •)</p>

        <p><code class="language-plaintext highlighter-rouge">id "com.ewerk.gradle.plugins.querydsl" version "1.0.10"</code></p>
      </li>
      <li>
        <p><strong>dependecies</strong> ì¶”ê°€ (ì˜ì¡´ê´€ê³„ ì¶”ê°€ â†’ ì§ì ‘ <strong>ê°€ì ¸ì™€ì„œ ì‚¬ìš©</strong>í•  ìˆ˜ ìˆê²Œë” ì„¤ì •)</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">implementation</span> <span class="s">"com.querydsl:querydsl-jpa:${queryDslVersion}"</span>
  <span class="n">annotationProcessor</span> <span class="s">"com.querydsl:querydsl-apt:${queryDslVersion}"</span>
</code></pre></div>        </div>

        <ul>
          <li>ì´ì „ ë²„ì „ì—ì„œëŠ” annotationProcessorê°€ í•„ìš”ì—†ì—ˆì§€ë§Œ, 5.0.0 ì—ì„  í•„ìš”</li>
        </ul>
      </li>
      <li>
        <p><strong>ë¶€ê°€ ì„¤ì •</strong> (<strong>Q-Typeì„ ë½‘ì•„ë‚´ê¸°</strong> ìœ„í•œ ì„¤ì •)</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">def</span> <span class="n">querydslDir</span> <span class="o">=</span> <span class="s">"$buildDir/generated/querydsl"</span> <span class="c1">// ì €ì¥ ê²½ë¡œ</span>
  <span class="n">querydsl</span> <span class="o">{</span>
  	<span class="n">jpa</span> <span class="o">=</span> <span class="kc">true</span>
  	<span class="n">querydslSourcesDir</span> <span class="o">=</span> <span class="n">querydslDir</span>
  <span class="o">}</span>
  <span class="n">sourceSets</span> <span class="o">{</span> <span class="c1">// src í´ë”ì— í•´ë‹¹ ê²½ë¡œë¥¼ ìë™ import -&gt; Q-Typeì„ ì“¸ ìˆ˜ ìˆê²Œë”</span>
  	<span class="n">main</span><span class="o">.</span><span class="na">java</span><span class="o">.</span><span class="na">srcDir</span> <span class="n">querydslDir</span>
  <span class="o">}</span>
  <span class="n">configurations</span> <span class="o">{</span>
  	<span class="n">querydsl</span><span class="o">.</span><span class="na">extendsFrom</span> <span class="n">compileClasspath</span>
  <span class="o">}</span>
  <span class="n">compileQuerydsl</span> <span class="o">{</span>
  	<span class="n">options</span><span class="o">.</span><span class="na">annotationProcessorPath</span> <span class="o">=</span> <span class="n">configurations</span><span class="o">.</span><span class="na">querydsl</span>
  <span class="o">}</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p>ì „ì²´ build.gradle</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">buildscript</span> <span class="o">{</span>
  	<span class="n">ext</span> <span class="o">{</span>
  		<span class="n">queryDslVersion</span> <span class="o">=</span> <span class="s">"5.0.0"</span>
  	<span class="o">}</span>
  <span class="o">}</span>
        
  <span class="n">plugins</span> <span class="o">{</span>
  	<span class="n">id</span> <span class="err">'</span><span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">boot</span><span class="err">'</span> <span class="n">version</span> <span class="err">'</span><span class="mf">2.7</span><span class="o">.</span><span class="mi">3</span><span class="err">'</span>
  	<span class="n">id</span> <span class="err">'</span><span class="n">io</span><span class="o">.</span><span class="na">spring</span><span class="o">.</span><span class="na">dependency</span><span class="o">-</span><span class="n">management</span><span class="err">'</span> <span class="n">version</span> <span class="err">'</span><span class="mf">1.0</span><span class="o">.</span><span class="mi">13</span><span class="o">.</span><span class="na">RELEASE</span><span class="err">'</span>
  	<span class="c1">// querydsl ì¶”ê°€</span>
  	<span class="n">id</span> <span class="s">"com.ewerk.gradle.plugins.querydsl"</span> <span class="n">version</span> <span class="s">"1.0.10"</span>
  	<span class="n">id</span> <span class="err">'</span><span class="n">java</span><span class="err">'</span>
  <span class="o">}</span>
        
  <span class="n">group</span> <span class="o">=</span> <span class="err">'</span><span class="n">spring</span><span class="err">'</span>
  <span class="n">version</span> <span class="o">=</span> <span class="err">'</span><span class="mf">0.0</span><span class="o">.</span><span class="mi">1</span><span class="o">-</span><span class="no">SNAPSHOT</span><span class="err">'</span>
  <span class="n">sourceCompatibility</span> <span class="o">=</span> <span class="err">'</span><span class="mi">17</span><span class="err">'</span>
        
  <span class="n">configurations</span> <span class="o">{</span>
  	<span class="n">compileOnly</span> <span class="o">{</span>
  		<span class="n">extendsFrom</span> <span class="n">annotationProcessor</span>
  	<span class="o">}</span>
  <span class="o">}</span>
        
  <span class="n">repositories</span> <span class="o">{</span>
  	<span class="n">mavenCentral</span><span class="o">()</span>
  <span class="o">}</span>
        
  <span class="n">dependencies</span> <span class="o">{</span>
  	<span class="n">implementation</span> <span class="err">'</span><span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">boot</span><span class="o">:</span><span class="n">spring</span><span class="o">-</span><span class="n">boot</span><span class="o">-</span><span class="n">starter</span><span class="o">-</span><span class="n">data</span><span class="o">-</span><span class="n">jpa</span><span class="err">'</span>
  	<span class="n">implementation</span> <span class="err">'</span><span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">boot</span><span class="o">:</span><span class="n">spring</span><span class="o">-</span><span class="n">boot</span><span class="o">-</span><span class="n">starter</span><span class="o">-</span><span class="n">web</span><span class="err">'</span>
        
  	<span class="c1">// querydsl ì¶”ê°€</span>
  	<span class="n">implementation</span> <span class="s">"com.querydsl:querydsl-jpa:${queryDslVersion}"</span>
  	<span class="n">annotationProcessor</span> <span class="s">"com.querydsl:querydsl-apt:${queryDslVersion}"</span>
        
  	<span class="c1">// p6spy (qeury log)</span>
  	<span class="n">implementation</span> <span class="err">'</span><span class="n">com</span><span class="o">.</span><span class="na">github</span><span class="o">.</span><span class="na">gavlyukovskiy</span><span class="o">:</span><span class="n">p6spy</span><span class="o">-</span><span class="n">spring</span><span class="o">-</span><span class="n">boot</span><span class="o">-</span><span class="nl">starter:</span><span class="mf">1.8</span><span class="o">.</span><span class="mi">0</span><span class="err">'</span>
        
  	<span class="c1">// lombok for main</span>
  	<span class="n">compileOnly</span> <span class="err">'</span><span class="n">org</span><span class="o">.</span><span class="na">projectlombok</span><span class="o">:</span><span class="n">lombok</span><span class="err">'</span>
  	<span class="n">annotationProcessor</span> <span class="err">'</span><span class="n">org</span><span class="o">.</span><span class="na">projectlombok</span><span class="o">:</span><span class="n">lombok</span><span class="err">'</span>
  	<span class="c1">// lombok for test</span>
  	<span class="n">testCompileOnly</span> <span class="err">'</span><span class="n">org</span><span class="o">.</span><span class="na">projectlombok</span><span class="o">:</span><span class="n">lombok</span><span class="err">'</span>
  	<span class="n">testAnnotationProcessor</span> <span class="err">'</span><span class="n">org</span><span class="o">.</span><span class="na">projectlombok</span><span class="o">:</span><span class="n">lombok</span><span class="err">'</span>
        
  	<span class="n">runtimeOnly</span> <span class="err">'</span><span class="n">com</span><span class="o">.</span><span class="na">h2database</span><span class="o">:</span><span class="n">h2</span><span class="err">'</span>
  	<span class="n">testImplementation</span> <span class="err">'</span><span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">boot</span><span class="o">:</span><span class="n">spring</span><span class="o">-</span><span class="n">boot</span><span class="o">-</span><span class="n">starter</span><span class="o">-</span><span class="n">test</span><span class="err">'</span>
  <span class="o">}</span>
        
  <span class="n">tasks</span><span class="o">.</span><span class="na">named</span><span class="o">(</span><span class="err">'</span><span class="n">test</span><span class="err">'</span><span class="o">)</span> <span class="o">{</span>
  	<span class="n">useJUnitPlatform</span><span class="o">()</span>
  <span class="o">}</span>
        
  <span class="c1">// querydsl ì¶”ê°€ ì„¸íŒ… ì‹œì‘</span>
  <span class="n">def</span> <span class="n">querydslDir</span> <span class="o">=</span> <span class="s">"$buildDir/generated/querydsl"</span> <span class="c1">// ì €ì¥ ê²½ë¡œ</span>
  <span class="n">querydsl</span> <span class="o">{</span>
  	<span class="n">jpa</span> <span class="o">=</span> <span class="kc">true</span>
  	<span class="n">querydslSourcesDir</span> <span class="o">=</span> <span class="n">querydslDir</span>
  <span class="o">}</span>
  <span class="n">sourceSets</span> <span class="o">{</span> <span class="c1">// src í´ë”ì— í•´ë‹¹ ê²½ë¡œë¥¼ ìë™ import -&gt; Q-Typeì„ ì“¸ ìˆ˜ ìˆê²Œë”</span>
  	<span class="n">main</span><span class="o">.</span><span class="na">java</span><span class="o">.</span><span class="na">srcDir</span> <span class="n">querydslDir</span>
  <span class="o">}</span>
  <span class="n">configurations</span> <span class="o">{</span>
  	<span class="n">querydsl</span><span class="o">.</span><span class="na">extendsFrom</span> <span class="n">compileClasspath</span>
  <span class="o">}</span>
  <span class="n">compileQuerydsl</span> <span class="o">{</span>
  	<span class="n">options</span><span class="o">.</span><span class="na">annotationProcessorPath</span> <span class="o">=</span> <span class="n">configurations</span><span class="o">.</span><span class="na">querydsl</span>
  <span class="o">}</span>
  <span class="c1">// querydsl ì„¸íŒ… ë</span>
</code></pre></div>        </div>
        <ol>
          <li><strong>Querydsl ë™ì‘ í™•ì¸</strong> (<strong>Q-Type ìƒì„± í™•ì¸</strong>)</li>
        </ol>
      </li>
      <li>ë¨¼ì € <strong>External Libraries</strong>ì—ì„œ <strong>querydsl</strong> ê´€ë ¨ëœ ê²ƒë“¤ì´ <strong>implementation</strong> ë˜ì—ˆë‹¤ë©´ ì˜ ë°›ì•„ì™€ ì§„ ê²ƒ</li>
      <li>ê·¸ í›„ ì„ì‹œ Entity í•˜ë‚˜ë¥¼ ìƒì„±í•˜ê³  <code class="language-plaintext highlighter-rouge">Gradle â†’ other â†’ complieQuerydsl</code> ì„ ë™ì‘ì‹œì¼œ <strong>í•´ë‹¹ Entityì— ëŒ€í•œ Q-Type</strong>ì´ ì§€ì •ëœ ê²½ë¡œ(ì—¬ê¸°ì„  build/generated/querydsl)ì— <strong>ìƒì„±ë˜ëŠ”ì§€ í™•ì¸</strong> <strong>(Hello â†’ QHello)</strong>
        <ul>
          <li>í„°ë¯¸ë„ë¡œ ì‹¤í–‰í•˜ê³ ì í•˜ë©´ <code class="language-plaintext highlighter-rouge">./gredlew complieQuerydsl</code> or <code class="language-plaintext highlighter-rouge">./gredlewJava</code></li>
          <li>ìƒì„±ëœ ëª¨ë“  Q-Typeì„ ì œê±°í•˜ê³ ì í•˜ë©´ <code class="language-plaintext highlighter-rouge">./gredlew clean</code></li>
          <li>ì°¸ê³ ë¡œ í•´ë‹¹ ìƒì„±ëœ íŒŒì¼ë“¤ì€ <strong>gitì— ì˜¬ë¦¬ë©´ ì•ˆë¨</strong> (build í•˜ìœ„ì— ìƒì„±ë˜ê²Œ ì„¤ì •í•˜ì—¬ gitì— ì˜¬ë¼ê°€ì§€ ì•Šê²Œ í•¨)</li>
          <li><strong>[ì¤‘ìš”] Querydslì„ ì‚¬ìš©í•˜ë ¤ë©´ í•­ìƒ Entityì˜ Q-Typeì´ í•„ìš”</strong>í•˜ê¸°ì— <strong>Entity ìƒì„± í›„ í•­ìƒ complieQuerydslì„ ì‹¤í–‰</strong>í•´ ì£¼ì–´ì•¼ í•¨</li>
        </ul>
      </li>
      <li>ìœ„ì˜ ëª¨ë“  ê³¼ì •ì´ ì œëŒ€ë¡œ ë™ì‘í•œë‹¤ë©´ Querydsl ì‚¬ìš© ê°€ëŠ¥!</li>
    </ul>
  </li>
  <li>Querydsl ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚´í´ë³´ê¸°
    <ul>
      <li><code class="language-plaintext highlighter-rouge">com.querydsl:querydsl-apt:5.0.0</code> â†’ <strong>Q-Type ì„ generate í•˜ëŠ” ìš©ë„</strong>ì˜ library</li>
      <li><code class="language-plaintext highlighter-rouge">com.querydsl:querydsl-jpa:5.0.0</code> â†’ <strong>ì‹¤ì œ ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì‘ì„±í•  ë•Œ í•„ìš”í•œ library</strong> (jpa íŠ¹í™”ìš©. sql,Mongodb ë“± ë‹¤ì–‘í•˜ê²Œ ì§€ì›)</li>
    </ul>
  </li>
</ul>

<h2 id="ì‚¬ìš©-ë„ë©”ì¸">ì‚¬ìš© ë„ë©”ì¸</h2>

<ul>
  <li>
    <p>ì—”í‹°í‹°</p>

    <p><img src="/images/posts/post-220917/Untitled.png" alt="Untitled" /></p>
  </li>
  <li>
    <p>ERD(Entity Relationship Diagram)</p>

    <p><img src="/images/posts/post-220917/Untitled 1.png" alt="Untitled" /></p>
  </li>
  <li>
    <p>ì—°ê´€ê´€ê³„ ì •ì˜</p>
    <ul>
      <li>Member â†” Team
        <ul>
          <li>ë‹¤ëŒ€ì¼ â†” ì¼ëŒ€ë‹¤ ì–‘ë°©í–¥ ê´€ê³„</li>
        </ul>
      </li>
      <li>
        <p>Member Entity</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nd">@ManyToOne</span><span class="o">(</span><span class="n">fetch</span> <span class="o">=</span> <span class="nc">FetchType</span><span class="o">.</span><span class="na">LAZY</span><span class="o">)</span>
  <span class="nd">@JoinColumn</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"team_id"</span><span class="o">)</span>
  <span class="kd">private</span> <span class="nc">Team</span> <span class="n">team</span><span class="o">;</span>
</code></pre></div>        </div>

        <ul>
          <li><code class="language-plaintext highlighter-rouge">@ManyToOne(fetch = FetchType.LAZY)</code> : Team Entityì™€ <strong>ë‹¤ëŒ€ì¼ ê´€ê³„</strong>ë¥¼ í‘œì‹œ, <strong>ì§€ì—°ë¡œë”©</strong>ì„ í†µí•´ Proxyê°ì²´ê°€ ì„¤ì •ë  ìˆ˜ ìˆë„ë¡ ì„¸íŒ…</li>
          <li><code class="language-plaintext highlighter-rouge">@JoinColumn(name = "team_id")</code> : DB Tableì˜ team_id colê³¼ ë§¤í•‘í•˜ì—¬ <strong>PKë¡œ ì‚¬ìš©</strong>í•˜ê² ë‹¤ëŠ” ëœ». â†’ <strong>ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸</strong> ì„¤ì •</li>
        </ul>
      </li>
      <li>
        <p>Team Entity</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nd">@OneToMany</span><span class="o">(</span><span class="n">mappedBy</span> <span class="o">=</span> <span class="s">"team"</span><span class="o">)</span>
  <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="n">members</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
</code></pre></div>        </div>

        <ul>
          <li><code class="language-plaintext highlighter-rouge">@OneToMany(mappedBy = "team")</code> : Member Entityì™€ <strong>ì¼ëŒ€ë‹¤ ê´€ê³„</strong>. ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì´ ì•„ë‹ˆë©° Memberì˜ teamì— ì˜í•´ <strong>ë§¤í•‘ëœ field</strong> ë¼ê³  ì„ ì–¸</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="ê¸°ë³¸-ë¬¸ë²•">ê¸°ë³¸ ë¬¸ë²•</h2>

<h3 id="jpaqueryfactory">JPAQueryFactory</h3>

<ul>
  <li><strong>Querydslì„ ì‹¤í–‰</strong>í•´ì£¼ëŠ” ì—­í•  (JPAë¡œ ì¹˜ë©´ <strong>EntityManger</strong>ê°™ì€ ì—­í• )</li>
  <li>ì‚¬ìš©ë²• 2ê°€ì§€
    <ol>
      <li>
        <p><strong>new ì˜¤í¼ë ˆì´ì…˜</strong>ì„ í†µí•´ ì¸ìŠ¤í„´ìŠ¤ í• ë‹¹</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nd">@Repository</span>
 <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MemberJPARepository</span> <span class="o">{</span>
        
     <span class="nd">@PersistenceContext</span>
     <span class="kd">private</span> <span class="nc">EntityManager</span> <span class="n">em</span><span class="o">;</span>
        
     <span class="kd">private</span> <span class="kd">final</span> <span class="nc">JPAQueryFactory</span> <span class="n">queryFactory</span><span class="o">;</span>
        
     <span class="kd">public</span> <span class="nf">MemberJPARepository</span><span class="o">()</span> <span class="o">{</span>
         <span class="k">this</span><span class="o">.</span><span class="na">queryFactory</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JPAQueryFactory</span><span class="o">(</span><span class="n">em</span><span class="o">);</span>
     <span class="o">}</span>
</code></pre></div>        </div>

        <ul>
          <li>ì›ë˜ëŠ” ìƒì„±ìì—ì„œ <code class="language-plaintext highlighter-rouge">MemberJPARepository(EntityManger em)</code> ìœ¼ë¡œ í•  ìˆ˜ ìˆì—ˆìœ¼ë‚˜ EntityMangerë¥¼ JPAì—ì„œ ì£¼ì…ì‹œí‚¤ê¸° ë•Œë¬¸ì— <strong>ë¨¼ì € JPAê°€ EntityMangerë¥¼ ì£¼ì…</strong>(<code class="language-plaintext highlighter-rouge">@PersistenceContext</code>)ì‹œí‚¨ í›„ì— <strong>í•´ë‹¹ em ì„ JPAQueryFactoryì— í• ë‹¹</strong>í•´ì£¼ì–´ì•¼ í•¨</li>
        </ul>
      </li>
      <li>
        <p><strong>[ê¶Œì¥] Beanìœ¼ë¡œ ë“±ë¡í•´ì„œ ì˜ì¡´ì„± ì£¼ì…(Dependency Injection)</strong>í•˜ì—¬ ì‚¬ìš©</p>
        <ul>
          <li>
            <p>ìµœìƒë‹¨ Application(<code class="language-plaintext highlighter-rouge">@SpringBootApplication</code>)ì—ì„œ <strong>JPAQueryFactory</strong>ë¥¼ <strong>Bean</strong>ìœ¼ë¡œ ë“±ë¡</p>

            <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nd">@SpringBootApplication</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">QuerydslApplication</span> <span class="o">{</span>
            
  	<span class="nd">@PersistenceContext</span>
  	<span class="nc">EntityManager</span> <span class="n">em</span><span class="o">;</span>
            	
  	<span class="nd">@Bean</span> <span class="c1">//ë¹ˆìœ¼ë¡œ ë“±ë¡ </span>
  	<span class="nc">JPAQueryFactory</span> <span class="nf">jpaQueryFactory</span><span class="o">()</span> <span class="o">{</span>
  		<span class="k">return</span> <span class="k">new</span> <span class="nf">JPAQueryFactory</span><span class="o">(</span><span class="n">em</span><span class="o">);</span>
  	<span class="o">}</span>
            
  	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{...}</span>
  <span class="o">}</span>
</code></pre></div>            </div>

            <ul>
              <li>ì›ë˜ëŠ” ìƒì„±ìì—ì„œ <code class="language-plaintext highlighter-rouge">MemberJPARepository(EntityManger em)</code> ìœ¼ë¡œ í•  ìˆ˜ ìˆì—ˆìœ¼ë‚˜ EntityMangerë¥¼ JPAì—ì„œ ì£¼ì…ì‹œí‚¤ê¸° ë•Œë¬¸ì— <strong>ë¨¼ì € JPAê°€ EntityMangerë¥¼ ì£¼ì…</strong>(<code class="language-plaintext highlighter-rouge">@PersistenceContext</code>)ì‹œí‚¨ í›„ì— <strong>í•´ë‹¹ em ì„ JPAQueryFactoryì— í• ë‹¹</strong>í•´ì£¼ì–´ì•¼ í•¨</li>
            </ul>
          </li>
          <li>
            <p><strong>[ê¶Œì¥]</strong> í˜¹ì€ <strong>Config</strong>(<code class="language-plaintext highlighter-rouge">@Configuration</code>)ì—ì„œ <strong>JPAQueryFactoryë¥¼ Beanìœ¼ë¡œ ë“±ë¡</strong></p>

            <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nd">@Configuration</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">QuerydslConfig</span> <span class="o">{</span>
            
      <span class="nd">@PersistenceContext</span>
      <span class="kd">private</span> <span class="nc">EntityManager</span> <span class="n">em</span><span class="o">;</span>
            
      <span class="nd">@Bean</span> <span class="c1">//ë¹ˆìœ¼ë¡œ ë“±ë¡</span>
      <span class="nc">JPAQueryFactory</span> <span class="nf">jpaQueryFactory</span><span class="o">()</span> <span class="o">{</span>
          <span class="k">return</span> <span class="k">new</span> <span class="nf">JPAQueryFactory</span><span class="o">(</span><span class="n">em</span><span class="o">);</span>
      <span class="o">}</span>
  <span class="o">}</span>
</code></pre></div>            </div>
          </li>
          <li>
            <p><strong>[ê¶Œì¥]</strong> ë§ˆì§€ë§‰ìœ¼ë¡œ <strong>Repositoryë‹¨</strong>ì— <strong>ì˜ì¡´ì„± ì£¼ì…</strong></p>

            <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nd">@Repository</span>
  <span class="nd">@RequiredArgsConstructor</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MemberJPARepository</span> <span class="o">{</span>
            
      <span class="kd">private</span> <span class="kd">final</span> <span class="nc">EntityManager</span> <span class="n">em</span><span class="o">;</span>
      <span class="kd">private</span> <span class="kd">final</span> <span class="nc">JPAQueryFactory</span> <span class="n">queryFactory</span><span class="o">;</span>
  		<span class="o">...</span>
  <span class="o">}</span>
</code></pre></div>            </div>

            <ul>
              <li><strong>JPAQueryFactoryê°€ beanìœ¼ë¡œ ë“±ë¡</strong>ë˜ì—ˆê¸° ë•Œë¬¸ì— <strong>ìƒì„±ìë¡œ ì£¼ì…ì´ ê°€ëŠ¥</strong>í•˜ë©°, ë”°ë¼ì„œ <code class="language-plaintext highlighter-rouge">@RequiredArgsConstructor</code> ë¥¼ í†µí•´ì„œ <strong>ìë™ ì£¼ì… ê°€ëŠ¥!</strong></li>
            </ul>
          </li>
        </ul>
      </li>
    </ol>
  </li>
</ul>

<aside>
ğŸ’¡ <strong>JPAQueryFactoryë¥¼ Beanìœ¼ë¡œ ë“±ë¡ ì‹œ EntityMangerì˜ ë™ì‹œì„± ë¬¸ì œ</strong> <br />
Springì€ ì—¬ëŸ¬ Threadì—ì„œ ë™ì‹œì— ê°™ì€ EntityManagerì— ì ‘ê·¼í•´ë„, íŠ¸ëœì­ì…˜ ë§ˆë‹¤ <b>ë³„ë„ì˜ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ ì œê³µ</b>í•˜ê¸° ë•Œë¬¸ì—, <b>ë™ì‹œì„± ë¬¸ì œëŠ” ê±±ì •í•˜ì§€ ì•Šì•„ë„ ë¨</b>

</aside>

<h3 id="ê¸°ë³¸-q-type-í™œìš©">ê¸°ë³¸ Q-Type í™œìš©</h3>

<ul>
  <li><strong>Querydslì„ ì‚¬ìš©</strong>í•˜ê¸° ìœ„í•´ì„  í•­ìƒ <strong>JPAQueryFactory</strong> + <strong>Entityì˜ Q-Typeì˜ ì¸ìŠ¤í„´ìŠ¤</strong>ë¥¼ ì´ìš©í•˜ì—¬ ì½”ë“œë¥¼ ì‘ì„±í•´ì£¼ì–´ì•¼ í•¨</li>
  <li>ì´ëŸ° <strong>Q-Type Classì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•</strong>ì€ 2ê°€ì§€</li>
  <li><strong>ë³„ì¹­ì„ ì§ì ‘ ì§€ì •</strong>í•˜ì—¬ <strong>ì¸ìŠ¤í„´ìŠ¤</strong> ìƒì„±
    <ul>
      <li><code class="language-plaintext highlighter-rouge">QMember qMember = new QMember("m");</code> â†’ SQLë¡œ ì¹˜ë©´ as ë¥¼ í†µí•´ <strong>ë³„ì¹­ì„ ì£¼ëŠ”</strong> ì—­í• 
        <ul>
          <li><code class="language-plaintext highlighter-rouge">from QMember as m</code> ìœ¼ë¡œ SQLì„ ì§œëŠ” ê±°ë¼ê³  ìƒê°í•˜ë©´ ë¨</li>
        </ul>
      </li>
      <li><strong>ê°€ì¥ ê¸°ë³¸</strong>ì ì¸ ë°©ë²•</li>
      <li><strong>[ì¤‘ìš”]</strong> ì˜ ì‚¬ìš©ë˜ì§€ëŠ” ì•Šì§€ë§Œ, <strong>ê°™ì€ í…Œì´ë¸”(Entity)</strong>ì— ëŒ€í•œ <strong>Join, SubQuery</strong>ë¥¼ ì‹¤í–‰í•  ë•Œ <strong>ê°ê°ì„ êµ¬ë¶„í•˜ê¸° ìœ„í•´ ì‚¬ìš©</strong>ë¨ â†’ ì¦‰, <strong>ì¸ìŠ¤í„´ìŠ¤ë¥¼ 2ê°œ í• ë‹¹</strong>í•´ì•¼ ë  ë•Œ (ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ Joiní•˜ê±°ë‚˜ subQueryë¡œ ì´ìš©í•  ê²½ìš° ì¶©ëŒ! â‡’ Querydsl - Advanced ì˜ subQuery ë¶€ë¶„ ì°¸ê³ )</li>
    </ul>
  </li>
  <li><strong>[ê¶Œì¥]</strong> <strong>ê¸°ë³¸ ì¸ìŠ¤í„´ìŠ¤</strong> ì‚¬ìš©
    <ul>
      <li><code class="language-plaintext highlighter-rouge">QMember qMember = QMember.member;</code></li>
      <li><strong>ìì£¼ ì‚¬ìš©</strong>ë˜ëŠ” ë°©ë²•</li>
      <li>Q-Typeì—ì„œ <strong>ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ëŠ” ì¸ìŠ¤í„´ìŠ¤</strong>ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒ â†’ SQLë¡œ ì¹˜ë©´ as ë¥¼ í†µí•´ ë³„ì¹­ì„ ìë™ìœ¼ë¡œ ì£¼ë„ë¡ í•˜ëŠ” ê²ƒ</li>
      <li><strong>static import ë¥¼ í†µí•´ <code class="language-plaintext highlighter-rouge">QMember.member</code> â†’ <code class="language-plaintext highlighter-rouge">member</code> ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê¶Œì¥</strong></li>
    </ul>
  </li>
  <li>
    <p>ê¶Œì¥ ë°©ë²• ì˜ˆì‹œ</p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kn">import</span> <span class="nn">static</span> <span class="n">study</span><span class="o">.</span><span class="na">querydsl</span><span class="o">.</span><span class="na">entity</span><span class="o">.</span><span class="na">QMember</span><span class="o">.*;</span>
    
  <span class="nc">Member</span> <span class="n">findMember</span> <span class="o">=</span> <span class="n">queryFactory</span>
              <span class="o">.</span><span class="na">select</span><span class="o">(*</span><span class="n">member</span><span class="o">*)</span> <span class="c1">// ì›ë˜ QMember.member</span>
              <span class="o">.</span><span class="na">from</span><span class="o">(*</span><span class="n">member</span><span class="o">*)</span>
              <span class="o">.</span><span class="na">where</span><span class="o">(*</span><span class="n">member</span><span class="o">*.</span><span class="na">username</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="s">"member1"</span><span class="o">))</span>
              <span class="o">.</span><span class="na">fetchOne</span><span class="o">();</span>
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="ê¸°ë³¸-ì¡°íšŒ">ê¸°ë³¸ ì¡°íšŒ</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="n">all</span> <span class="o">=</span> <span class="n">queryFactory</span>
            <span class="o">.</span><span class="na">select</span><span class="o">(*</span><span class="n">member</span><span class="o">*)</span> <span class="c1">// QMember.member</span>
            <span class="o">.</span><span class="na">from</span><span class="o">(*</span><span class="n">member</span><span class="o">*)</span>
            <span class="o">.</span><span class="na">fetchAll</span><span class="o">();</span>
</code></pre></div></div>

<ul>
  <li>JPQLì˜ ê¸°ë³¸ ì¡°íšŒ <code class="language-plaintext highlighter-rouge">â€œselect m form Member mâ€</code> ì„ <strong>Querydslì„ í†µí•´ ìë°”ì½”ë“œë¡œ ì‘ì„±</strong></li>
  <li><code class="language-plaintext highlighter-rouge">.select()</code>
    <ul>
      <li>Querydsl ì—ì„œ ìë°”ì½”ë“œë¥¼ í†µí•´ <strong>ì¡°íšŒ</strong>í•˜ëŠ” ë°©ë²•</li>
      <li>í•­ìƒ ë§ˆì§€ë§‰ì—ëŠ” <code class="language-plaintext highlighter-rouge">fetch(), fetchâ€¦()</code> ì„ í†µí•´ ì§ì ‘ ê°€ì ¸ì™€ì•¼ í•¨ (ìˆœìˆ˜ JPAì˜ <code class="language-plaintext highlighter-rouge">.getResultList()</code> ë“±ê³¼ ê°™ì€ ì—­í• )</li>
      <li><code class="language-plaintext highlighter-rouge">.selectFrom()</code> ì„ í†µí•´ <strong><code class="language-plaintext highlighter-rouge">from</code> ì ˆê³¼ í†µí•© ê°€ëŠ¥</strong></li>
      <li><strong>distinct</strong>ë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ìœ¼ë©´ <code class="language-plaintext highlighter-rouge">select()</code> ë°”ë¡œ ë’¤ì— <strong>ì²´ì¸ í˜•ì‹ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">distinct()</code> ì ìš©</strong>í•´ì£¼ë©´ ë¨ â†’ <code class="language-plaintext highlighter-rouge">.select(â€¦).distinct().from(â€¦)</code></li>
    </ul>
  </li>
</ul>

<blockquote>
  <p>ì°¸ê³  : Querydslì˜ ê²°ê³¼ë¡œ ì‹¤í–‰ë˜ëŠ” JPQL í™•ì¸ ë°©ë²• â†’ application.yml ì—ì„œ <code class="language-plaintext highlighter-rouge">spring.jpa.properties.hibernate.use_sql_comments: true</code> ì„¤ì • ì¶”ê°€</p>

</blockquote>

<h3 id="ê²€ìƒ‰-ì¡°ê±´-ì¿¼ë¦¬">ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Member</span> <span class="n">result</span> <span class="o">=</span> <span class="n">queryFactory</span>
          <span class="o">.</span><span class="na">selectFrom</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
          <span class="o">.</span><span class="na">where</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="s">"member1"</span><span class="o">)</span>
                  <span class="o">.</span><span class="na">and</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">between</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">20</span><span class="o">)))</span>
          <span class="o">.</span><span class="na">fetchOne</span><span class="o">();</span>
</code></pre></div></div>

<ul>
  <li>JPQLì˜ <code class="language-plaintext highlighter-rouge">â€œwhere â€¦"</code>  ì„ <strong>Querydslì„ í†µí•´ ìë°”ì½”ë“œ</strong>ë¡œ ì‘ì„±</li>
  <li>ê²€ìƒ‰ ì¡°ê±´
    <ul>
      <li><code class="language-plaintext highlighter-rouge">member.username.eq("member1")</code>
        <ul>
          <li>to JPQL : <code class="language-plaintext highlighter-rouge">m.username = ?1</code> , <code class="language-plaintext highlighter-rouge">.setParameter(â€member1â€)</code></li>
          <li><strong>ì²´ì¸ í˜•ì‹</strong>ìœ¼ë¡œ fieldì— <strong>ì¡°ê±´ ë° íŒŒë¼ë¯¸í„° ìë™ ë°”ì¸ë”©</strong> ê°€ëŠ¥</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">.and(member.age.between(10, 20))</code>
        <ul>
          <li>to JPQL : <code class="language-plaintext highlighter-rouge">and m.age between 10 , 50</code></li>
          <li><code class="language-plaintext highlighter-rouge">.and()</code> ì™€ ê°™ì´ <strong>ì²´ì¸ í˜•ì‹ìœ¼ë¡œ ì¡°ê±´ ì¶”ê°€ ê°€ëŠ¥</strong> (<code class="language-plaintext highlighter-rouge">.or()</code> ë„ ê°€ëŠ¥)</li>
        </ul>
      </li>
      <li>ê²°ê³¼
        <ul>
          <li><code class="language-plaintext highlighter-rouge">.where(member.username.eq("member1").and(member.age.between(10, 20)))</code></li>
          <li>to JPQL : <code class="language-plaintext highlighter-rouge">where m.username = ?1 and m.age between 10 and 50</code></li>
          <li>ì¶”ê°€ë¡œ <code class="language-plaintext highlighter-rouge">where()</code> ì ˆì˜ <code class="language-plaintext highlighter-rouge">.and()</code> ëŠ” <code class="language-plaintext highlighter-rouge">â€˜,â€™</code>ë¡œë„ í‘œí˜„ ê°€ëŠ¥ â†’ <code class="language-plaintext highlighter-rouge">.where(member.username.eq("member1") , member.age.between(10, 20))</code>
            <ul>
              <li><strong>í•´ë‹¹ íŒŒë¼ë¯¸í„°ì— nullì´ ë“¤ì–´ê°ˆ ê²½ìš° ë¬´ì‹œ</strong> â†’ <code class="language-plaintext highlighter-rouge">where(member.username.eq("member1"), null)</code> <strong>â‡’ nullì€ ë¬´ì‹œ</strong></li>
              <li>ì´ í‘œí˜„ì‹ì€ <strong>ë™ì  ì¿¼ë¦¬ ì ìš©</strong> ì‹œ êµ‰ì¥íˆ ìœ ìš©í•¨</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>JPQLì´ ì œê³µí•˜ëŠ” ëª¨ë“  ê²€ìƒ‰ ì¡°ê±´ ì œê³µ</p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="s">"member1"</span><span class="o">)</span> <span class="c1">// username = 'member1'</span>
  <span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">.</span><span class="na">ne</span><span class="o">(</span><span class="s">"member1"</span><span class="o">)</span> <span class="c1">// username != 'member1'</span>
  <span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="s">"member1"</span><span class="o">).</span><span class="na">not</span><span class="o">()</span> <span class="c1">// username != 'member1'</span>
  <span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">.</span><span class="na">isNotNull</span><span class="o">()</span> <span class="c1">// name is not null -&gt; ì´ë¦„ì´ nullì´ ì•„ë‹Œê²ƒë§Œ</span>
  <span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">in</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">20</span><span class="o">)</span> <span class="c1">// age in (10,20)</span>
  <span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">notIn</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">20</span><span class="o">)</span> <span class="c1">// age not in (10, 20)</span>
  <span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">between</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span><span class="mi">30</span><span class="o">)</span> <span class="c1">// between 10 and 30</span>
  <span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">goe</span><span class="o">(</span><span class="mi">30</span><span class="o">)</span> <span class="c1">// age &gt;= 30</span>
  <span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">gt</span><span class="o">(</span><span class="mi">30</span><span class="o">)</span> <span class="c1">// age &gt; 30</span>
  <span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">loe</span><span class="o">(</span><span class="mi">30</span><span class="o">)</span> <span class="c1">// age &lt;= 30</span>
  <span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">lt</span><span class="o">(</span><span class="mi">30</span><span class="o">)</span> <span class="c1">// age &lt; 30</span>
  <span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">.</span><span class="na">like</span><span class="o">(</span><span class="s">"member%"</span><span class="o">)</span> <span class="c1">// ê¸°ë³¸ like ê²€ìƒ‰ %í•„ìˆ˜</span>
  <span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="s">"member"</span><span class="o">)</span> <span class="c1">// like â€˜%member%â€™ ê²€ìƒ‰</span>
  <span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">.</span><span class="na">startsWith</span><span class="o">(</span><span class="s">"member"</span><span class="o">)</span> <span class="c1">// like â€˜member%â€™ ê²€ìƒ‰</span>
  <span class="o">...</span>
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="ê²°ê³¼-ì¡°íšŒ">ê²°ê³¼ ì¡°íšŒ</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="n">fetch</span> <span class="o">=</span> <span class="n">queryFactory</span>
	 <span class="o">.</span><span class="na">selectFrom</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
	 <span class="o">.</span><span class="na">fetch</span><span class="o">();</span> <span class="c1">// .fetchOne(), .fetchFirst(), ...</span>
</code></pre></div></div>

<ul>
  <li><strong>ê²°ê³¼ë¥¼ ì–´ë–»ê²Œ ê°€ì ¸ì˜¤ëƒ</strong>ì— ëŒ€í•œ ì„¤ì • (ìˆœìˆ˜ JPAë¡œ ì¹˜ë©´ <code class="language-plaintext highlighter-rouge">.getSingleResult()</code>, <code class="language-plaintext highlighter-rouge">.getResultList()</code> ì—­í• )</li>
  <li><code class="language-plaintext highlighter-rouge">fetch()</code> : <strong>List ì¡°íšŒ</strong>, ë°ì´í„° ì—†ì„ ì‹œ ë¹ˆ ë¦¬ìŠ¤íŠ¸ ë°˜í™˜</li>
  <li><code class="language-plaintext highlighter-rouge">fetchOne()</code> : <strong>ë‹¨ê±´ ì¡°íšŒ</strong>
    <ul>
      <li>ê²°ê³¼ ì—†ìœ¼ë©´ <code class="language-plaintext highlighter-rouge">null</code> ë°˜í™˜</li>
      <li>ê²°ê³¼ê°€ <strong>ë‘˜ ì´ìƒì´ë©´ Exception</strong> ë°œìƒ (<code class="language-plaintext highlighter-rouge">com.querydsl.core.NonUniqueResultException</code>)</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">fetchFirst()</code>
    <ul>
      <li>ê²°ê³¼ë“¤ ì¤‘ <strong>ê°€ì¥ ë¨¼ì €ë‚˜ì˜¤ëŠ” ê²°ê³¼ í•˜ë‚˜</strong>ë¥¼ ë°˜í™˜</li>
      <li><code class="language-plaintext highlighter-rouge">limit(1).fetchOne()</code> ê³¼ ë™ì¼</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">~fetchResults()~</code>
    <ul>
      <li>content, count ë¥¼ êµ¬ë¶„í•˜ì—¬ query ìƒì„± â†’ 2ê°œì˜ queryê°€ ë‚˜ê°</li>
      <li><strong>ver 5.0.0 ë¶€í„° ì‚¬ìš© ê¸ˆì§€ â‡’ ì§ì ‘ content ì¿¼ë¦¬ì™€ count ì¿¼ë¦¬ë¥¼ êµ¬ë¶„í•´ì„œ ì‚¬ìš©</strong>í•´ì•¼ë¨</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">~~fetchCount()~~</code>
    <ul>
      <li>count query</li>
      <li><strong>ver 5.0.0 ë¶€í„° ì‚¬ìš© ê¸ˆì§€ â‡’ <code class="language-plaintext highlighter-rouge">member.count()</code> ë¡œ ëŒ€ì²´í•˜ì—¬ ì‚¬ìš©</strong>í•´ì•¼ ë¨</li>
    </ul>
  </li>
</ul>

<h3 id="ì •ë ¬">ì •ë ¬</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">queryFactory</span>
      <span class="o">.</span><span class="na">selectFrom</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
      <span class="o">.</span><span class="na">where</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="mi">100</span><span class="o">))</span>
      <span class="o">.</span><span class="na">orderBy</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">desc</span><span class="o">(),</span> <span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">.</span><span class="na">asc</span><span class="o">().</span><span class="na">nullsLast</span><span class="o">())</span>
      <span class="o">.</span><span class="na">fetch</span><span class="o">();</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">.orderBy()</code> ì‚¬ìš©</li>
  <li>ì›í•˜ëŠ” <strong>í•„ë“œì— ì²´ì¸í˜•ì‹</strong>ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">.desc()</code>, <code class="language-plaintext highlighter-rouge">.asc()</code> ë¥¼ ë‹¬ì•„ <strong>ì •ë ¬ ê¸°ì¤€ ì„ íƒ</strong> ê°€ëŠ¥ (<strong>ì •ë ¬ ê¸°ì¤€ ë‘˜ ì¤‘ í•˜ë‚˜ë¥¼ ë¬´ì¡°ê±´ ì„ íƒ</strong>í•´ì£¼ì–´ì•¼ í•¨ â†’ <strong>default ì„¤ì •ì´ ì—†ìŒ</strong>)</li>
  <li>ì¶”ê°€ë¡œ <strong><code class="language-plaintext highlighter-rouge">nullsLast()</code></strong> ë¥¼ í†µí•´ <strong>nullì¸ í•­ëª©ì— ëŒ€í•œ ìˆœì„œ ì§€ì •</strong> ê°€ëŠ¥ â†’ <strong>null ì´ë©´ ë§ˆì§€ë§‰</strong>ìœ¼ë¡œ (<code class="language-plaintext highlighter-rouge">nullsFirst()</code> : <strong>nullì´ë©´ ì²˜ìŒ</strong>ìœ¼ë¡œ)</li>
  <li>í•µì‹¬
    <ul>
      <li><code class="language-plaintext highlighter-rouge">desc()</code> , <code class="language-plaintext highlighter-rouge">asc()</code> : ì¼ë°˜ ì •ë ¬ â†’ ì •ë ¬ì„ ìœ„í•´ <strong>í•„ìˆ˜ì ì¸ ìš”ì†Œ</strong></li>
      <li><code class="language-plaintext highlighter-rouge">nullsLast()</code> , <code class="language-plaintext highlighter-rouge">nullsFirst()</code> : <strong>null ë°ì´í„° ìˆœì„œ</strong> ë¶€ì—¬</li>
    </ul>
  </li>
</ul>

<h3 id="í˜ì´ì§•">í˜ì´ì§•</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">queryFactory</span>
          <span class="o">.</span><span class="na">selectFrom</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
          <span class="o">.</span><span class="na">orderBy</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">asc</span><span class="o">())</span>
          <span class="o">.</span><span class="na">offset</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="c1">// 1ë²ˆì§¸ ë°ì´í„°ë¶€í„° (0ë¶€í„° ì‹œì‘)</span>
          <span class="o">.</span><span class="na">limit</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span> <span class="c1">// ìµœëŒ€ 2ê±´ ê°€ì ¸ì˜¤ê¸°</span>
          <span class="o">.</span><span class="na">fetch</span><span class="o">();</span>
</code></pre></div></div>

<ul>
  <li><strong>offset</strong> ê³¼ <strong>limit</strong> ì„ í†µí•´ í˜ì´ì§• ë™ì‘</li>
  <li><code class="language-plaintext highlighter-rouge">.offset()</code> : <strong>ì‹œì‘ ë°ì´í„°</strong> ì„¤ì • (ëª‡ë²ˆì§¸ ë°ì´í„°ë¶€í„° ê°€ì ¸ì˜¬ ê²ƒì¸ì§€. <strong>0ë¶€í„° ì‹œì‘</strong>)</li>
  <li><code class="language-plaintext highlighter-rouge">.limit()</code> : ê°€ì ¸ì˜¬ <strong>ë°ì´í„° ê°œìˆ˜</strong> ì„¤ì • (ëª‡ê°œë¥¼ ê°€ì ¸ì˜¬ ê²ƒì¸ì§€)</li>
</ul>

<aside>
ğŸ’¡ <strong>Querydslì˜ ë²„ì „ ë³€ê²½ì— ë”°ë¥¸ í˜ì´ì§• ì£¼ì˜!</strong> <br />
ì›ë˜ëŠ” <code>.fetchResults()</code> ë¥¼ í†µí•´ì„œ í˜ì´ì§• ì •ë³´ë¥¼ ì–»ì–´ì˜¬ ìˆ˜ ìˆì§€ë§Œ, <b>ver 5.0.0 ë¶€í„° <code>.fetchResults()</code> ë¥¼ ì‚¬ìš©í•˜ì§€ ëª»í•˜</b>ë¯€ë¡œ <b>ì§ì ‘ ì •ë³´ë¥¼ ì–»ì–´ì˜¤ê¸° ìœ„í•œ ì¿¼ë¦¬ë¥¼ ë™ì‘</b>í•´ì£¼ì–´ì•¼ í•¨
</aside>

<h3 id="ì§‘í•©-í•¨ìˆ˜">ì§‘í•© í•¨ìˆ˜</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Tuple</span> <span class="n">tuple</span> <span class="o">=</span> <span class="n">queryFactory</span>
            <span class="o">.</span><span class="na">select</span><span class="o">(</span>
                    <span class="n">member</span><span class="o">.</span><span class="na">count</span><span class="o">(),</span> <span class="c1">// ê°œìˆ˜</span>
                    <span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">sum</span><span class="o">(),</span> <span class="c1">// í•©</span>
                    <span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">min</span><span class="o">(),</span> <span class="c1">// ìµœì†Œê°’</span>
                    <span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">max</span><span class="o">(),</span> <span class="c1">// ìµœëŒ€ê°’</span>
                    <span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">avg</span><span class="o">()</span> <span class="c1">// í‰ê· </span>
            <span class="o">)</span>
						<span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">member</span><span class="o">).</span><span class="na">fetchOne</span><span class="o">();</span>
</code></pre></div></div>

<ul>
  <li>SQLì—ì„œ ì§€ì›í•˜ëŠ” <strong>ëŒ€ë¶€ë¶„ì˜ í•¨ìˆ˜ ì‚¬ìš© ê°€ëŠ¥</strong></li>
  <li>JPQLê³¼ëŠ” ë‹¤ë¥´ê²Œ <strong>fieldì— ì²´ì¸í˜•ì‹ìœ¼ë¡œ ì ìš©</strong></li>
  <li><code class="language-plaintext highlighter-rouge">Tuple</code>
    <ul>
      <li><strong>ë‹¨ì¼ ê°ì²´ì˜ ê²°ê³¼ê°€ ì•„ë‹ˆê¸° ë•Œë¬¸ì— Tupleë¡œ ë°˜í™˜</strong>ë¨</li>
      <li><code class="language-plaintext highlighter-rouge">get()</code> ì„ í†µí•´ <strong>ê°’ ì ‘ê·¼</strong> ê°€ëŠ¥ â†’ <code class="language-plaintext highlighter-rouge">tuple.get(*member*.count())</code></li>
      <li>Querydsl - Advanced íŒŒíŠ¸ ì°¸ê³ </li>
    </ul>
  </li>
</ul>

<h3 id="ê·¸ë£¹í™”">ê·¸ë£¹í™”</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Tuple</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">queryFactory</span>
                <span class="o">.</span><span class="na">select</span><span class="o">(</span><span class="n">team</span><span class="o">.</span><span class="na">name</span><span class="o">,</span> <span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">avg</span><span class="o">())</span>
                <span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
                <span class="o">.</span><span class="na">join</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">team</span><span class="o">,</span> <span class="n">team</span><span class="o">)</span>
                <span class="o">.</span><span class="na">groupBy</span><span class="o">(</span><span class="n">team</span><span class="o">.</span><span class="na">name</span><span class="o">)</span>
                <span class="o">.</span><span class="na">fetch</span><span class="o">();</span>
</code></pre></div></div>

<ul>
  <li><strong>groupBy</strong>ë¥¼ í†µí•´ì„œ <strong>grouping</strong> ì§„í–‰
    <ul>
      <li>ex) memberì— teamì„ join ì‹œí‚¨ í›„ teamì˜ nameìœ¼ë¡œ ê·¸ë£¹í™”ë¥¼ ì‹œí‚¨ í›„ (teamA : {member1, member2}, teamB : {â€¦}) memberì˜ ageë¥¼ í‰ê· ë‚´ì–´ ë°˜í™˜ â†’ [{teamA, 20},{teamB,30}]</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">.groupBy()</code>
    <ul>
      <li>ê·¸ë£¹í™”í•˜ê³ ì í•˜ëŠ” field ë¶€ì—¬</li>
      <li>
        <p><code class="language-plaintext highlighter-rouge">.having()</code> ë„ ì‚¬ìš© ê°€ëŠ¥ â†’ <strong>ê·¸ë£¹í™”ëœ ê²°ê³¼ í•„í„°ë§</strong></p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="o">.</span><span class="na">groupBy</span><span class="o">(</span><span class="n">team</span><span class="o">.</span><span class="na">name</span><span class="o">)</span>
  <span class="o">.</span><span class="na">having</span><span class="o">(</span><span class="n">team</span><span class="o">.</span><span class="na">name</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="s">"teamA"</span><span class="o">))</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ul>

<h3 id="ì¡°ì¸">ì¡°ì¸</h3>

<ul>
  <li>ë‚´ë¶€ ì¡°ì¸(inner join) : <code class="language-plaintext highlighter-rouge">.join()</code> , <code class="language-plaintext highlighter-rouge">.innerJoin()</code></li>
  <li>left ì™¸ë¶€ ì¡°ì¸(left outer join) : <code class="language-plaintext highlighter-rouge">.leftJoin()</code></li>
  <li>right ì™¸ë¶€ ì¡°ì¸(right outer join) : <code class="language-plaintext highlighter-rouge">.rightJoin()</code></li>
  <li>
    <p><strong>ê¸°ë³¸ ì¡°ì¸</strong></p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">queryFactory</span>
  		 <span class="o">.</span><span class="na">selectFrom</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
  		 <span class="o">.</span><span class="na">join</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">team</span><span class="o">,</span> <span class="n">team</span><span class="o">)</span>
  		 <span class="o">.</span><span class="na">where</span><span class="o">(</span><span class="n">team</span><span class="o">.</span><span class="na">name</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="s">"teamA"</span><span class="o">))</span>
  		 <span class="o">.</span><span class="na">fetch</span><span class="o">();</span>
</code></pre></div>    </div>

    <ul>
      <li><code class="language-plaintext highlighter-rouge">join(</code>ì¡°ì¸ ëŒ€ìƒ<code class="language-plaintext highlighter-rouge">,</code> ì¡°ì¸í•  Qíƒ€ì…<code class="language-plaintext highlighter-rouge">)</code>
        <ul>
          <li>ë‹¤ë¥¸ í…Œì´ë¸” ì¡°ì¸ â†’ <code class="language-plaintext highlighter-rouge">.join(member.team, team)</code> â‡’ <code class="language-plaintext highlighter-rouge">join Team t on m.team_id = t.id</code></li>
          <li><strong>ê°™ì€ í…Œì´ë¸” ì¡°ì¸</strong>
            <ul>
              <li><strong>ìƒˆë¡œìš´ ë³„ì¹­(êµ¬ë¶„ì„ ìœ„í•´)</strong>ìœ¼ë¡œ <strong>Q-Type ìƒì„±</strong> â†’ <code class="language-plaintext highlighter-rouge">QMember sub = new QMember(â€subâ€)</code></li>
              <li>ê·¸ í›„ join â†’ <code class="language-plaintext highlighter-rouge">.join(member, sub)</code> â‡’ <code class="language-plaintext highlighter-rouge">join Member sub on m.id = sub.id</code></li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>ì„¸íƒ€ ì¡°ì¸</strong> (ë§‰ ì¡°ì¸)</p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">queryFactory</span>
  			 <span class="o">.</span><span class="na">select</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
  			 <span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">member</span><span class="o">,</span> <span class="n">team</span><span class="o">)</span> <span class="c1">// ì„¸íƒ€ ì¡°ì¸ (inner join. ì™¸ë¶€ ì¡°ì¸ ë¶ˆê°€ëŠ¥)</span>
  			 <span class="o">.</span><span class="na">where</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="n">team</span><span class="o">.</span><span class="na">name</span><span class="o">))</span>
  			 <span class="o">.</span><span class="na">fetch</span><span class="o">();</span>
</code></pre></div>    </div>

    <ul>
      <li><strong>ì—°ê´€ê´€ê³„ê°€ ì—†ëŠ” í•„ë“œë¡œ ì¡°ì¸</strong> â†’ <code class="language-plaintext highlighter-rouge">cross join</code></li>
      <li>ì¼ëª… <strong>ë§‰ì¡°ì¸</strong></li>
      <li><strong>ì™¸ë¶€ ì¡°ì¸ ë¶ˆê°€ëŠ¥</strong> (hibernateë¥¼ ì‚¬ìš©í•˜ë©´ <strong>Join onì ˆì„ í†µí•´ ê°€ëŠ¥</strong>)
        <ul>
          <li>null ì¼ ë°œìƒí•˜ê±°ë‚˜ ì´ëŸ° Exception ë•Œë¬¸ì´ ì•„ë‹Œ, <strong>from()ì„ í†µí•œ ì„¸íƒ€ì¡°ì¸ì—ì„œ ì§€ì›ì„ ì•ˆí•˜ëŠ” ê²ƒ</strong></li>
          <li>í•˜ì´ë²„ë„¤ì´íŠ¸ 5.1ë¶€í„° <strong>on ì„ ì‚¬ìš©í•´ì„œ ì„œë¡œ ê´€ê³„ê°€ ì—†ëŠ” í•„ë“œë¡œ ì™¸ë¶€ ì¡°ì¸í•˜ëŠ” ê¸°ëŠ¥ì´ ì¶”ê°€</strong></li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">.from(member, team)</code>
        <ul>
          <li>from ì ˆì— ì—¬ëŸ¬ ì—”í‹°í‹°ë¥¼ ì„ íƒí•´ì„œ ì„¸íƒ€ ì¡°ì¸</li>
          <li>JPQL : <code class="language-plaintext highlighter-rouge">select m from Member m, Team team</code></li>
          <li>SQL : <code class="language-plaintext highlighter-rouge">selet â€¦. from member m **cross join team t**</code></li>
          <li><code class="language-plaintext highlighter-rouge">.from(member).join(team)</code> ìœ¼ë¡œë„ <strong>ë§‰ì¡°ì¸</strong> ê°€ëŠ¥ (<code class="language-plaintext highlighter-rouge">join(member.team, team)</code>ì´ ì•„ë‹Œ ê·¸ëƒ¥ <strong>ì¡°ê±´ ì—†ì´ teamì„ join</strong> í•˜ëŠ” ê²ƒ)</li>
        </ul>
      </li>
      <li>memberì˜ <strong>row X team</strong>ì˜ row ì˜ ê²°ê³¼ê°€ ìƒì„±ë¨ (where ì „)</li>
    </ul>
  </li>
  <li><strong>ONì ˆ</strong>
    <ul>
      <li>ONì ˆì„ í™œìš©í•œ ì¡°ì¸(JPA 2.1ë¶€í„° ê°€ëŠ¥)</li>
      <li>
        <p>ì¡°ì¸ í›„ <strong>whereì„ í†µí•œ í•„í„°ë§ì´ ì•„ë‹Œ</strong>, <strong>ì¡°ì¸ í•˜ëŠ” ì‹œì ì— onì„ í†µí•´ í•„í„°ë§</strong> í•˜ê³ ì í•  ë•Œ ì‚¬ìš©  (ex. íšŒì›ê³¼ íŒ€ì„ ì¡°ì¸í•˜ë©´ì„œ, íŒ€ ì´ë¦„ì´ <strong>teamAì¸ íŒ€ë§Œ ì¡°ì¸</strong>, íšŒì›ì€ ëª¨ë‘ ì¡°íšŒ)</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Tuple</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">queryFactory</span>
  			 <span class="o">.</span><span class="na">select</span><span class="o">(</span><span class="n">member</span><span class="o">,</span> <span class="n">team</span><span class="o">)</span>
  			 <span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
  			 <span class="o">.</span><span class="na">leftJoin</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">team</span><span class="o">,</span> <span class="n">team</span><span class="o">).</span><span class="na">on</span><span class="o">(</span><span class="n">team</span><span class="o">.</span><span class="na">name</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="s">"teamA"</span><span class="o">))</span>
  			 <span class="o">.</span><span class="na">fetch</span><span class="o">();</span>
</code></pre></div>        </div>

        <ul>
          <li>JPQL: <code class="language-plaintext highlighter-rouge">SELECT m, t FROM Member m LEFT JOIN m.team t **on t.name = 'teamA'**</code></li>
          <li>SQL: <code class="language-plaintext highlighter-rouge">SELECT m.*, t.* FROM Member m LEFT JOIN Team t ON m.TEAM_ID=t.id **and t.name='teamA'**</code></li>
          <li><strong>í•„í„°ë§ ì‹œ outer joinì„ ì‚¬ìš©í•˜ê³ ì í• ë•Œ onì€ í•„ìˆ˜</strong> â†’ whereì„ í†µí•´ join í›„ í•„í„°ë§ì´ ë¶ˆê°€ëŠ¥( â† Null) â‡’ ê·¸ë˜ì„œ <strong>onì„ í†µí•´ join í•˜ëŠ” ì‹œì ì— í•„í„°ë§ì„ ì§„í–‰</strong>í•˜ëŠ” ê²ƒ (<strong>joiní•  ê²ƒì„ ê°€ì ¸ì˜¬ë•Œ í•„í„°ë§</strong>í•¨)</li>
          <li>í•„í„°ë§ ì‹œ <strong>inner joinì„ ì‚¬ìš©í•˜ê³ ì í•  ë•ŒëŠ” onì€ í•„ìˆ˜ê°€ ì•„ë‹˜</strong> â†’ <strong>whereì„ í†µí•´ join í›„ í•„í„°ë§ ê°€ëŠ¥</strong> â‡’ <code class="language-plaintext highlighter-rouge">.join(member.team, team).where(team.name.eq("teamA"))</code></li>
        </ul>

        <aside>
  ğŸ’¡ <strong>í•µì‹¬ ì •ë¦¬</strong>
  <ul>
  <li> <b>inner join + where</b> ì„ í•  ê²½ìš°ì—ëŠ” ëª¨ë“  íšŒì›ì„ ì¡°íšŒí•  ìˆ˜ ì—†ìŒ (nullì´ ì œì™¸ë¨) </li>
  <li> <b>outer join + where</b> ì€ ì¡°ê±´ì„ ë§Œì¡±ì‹œí‚¬ ìˆ˜ ì—†ìŒ â†’ <b>join í›„ teamì´ nullì¸ memberì—ì„œ team.nameì„ ì¡°íšŒí•  ìˆ˜ ì—†</b>ìœ¼ë¯€ë¡œ </li>
  <li> í•´ê²° : <b>outer join + on</b> ìœ¼ë¡œ <b>ì¡°ê±´ì„ ë§Œì¡±ì‹œí‚¤ëŠ” teamì— ëŒ€í•´ì„œë§Œ joinì„ ì§„í–‰</b>í•˜ëŠ” ê²ƒ â†’ sqlì—ì„œì˜ <code>on __ and __</code> </li>
  <li> ê²°êµ­ <b>inner join ì„ ì‚¬ìš©í•˜ë©´ on ì„ ì‚¬ìš©í•˜ë“  whereì„ ì‚¬ìš©í•˜ë“  ë˜‘ê°™</b>ìŒ â†’ ìµìˆ™í•œ whereì„ ì‚¬ìš©í•˜ì </li>
  <li> But <b>outer join ì€ whereì´ ë¨¹íˆì§€ ì•Šìœ¼ë¯€ë¡œ ì ˆëŒ€ on ì‚¬ìš©!</b> </li>
  </ul>
  </aside>
      </li>
      <li>
        <p><strong>ì—°ê´€ê´€ê³„ê°€ ì—†ëŠ” ì—”í‹°í‹°ë¥¼ ì™¸ë¶€ ì¡°ì¸</strong>í•˜ê³ ì í•  ë•Œ ì‚¬ìš© (<strong>ì„¸íƒ€ì™¸ë¶€ì¡°ì¸</strong>. ex. íšŒì›ì˜ ì´ë¦„ê³¼ íŒ€ì˜ ì´ë¦„ì´ ê°™ì€ ëŒ€ìƒ ì™¸ë¶€ ì¡°ì¸)</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Tuple</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">queryFactory</span>
        <span class="o">.</span><span class="na">select</span><span class="o">(</span><span class="n">member</span><span class="o">,</span> <span class="n">team</span><span class="o">)</span>
        <span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
        <span class="o">.</span><span class="na">leftJoin</span><span class="o">(</span><span class="n">team</span><span class="o">).</span><span class="na">on</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="n">team</span><span class="o">.</span><span class="na">name</span><span class="o">))</span> <span class="c1">// ì£¼ì˜ : ì—°ê´€ê´€ê³„ê°€ ì—†ê¸°ë•Œë¬¸ì— leftJoin()ì— team Entity í•˜ë‚˜ë§Œ ë“¤ì–´ê°</span>
        <span class="o">.</span><span class="na">fetch</span><span class="o">();</span>
</code></pre></div>        </div>

        <ul>
          <li>JPQL: <code class="language-plaintext highlighter-rouge">SELECT m, t FROM Member m LEFT JOIN Team t on m.username = t.name</code></li>
          <li>SQL: <code class="language-plaintext highlighter-rouge">SELECT m.*, t.* FROM Member m LEFT JOIN Team t ON m.username = t.name</code></li>
          <li>í•˜ì´ë²„ë„¤ì´íŠ¸ 5.1ë¶€í„° <strong>on ì„ ì‚¬ìš©í•´ì„œ ì„œë¡œ ê´€ê³„ê°€ ì—†ëŠ” í•„ë“œë¡œ ì™¸ë¶€ ì¡°ì¸í•˜ëŠ” ê¸°ëŠ¥ì´ ì¶”ê°€</strong>ë¨</li>
          <li>join í•  ë•Œ, <strong>í•´ë‹¹ Memberì˜ ì´ë¦„ê³¼ ë™ì¼í•œ Teamë§Œ join</strong>ì´ ë˜ëŠ” ê²ƒ. <strong>joinë˜ì§€ ì•Šì€ Memberë„ ë°˜í™˜ (ì™¸ë¶€ ì¡°ì¸)</strong></li>
          <li><code class="language-plaintext highlighter-rouge">leftJoin(team)</code>
            <ul>
              <li>ì—°ê´€ê´€ê³„ê°€ ì—†ê¸°ë•Œë¬¸ì— <code class="language-plaintext highlighter-rouge">leftJoin()</code>ì— <strong>team Entity í•˜ë‚˜ë§Œ</strong> ë“¤ì–´ê°</li>
              <li>ì¼ë°˜ì¡°ì¸: <code class="language-plaintext highlighter-rouge">leftJoin(member.team, team)</code> â†” ì„¸íƒ€ on ì¡°ì¸: <code class="language-plaintext highlighter-rouge">from(member).leftJoin(team).on(xxx)</code></li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>Fetch Join</strong></p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nc">Member</span> <span class="n">findMember</span> <span class="o">=</span> <span class="n">queryFactory</span>
  		 <span class="o">.</span><span class="na">selectFrom</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
  		 <span class="o">.</span><span class="na">join</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">team</span><span class="o">,</span> <span class="n">team</span><span class="o">).</span><span class="na">fetchJoin</span><span class="o">()</span>
  		 <span class="o">.</span><span class="na">where</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="s">"member1"</span><span class="o">))</span>
  		 <span class="o">.</span><span class="na">fetchOne</span><span class="o">();</span>
</code></pre></div>    </div>

    <ul>
      <li><code class="language-plaintext highlighter-rouge">join()</code>, <code class="language-plaintext highlighter-rouge">leftJoin()</code> ë“± ì¡°ì¸ ê¸°ëŠ¥ ë’¤ì— <code class="language-plaintext highlighter-rouge">fetchJoin()</code> ì´ë¼ê³  ì¶”ê°€
        <ul>
          <li>join ë’¤ì— <code class="language-plaintext highlighter-rouge">fetchJoin()</code> ì„¤ì •ì„ í†µí•´ ê°€ëŠ¥</li>
          <li>memberë§Œ ì¡°íšŒí–ˆì§€ë§Œ, memberì™€ <strong>ì§€ì—°ë¡œë”©ìœ¼ë¡œ ì—°ê´€ëœ teamê¹Œì§€ memberì— ë„£ì–´</strong>ì£¼ëŠ” ê²ƒ</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">select(member)â€¦</code>
        <ul>
          <li>ì¼ë°˜ ì¡°ì¸ â†’ <code class="language-plaintext highlighter-rouge">select m.*</code></li>
          <li><strong>íŒ¨ì¹˜ ì¡°ì¸</strong> â†’ <code class="language-plaintext highlighter-rouge">select m.*, t.*</code></li>
        </ul>
      </li>
      <li>ì¡°ì¸ì„ í™œìš©í•´ì„œ <strong>ì—°ê´€ëœ ì—”í‹°í‹°ë¥¼ SQL í•œë²ˆì— ì¡°íšŒ</strong>í•˜ëŠ” ê¸°ëŠ¥ (SQLì—ì„œ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì€ ì•„ë‹˜)</li>
      <li>ì§€ì—° ë¡œë”©ì˜ ì—°ê´€ Entityë¥¼ ë§ˆì¹˜ <strong>ì¦‰ì‹œë¡œë”©ì²˜ëŸ¼ í•œë²ˆì— ê°€ì ¸ì˜¤</strong>ëŠ” ê¸°ëŠ¥ (<strong>1+N ë¬¸ì œ í•´ê²° ê°€ëŠ¥</strong>)</li>
    </ul>
  </li>
</ul>

<h3 id="ì„œë¸Œ-ì¿¼ë¦¬">ì„œë¸Œ ì¿¼ë¦¬</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">QMember</span> <span class="n">memberSub</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">QMember</span><span class="o">(</span><span class="s">"memberSub"</span><span class="o">);</span>

<span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">queryFactory</span>
          <span class="o">.</span><span class="na">selectFrom</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
          <span class="o">.</span><span class="na">where</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span> <span class="c1">// goe ë“± ë‹¤ì–‘í•˜ê²Œ ì‚¬ìš© ê°€ëŠ¥</span>
                  <span class="nc">JPAExpressions</span>
                          <span class="o">.</span><span class="na">select</span><span class="o">(</span><span class="n">memberSub</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">max</span><span class="o">())</span> <span class="c1">// avg ê°€ëŠ¥</span>
                          <span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">memberSub</span><span class="o">)</span>
          <span class="o">))</span>
          <span class="o">.</span><span class="na">fetch</span><span class="o">();</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">com.querydsl.jpa.JPAExpressions</code> ì‚¬ìš©
    <ul>
      <li><code class="language-plaintext highlighter-rouge">JPAExpressions</code> ë’¤ì— ë³´í†µ Querydsl ì§œë“¯ì´ <strong>select, from ì„ ì²´ì¸í˜•ì‹ìœ¼ë¡œ ì‘ì„±</strong>í•´ì£¼ë©´ ë¨</li>
      <li><code class="language-plaintext highlighter-rouge">JPAExpressions.*</code> ë¥¼ <strong>static import</strong> í•˜ì—¬ ë°”ë¡œ <code class="language-plaintext highlighter-rouge">.select()</code> ë¡œë„ ì‚¬ìš© ê°€ëŠ¥</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">QMember memberSub = new QMember("memberSub");</code>
    <ul>
      <li>ì„œë¸Œì¿¼ë¦¬ ì‚¬ìš© ì‹œ <strong>ë˜‘ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì„œë¸Œì¿¼ë¦¬ì— ë„£ìœ¼ë©´ ì¶©ëŒ</strong> ë°œìƒ â†’ êµ¬ë¶„ë˜ëŠ” <strong>ìƒˆë¡œìš´ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±</strong> í•„ìš”</li>
      <li>SQLë¡œ ì¹˜ë©´ <strong>as ë¥¼ í†µí•´ ë³„ì¹­ì„ ì£¼ëŠ” ì—­í• </strong> (<code class="language-plaintext highlighter-rouge">from QMember as m</code> ìœ¼ë¡œ SQLì„ ì§œëŠ” ê±°ë¼ê³  ìƒê°í•˜ë©´ ë¨)</li>
      <li>ê²°ê³¼ì ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">QMember as member1, QMember as memberSub</code> <strong>ë‘ê°€ì§€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í™œìš©</strong>í•˜ëŠ” ê²ƒ</li>
    </ul>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">where()</code> ì ˆ ì•ˆì— ì‚¬ìš©í•˜ëŠ” ê²ƒ ë¿ë§Œ ì•„ë‹ˆë¼ <strong><code class="language-plaintext highlighter-rouge">select()</code> ì ˆ ì•ˆì—ì„œë„ ì‚¬ìš© ê°€ëŠ¥</strong></p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Tuple</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">queryFactory</span>
            <span class="o">.</span><span class="na">select</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">,</span>
                    <span class="nc">JPAExpressions</span>
                            <span class="o">.</span><span class="na">select</span><span class="o">(</span><span class="n">memberSub</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">avg</span><span class="o">())</span>
                            <span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">memberSub</span><span class="o">)</span>
            <span class="o">).</span><span class="na">from</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
            <span class="o">.</span><span class="na">fetch</span><span class="o">();</span>
</code></pre></div>    </div>

    <ul>
      <li><strong>í•˜ì´ë²„ë„¤ì´íŠ¸ êµ¬í˜„ì²´ì—ì„œ ê°€ëŠ¥</strong>í•œ ê²ƒ</li>
    </ul>
  </li>
  <li>But, <strong>fromì ˆì—ì„  ì‚¬ìš© ë¶ˆê°€</strong>ëŠ¥! â†’ JPA JPQLì—ì„œ ì§€ì›í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ
    <ul>
      <li>ì„œë¸Œì¿¼ë¦¬ë¥¼ <strong>joinìœ¼ë¡œ ë³€ê²½</strong>í•˜ì—¬ í•´ê²°í•˜ê±°ë‚˜ <strong>ì¿¼ë¦¬ë¥¼ 2ë²ˆ ë¶„ë¦¬í•´ì„œ ì‹¤í–‰</strong>í•˜ëŠ” ë“±ì˜ ë°©ë²•ìœ¼ë¡œ í•´ê²°í•´ì•¼ ë¨ (ì›¬ë§Œí•˜ë©´ ëŒ€ì•ˆ ê°€ëŠ¥)</li>
    </ul>
  </li>
</ul>

<h3 id="case-ë¬¸">Case ë¬¸</h3>

<ul>
  <li><strong>select, ì¡°ê±´ì ˆ(where), order by</strong>ì—ì„œ ì‚¬ìš© ê°€ëŠ¥</li>
  <li>
    <p>ê°„ë‹¨ Caseì ˆ</p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">queryFactory</span>
                  <span class="o">.</span><span class="na">select</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">age</span>
                          <span class="o">.</span><span class="na">when</span><span class="o">(</span><span class="mi">10</span><span class="o">).</span><span class="na">then</span><span class="o">(</span><span class="s">"ì—´ì‚´"</span><span class="o">)</span>
                          <span class="o">.</span><span class="na">when</span><span class="o">(</span><span class="mi">20</span><span class="o">).</span><span class="na">then</span><span class="o">(</span><span class="s">"ìŠ¤ë¬´ì‚´"</span><span class="o">)</span>
                          <span class="o">.</span><span class="na">otherwise</span><span class="o">(</span><span class="s">"ê¸°íƒ€"</span><span class="o">))</span>
                  <span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
                  <span class="o">.</span><span class="na">fetch</span><span class="o">();</span>
</code></pre></div>    </div>

    <ul>
      <li><strong>filedì— ì²´ì¸í˜•ì‹ìœ¼ë¡œ caseì ˆ ì‘ì„±</strong></li>
    </ul>
  </li>
  <li>
    <p>ë³µì¡í•œ Caseì¡°ê±´</p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">result2</span> <span class="o">=</span> <span class="n">queryFactory</span>
              <span class="o">.</span><span class="na">select</span><span class="o">(</span><span class="k">new</span> <span class="nc">CaseBuilder</span><span class="o">()</span>
                      <span class="o">.</span><span class="na">when</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">between</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">20</span><span class="o">)).</span><span class="na">then</span><span class="o">(</span><span class="s">"0~20ì‚´"</span><span class="o">)</span>
                      <span class="o">.</span><span class="na">when</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">between</span><span class="o">(</span><span class="mi">21</span><span class="o">,</span> <span class="mi">30</span><span class="o">)).</span><span class="na">then</span><span class="o">(</span><span class="s">"21~30ì‚´"</span><span class="o">)</span>
                      <span class="o">.</span><span class="na">otherwise</span><span class="o">(</span><span class="s">"ê¸°íƒ€"</span><span class="o">))</span>
              <span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
              <span class="o">.</span><span class="na">fetch</span><span class="o">();</span>
</code></pre></div>    </div>

    <ul>
      <li><code class="language-plaintext highlighter-rouge">CaseBuilder</code> ì— <strong>ì²´ì¸í˜•ì‹</strong>ìœ¼ë¡œ caseì ˆ ì‘ì„±</li>
    </ul>
  </li>
  <li>
    <p><strong>[ì¤‘ìš”]</strong> <strong>Caseë¬¸ + Orderby</strong></p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nc">NumberExpression</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">rankPath</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CaseBuilder</span><span class="o">()</span>
  		 <span class="o">.</span><span class="na">when</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">between</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">20</span><span class="o">)).</span><span class="na">then</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span>
  		 <span class="o">.</span><span class="na">when</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">between</span><span class="o">(</span><span class="mi">21</span><span class="o">,</span> <span class="mi">30</span><span class="o">)).</span><span class="na">then</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span>
  		 <span class="o">.</span><span class="na">otherwise</span><span class="o">(</span><span class="mi">3</span><span class="o">);</span>
    
  <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Tuple</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">queryFactory</span>
  		 <span class="o">.</span><span class="na">select</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">,</span> <span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">,</span> <span class="n">rankPath</span><span class="o">)</span>
  		 <span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
  	   <span class="o">.</span><span class="na">orderBy</span><span class="o">(</span><span class="n">rankPath</span><span class="o">.</span><span class="na">desc</span><span class="o">())</span>
  	   <span class="o">.</span><span class="na">fetch</span><span class="o">();</span>
</code></pre></div>    </div>

    <ul>
      <li>Caseë¥¼ í†µí•´ <strong>Sort ê¸°ì¤€ì„ ì¤„ ë•Œ</strong> ì‚¬ìš©</li>
      <li>Querydslì€ <strong>ìë°” ì½”ë“œ</strong>ë¡œ ì‘ì„±í•˜ê¸° ë•Œë¬¸ì— rankPath ì²˜ëŸ¼ <strong>ë³µì¡í•œ ì¡°ê±´ì„ ë³€ìˆ˜ë¡œ ì„ ì–¸í•´ì„œ select ì ˆ, orderBy ì ˆì—ì„œ í•¨ê»˜ ì‚¬ìš©</strong></li>
    </ul>
  </li>
</ul>

<h3 id="ìƒìˆ˜-ì¶”ê°€">ìƒìˆ˜ ì¶”ê°€</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Tuple</span><span class="o">&gt;</span> <span class="n">addString</span> <span class="o">=</span> <span class="n">queryFactory</span>
          <span class="o">.</span><span class="na">select</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">,</span> <span class="nc">Expressions</span><span class="o">.</span><span class="na">constant</span><span class="o">(</span><span class="s">"A"</span><span class="o">))</span>
          <span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
          <span class="o">.</span><span class="na">fetch</span><span class="o">();</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">Expressions.constant("A")</code>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">â€œAâ€</code> ë¼ëŠ” ìƒìˆ˜ë¥¼ <code class="language-plaintext highlighter-rouge">member.username</code> ì™€ í•¨ê»˜ <strong>ê²°ê³¼ì— ì¶”ê°€</strong></li>
      <li>ê²°ê³¼ : [{â€member1â€, â€œAâ€}, {â€member2â€, â€œAâ€}, â€¦ ]</li>
      <li>constant ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ SQLì—ì„œ Aë¥¼ ìƒì„±í•´ì„œ ê°€ì ¸ì˜¤ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ <strong>SQLì—ì„œ member.usernameì„ ê°€ì ¸ì˜¨ ê²°ê³¼ì— â€œAâ€ë¥¼ ì¶”ê°€</strong>í•˜ëŠ” ê²ƒ â†’ <strong>ìµœì í™”</strong></li>
    </ul>
  </li>
</ul>

<h3 id="ë¬¸ì-ë”í•˜ê¸°">ë¬¸ì ë”í•˜ê¸°</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">String</span> <span class="n">concat</span> <span class="o">=</span> <span class="n">queryFactory</span>
          <span class="o">.</span><span class="na">select</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">.</span><span class="na">concat</span><span class="o">(</span><span class="s">"_"</span><span class="o">).</span><span class="na">concat</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">.</span><span class="na">stringValue</span><span class="o">()))</span> <span class="c1">// : member.age.stringValue() ë¶€ë¶„ì´ ì¤‘ìš” (int -&gt; String)</span>
          <span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">member</span><span class="o">)</span>
          <span class="o">.</span><span class="na">where</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">username</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="s">"member1"</span><span class="o">))</span>
          <span class="o">.</span><span class="na">fetchOne</span><span class="o">();</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">.concat()</code> : ì• ì´ˆì— <strong>ì§€ì •ë¬¸ìë¥¼ í•©ì³ì„œ ì¡°íšŒ</strong>í•´ ì˜¤ëŠ” ê²ƒ</li>
  <li><code class="language-plaintext highlighter-rouge">.stringValue()</code> : <strong>ë¬¸ìë¡œ ë§Œë“¤ì–´ì£¼ëŠ” ê¸°ëŠ¥</strong> (ì¤‘ìš”: <strong>ENUM ì²˜ë¦¬ ì‹œ ìì£¼ ì‚¬ìš©!</strong>) â†’ SQLì˜ cast() ì—­í• </li>
  <li>ê²°ê³¼ : member1_10</li>
</ul>
:ET