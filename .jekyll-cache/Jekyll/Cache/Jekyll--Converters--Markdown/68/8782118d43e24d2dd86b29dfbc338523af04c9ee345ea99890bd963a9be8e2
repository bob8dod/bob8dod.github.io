I"¤<h2 id="project-description">Project Description</h2>

<p><a href="/images/posts/post-220617/description.pdf">Description.pdf</a></p>

<p><img src="/images/posts/post-220617/Untitled.png" alt="" /></p>

<p><img src="/images/posts/post-220617/Untitled 1.png" alt="" /></p>

<h2 id="project-setting">Project Setting</h2>

<p><img src="/images/posts/post-220617/Untitled 2.png" alt="" /></p>

<ul>
  <li>Gradle Project, Java(ver 11), Spring Boot(ver 2.7.0)</li>
  <li>Spring MVC - Spring Web</li>
  <li>Annotation library - Lombok</li>
  <li>View Template - Thymeleaf</li>
  <li>
    <p>DataBase - H2 Database (SQL), Spring Data JPA, AWS RDS (SQL)</p>
  </li>
  <li>ìŠ¤í”„ë§ ë¶€íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬
    <ul>
      <li>spring-boot-starter-web
        <ul>
          <li>spring-boot-starter-tomcat: í†°ìº£ (ì›¹ì„œë²„)</li>
          <li>spring-webmvc: ìŠ¤í”„ë§ ì›¹ MVC</li>
        </ul>
      </li>
      <li>spring-boot-starter-thymeleaf: íƒ€ì„ë¦¬í”„ í…œí”Œë¦¿ ì—”ì§„(View)</li>
      <li>spring-boot-starter(ê³µí†µ): ìŠ¤í”„ë§ ë¶€íŠ¸ + ìŠ¤í”„ë§ ì½”ì–´ + ë¡œê¹…</li>
      <li>spring-boot
        <ul>
          <li>spring-core</li>
        </ul>
      </li>
      <li>spring-boot-starter-logging
  logback, slf4j</li>
    </ul>
  </li>
  <li>í…ŒìŠ¤íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬
    <ul>
      <li>spring-boot-starter-test
        <ul>
          <li>junit : í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬</li>
          <li>mockito : ëª© ë¼ì´ë¸ŒëŸ¬ë¦¬</li>
          <li>aseertj : : í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì¢€ ë” í¸í•˜ê²Œ ì‘ì„±í•˜ê²Œ ë„ì™€ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬</li>
          <li>spring-test : ìŠ¤í”„ë§ í†µí•© í…ŒìŠ¤íŠ¸ ì§€ì›</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>Gradle (build.gradle)</p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">plugins</span> <span class="o">{</span>
  	<span class="n">id</span> <span class="err">'</span><span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">boot</span><span class="err">'</span> <span class="n">version</span> <span class="err">'</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">4</span><span class="err">'</span>
  	<span class="n">id</span> <span class="err">'</span><span class="n">io</span><span class="o">.</span><span class="na">spring</span><span class="o">.</span><span class="na">dependency</span><span class="o">-</span><span class="n">management</span><span class="err">'</span> <span class="n">version</span> <span class="err">'</span><span class="mf">1.0</span><span class="o">.</span><span class="mi">11</span><span class="o">.</span><span class="na">RELEASE</span><span class="err">'</span>
  	<span class="n">id</span> <span class="err">'</span><span class="n">java</span><span class="err">'</span>
  <span class="o">}</span>
    
  <span class="n">group</span> <span class="o">=</span> <span class="err">'</span><span class="n">Talk_with</span><span class="err">'</span>
  <span class="n">version</span> <span class="o">=</span> <span class="err">'</span><span class="mf">0.0</span><span class="o">.</span><span class="mi">1</span><span class="o">-</span><span class="no">SNAPSHOT</span><span class="err">'</span>
  <span class="n">sourceCompatibility</span> <span class="o">=</span> <span class="err">'</span><span class="mi">11</span><span class="err">'</span>
    
  <span class="n">configurations</span> <span class="o">{</span>
  	<span class="n">compileOnly</span> <span class="o">{</span>
  		<span class="n">extendsFrom</span> <span class="n">annotationProcessor</span>
  	<span class="o">}</span>
  <span class="o">}</span>
    
  <span class="n">repositories</span> <span class="o">{</span>
  	<span class="n">mavenCentral</span><span class="o">()</span>
  <span class="o">}</span>
    
  <span class="n">dependencies</span> <span class="o">{</span>
  	<span class="n">implementation</span> <span class="err">'</span><span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">boot</span><span class="o">:</span><span class="n">spring</span><span class="o">-</span><span class="n">boot</span><span class="o">-</span><span class="n">starter</span><span class="o">-</span><span class="n">data</span><span class="o">-</span><span class="n">jpa</span><span class="err">'</span> <span class="c1">//spring-data-jpa</span>
  	<span class="n">implementation</span> <span class="err">'</span><span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">boot</span><span class="o">:</span><span class="n">spring</span><span class="o">-</span><span class="n">boot</span><span class="o">-</span><span class="n">starter</span><span class="o">-</span><span class="n">thymeleaf</span><span class="err">'</span> <span class="c1">//veiw template</span>
  	<span class="n">implementation</span> <span class="err">'</span><span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">boot</span><span class="o">:</span><span class="n">spring</span><span class="o">-</span><span class="n">boot</span><span class="o">-</span><span class="n">starter</span><span class="o">-</span><span class="n">web</span><span class="err">'</span> <span class="c1">// spring-web</span>
  	<span class="n">implementation</span> <span class="err">'</span><span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">boot</span><span class="o">:</span><span class="n">spring</span><span class="o">-</span><span class="n">boot</span><span class="o">-</span><span class="n">devtools</span><span class="err">'</span> <span class="c1">// for easy rebuilding</span>
  	<span class="n">implementation</span> <span class="err">'</span><span class="n">com</span><span class="o">.</span><span class="na">github</span><span class="o">.</span><span class="na">gavlyukovskiy</span><span class="o">:</span><span class="n">p6spy</span><span class="o">-</span><span class="n">spring</span><span class="o">-</span><span class="n">boot</span><span class="o">-</span><span class="nl">starter:</span><span class="mf">1.8</span><span class="o">.</span><span class="mi">0</span><span class="err">'</span> <span class="c1">//for tracking sql query</span>
  	<span class="n">runtimeOnly</span> <span class="err">'</span><span class="nl">mysql:</span><span class="n">mysql</span><span class="o">-</span><span class="n">connector</span><span class="o">-</span><span class="n">java</span><span class="err">'</span> <span class="c1">// for AWS RDS</span>
  	<span class="c1">// implementation 'com.h2database:h2' // for Test _ in Local DB</span>
  	<span class="n">annotationProcessor</span> <span class="err">'</span><span class="n">org</span><span class="o">.</span><span class="na">projectlombok</span><span class="o">:</span><span class="n">lombok</span><span class="err">'</span> <span class="c1">// for annotation</span>
  	<span class="n">testImplementation</span> <span class="err">'</span><span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">boot</span><span class="o">:</span><span class="n">spring</span><span class="o">-</span><span class="n">boot</span><span class="o">-</span><span class="n">starter</span><span class="o">-</span><span class="n">test</span><span class="err">'</span> <span class="c1">// spring-test</span>
    
  	<span class="c1">// AWS SDK (Using S3)</span>
  	<span class="n">implementation</span> <span class="nf">platform</span><span class="o">(</span><span class="err">'</span><span class="n">com</span><span class="o">.</span><span class="na">amazonaws</span><span class="o">:</span><span class="n">aws</span><span class="o">-</span><span class="n">java</span><span class="o">-</span><span class="n">sdk</span><span class="o">-</span><span class="nl">bom:</span><span class="mf">1.11</span><span class="o">.</span><span class="mi">1000</span><span class="err">'</span><span class="o">)</span>
  	<span class="n">implementation</span> <span class="err">'</span><span class="n">com</span><span class="o">.</span><span class="na">amazonaws</span><span class="o">:</span><span class="n">aws</span><span class="o">-</span><span class="n">java</span><span class="o">-</span><span class="n">sdk</span><span class="o">-</span><span class="n">s3</span><span class="err">'</span>
  <span class="o">}</span>
    
  <span class="n">tasks</span><span class="o">.</span><span class="na">named</span><span class="o">(</span><span class="err">'</span><span class="n">test</span><span class="err">'</span><span class="o">)</span> <span class="o">{</span>
  	<span class="n">useJUnitPlatform</span><span class="o">()</span>
  <span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>application.yml</p>

    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="na">spring</span><span class="pi">:</span>
    <span class="na">datasource</span><span class="pi">:</span>
      <span class="na">url</span><span class="pi">:</span>  <span class="s">jdbc:mysql://${DB_URL}:3306/capstone</span> <span class="c1"># jdbc:h2:tcp://localhost/~/capstone</span>
      <span class="na">username</span><span class="pi">:</span> <span class="s">${DB_NAME}</span> <span class="c1"># park</span>
      <span class="na">password</span><span class="pi">:</span> <span class="s">${DB_PASSWORD}</span> <span class="c1"># </span>
      <span class="na">driver-class-name</span><span class="pi">:</span> <span class="s">com.mysql.cj.jdbc.Driver</span> <span class="c1"># org.h2.Driver</span>
    
    <span class="na">jpa</span><span class="pi">:</span>
      <span class="na">hibernate</span><span class="pi">:</span>
        <span class="na">ddl-auto </span><span class="pi">:</span> <span class="s">update</span>
      <span class="na">properties</span><span class="pi">:</span>
        <span class="na">hibernate</span><span class="pi">:</span>
          <span class="na">format_sql </span><span class="pi">:</span> <span class="no">true</span>
    
  <span class="na">logging</span><span class="pi">:</span>
    <span class="na">level</span><span class="pi">:</span>
      <span class="na">org.hibernate.SQL</span><span class="pi">:</span> <span class="s">debug</span>
  <span class="c1">#    org.hibernate.type: trace # p6spyë¡œ ëŒ€ì²´</span>
</code></pre></div>    </div>
  </li>
</ul>

<h2 id="domain-analysis">Domain Analysis</h2>

<h3 id="ìš”êµ¬ì‚¬í•­-ë¶„ì„">ìš”êµ¬ì‚¬í•­ ë¶„ì„</h3>

<ul>
  <li>ê¸°ëŠ¥ ëª©ë¡
    <ol>
      <li>ë¼ì´ë¸Œ ì§€ë„ ê¸°ëŠ¥
        <ul>
          <li>ì‹¤ì‹œê°„ ì¸ì› ì¸¡ì • ë° í˜¼ì¡ë„</li>
          <li>ì‹¤ì‹œê°„Â ë“œë¡  ì¸¡ì • ìœ„ì¹˜ ì•Œë¦¼</li>
          <li>ì¢Œí‘œì— ë”°ë¥¸ ì¥ì†Œ ì •ë³´ ì œê³µ</li>
        </ul>
      </li>
      <li>ë¼ì´ë¸Œ í†µê³„ ê¸°ëŠ¥
        <ul>
          <li>ì‹¤ì‹œê°„ ì¸ì› ë³€í™”ëŸ‰ ì œê³µ</li>
          <li>ëˆ„ì  ë°ì´í„° í†µê³„ëŸ‰ ì œê³µ</li>
        </ul>
      </li>
    </ol>
  </li>
</ul>

<h3 id="ë„ë©”ì¸-ëª¨ë¸ê³¼-í…Œì´ë¸”-ì„¤ê³„-ë°-ë¶„ì„">ë„ë©”ì¸ ëª¨ë¸ê³¼ í…Œì´ë¸” ì„¤ê³„ ë° ë¶„ì„</h3>

<ul>
  <li>
    <p>ë„ë©”ì¸ ëª¨ë¸ ì„¤ê³„ ë° ë¶„ì„</p>

    <p><img src="/images/posts/post-220617/Untitled 3png" alt="" /></p>

    <p>â€œì¥ì†Œâ€ì™€ â€œê²€ì¶œ ê°ì²´â€ì˜ ê´€ê³„</p>

    <ul>
      <li>í•˜ë‚˜ì˜ ì¥ì†Œì— ì—¬ëŸ¬ ê²€ì¶œ ê°ì²´ê°€ Mapping ë¨</li>
      <li>ê²€ì¶œ ê°ì²´ì˜ ì¢Œí‘œ(ìœ„ë„, ê²½ë„)ì— ë”°ë¼ ì¥ì†Œì— Mapping</li>
    </ul>
  </li>
  <li>
    <p>ì—”í‹°í‹° ì„¤ê³„ ë° ë¶„ì„</p>

    <p><img src="/images/posts/post-220617/Untitled 4.png" alt="" /></p>

    <ul>
      <li>ì¥ì†Œ(Point)
        <ul>
          <li>ì¥ì†Œ ì •ë³´ : id(ì‹ë³„ì), place(ì¥ì†Œ ëª…), percentage(í˜¼ì¡ë„), count(ì‹¤ì‹œê°„ ì¸ì›), avgCount(í‰ê·  ì¸ì›), imgSrc(ì¥ì†Œ ì‚¬ì§„), latitude(ìœ„ë„), longitude(ê²½ë„)</li>
          <li>ìœ„ì¹˜ ì •ë³´ [ì‚¬ê°í˜• ë²”ìœ„] : latTopLeft(ì¢Œìƒë‹¨ ìœ„ë„), lonTopLeft(ì¢Œìƒë‹¨ ê²½ë„), latBottRight(ìš°í•˜ë‹¨ ìœ„ë„), lonBottRight(ìš°í•˜ë‹¨ ê²½ë„)</li>
          <li>ìµœê·¼ ê´€ë ¨ ë°ì´í„°(ê²€ì¶œ ê°ì²´) ë³€ê²½ ì‹œì  : lastCommittedTime(ìƒˆë¡œ ë“¤ì–´ì˜¨ ë°ì´í„°ë¥¼ ì¸ì§€í•˜ê¸° ìœ„í•¨)</li>
          <li><strong>ì—°ê´€ ê´€ê³„</strong> : infos(ê²€ì¶œ ê°ì²´ ì •ë³´, <code class="language-plaintext highlighter-rouge">@OneToMany</code>)</li>
        </ul>
      </li>
      <li>ê²€ì¶œ ê°ì²´(Info)
        <ul>
          <li>ê²€ì¶œ ê°ì²´ ì •ë³´ : date(ê²€ì¶œ ì‹œê°), leftValue(ê°ì²´ ë°•ìŠ¤ ìœ„ì¹˜), topValue(ê°ì²´ ë°•ìŠ¤ ìœ„ì¹˜), widthValue(ê°ì²´ ë°•ìŠ¤ ë„ˆë¹„), heightValue(ê°ì²´ ë°•ìŠ¤ ë†’ì´)</li>
          <li>ë“œë¡  ì •ë³´: lat(ìœ„ë„), lon(ê²½ë„), droneHeight(ê³ ë„), azimuth(ë°©ìœ„ê°)</li>
          <li><strong>ì—°ê´€ ê´€ê³„</strong> : point(ì¥ì†Œ, <code class="language-plaintext highlighter-rouge">@ManyToOne</code>)</li>
        </ul>
      </li>
      <li>ê²€ì¶œ ë°ì´í„°(Temp)
        <ul>
          <li>Infoì™€ ë™ì¼í•œ fieldë¥¼ ê°€ì§€ê³  ìˆëŠ” Entityì§€ë§Œ, ì—°ê´€ê´€ê³„ê°€ ì„¤ì •ë˜ì–´ ìˆì§€ ì•Šì€ Entity</li>
          <li>ë“œë¡ ì—ì„œ ì‹¤ì‹œê°„ìœ¼ë¡œ ì €ì¥ëœ ë°ì´í„°</li>
          <li>í•´ë‹¹ ë°ì´í„°ë¥¼ Springì—ì„œ ë¶„ì„ í›„ JPAë¥¼ í†µí•´ ì¥ì†Œ(Point)ì™€ ë§¤í•‘ì‹œì¼œ ìƒˆë¡œìš´ Infoë¥¼ ë§Œë“œëŠ” ê²ƒ</li>
          <li>ì¦‰, Infoë¥¼ ë§Œë“¤ê¸° ìœ„í•œ ì¼ì‹œì ì¸ ë°ì´í„°</li>
        </ul>

        <p><img src="/images/posts/post-220617/Untitled 5.png" alt="" /></p>

        <blockquote>
          <p>ìµœëŒ€í•œ ë‹¨ìˆœí•œ êµ¬ì¡°ë¡œ Entity ìƒì„±</p>
        </blockquote>
      </li>
    </ul>

    <aside>
  âš ï¸ <strong> êµ³ì´ Temp ì™€ Info 2ê°œì˜ ê²€ì¶œ ê°ì²´,ë°ì´í„° Entityë¥¼ ë§Œë“  ì´ìœ  </strong>
  <ul>
      <li>ë¨¼ì € TempëŠ” ì‹¤ì‹œê°„ìœ¼ë¡œ ë“œë¡ ì—ì„œ ê²€ì¶œëœ ê°ì²´ì˜ ì •ë³´ë¥¼ DBì— ì €ì¥. ì´ë•Œ, ì €ì¥ë˜ëŠ” ìˆœê°„ì— ì—°ê´€ê´€ê³„ë¥¼ íŒë‹¨í•˜ê³  ë§¤í•‘ì„ ì§„í–‰í•˜ê¸°ì—ëŠ” ì–´ë ¤ì›€ì´ ìˆë‹¤ íŒë‹¨í•˜ì—¬, ì¼ë‹¨ ì €ì¥í•œ í›„ í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì— ì •ë³´ë¥¼ ìš”ì²­í•  ê²½ìš° Tempì˜ ì •ë³´ë¥¼ ì´ìš©í•´ì„œ Point(ì¥ì†Œ)ì™€ ì—°ê´€ê´€ê³„ë¥¼ ìƒì„±í•œ í›„ì— Infoë¥¼ ìƒˆë¡œ ì €ì¥í•˜ëŠ” ë¡œì§ìœ¼ë¡œ êµ¬í˜„. ì¦‰, InfoëŠ” Tempì— Pointì˜ ì—°ê´€ê´€ê³„ê°€ ë“¤ì–´ê°„ ë°ì´í„°</li>
      <li>ë˜í•œ, ì‹¤ì‹œê°„ìœ¼ë¡œ ì œê³µí•´ì•¼ ë˜ëŠ” ë°ì´í„°(Temp)ì™€ ëˆ„ì ë˜ì–´ ì œê³µë˜ëŠ” ë°ì´í„°(Info)ì˜ ì°¨ì´ê°€ ìˆìœ¼ë¯€ë¡œ êµ¬ë¶„í•¨</li>
  </ul>
  </aside>
  </li>
  <li>
    <p>í…Œì´ë¸” ì„¤ê³„ ë° ë¶„ì„</p>

    <p><img src="/images/posts/post-220617/Untitled 6.png" alt="" /></p>

    <ul>
      <li>INFO: pointì˜ point_idë¥¼ forigen keyë¡œ ì„¤ì •í•˜ì—¬ ì—°ê²°</li>
      <li>TEMPì— POINTì™€ì˜ ì—°ê´€ê´€ê³„ ìƒì„±í•˜ì—¬ ë§Œë“  ê²ƒì´ INFO</li>
    </ul>
  </li>
  <li>
    <p>ì—”í‹°í‹° í´ë˜ìŠ¤ ì† ì£¼ìš” ë©”ì„œë“œ</p>

    <blockquote>
      <p>Entity ìƒì„± ë° ìˆ˜ì •ì€ ë˜ë„ë¡ì´ë©´ Entityì•ˆì—ì„œ ì´ë£¨ì–´ì§€ë„ë¡ ì„¤ì •
SetterëŠ” ë˜ë„ë¡ì´ë©´ ì—´ì–´ë‘ì§€ ì•Šë„ë¡ ì„¤ì • (ë³€ê²½ì´ë‚˜ ì €ì¥ ìì²´ë¥¼ ì¶”í›„ì— ì¶”ì í•˜ê¸° í¸í•˜ê²Œ ë§Œë“¤ê¸° ìœ„í•¨. [ìœ ì§€ ë³´ìˆ˜])</p>
    </blockquote>

    <ol>
      <li>Point(ì¥ì†Œ)
        <ul>
          <li>
            <p>ìƒì„± ë©”ì„œë“œ</p>

            <p>ìƒì„±í•  ë•Œ í•„ìš”í•œ ê°’ë“¤ë§Œì„ ê°€ì§€ê³  ìƒì„± 
  (PointëŠ” ë¯¸ë¦¬ ìƒì„±í•´ë‘ëŠ” ê°’ì´ë¯€ë¡œ initDBë¥¼ í†µí•´ DBì— ì €ì¥ í›„ ìƒˆë¡œ ìƒì„±í• ë•Œë§Œ ì‚¬ìš©. ì¦‰, Clientì— ì˜í•´ì„œ ìƒì„±ë˜ì§€ ì•ŠìŒ)</p>

            <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Point</span> <span class="nf">createPoint</span><span class="o">(</span><span class="nc">String</span> <span class="n">place</span><span class="o">,</span> <span class="kt">int</span> <span class="n">percentage</span><span class="o">,</span> <span class="kt">int</span> <span class="n">count</span><span class="o">,</span> <span class="kt">int</span> <span class="n">avgCount</span><span class="o">,</span> <span class="kt">double</span> <span class="n">latitude</span><span class="o">,</span> <span class="kt">double</span> <span class="n">longitude</span><span class="o">,</span> <span class="nc">String</span> <span class="n">imgSrc</span><span class="o">,</span>
                                  <span class="kt">double</span> <span class="n">lonTopLeft</span><span class="o">,</span> <span class="kt">double</span> <span class="n">latTopLeft</span><span class="o">,</span> <span class="kt">double</span> <span class="n">lonBottRight</span><span class="o">,</span> <span class="kt">double</span> <span class="n">latBottRight</span><span class="o">,</span> <span class="nc">LocalDateTime</span> <span class="n">lastCommittedTime</span><span class="o">)</span> <span class="o">{</span>
      <span class="nc">Point</span> <span class="n">point</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Point</span><span class="o">();</span>
      <span class="n">point</span><span class="o">.</span><span class="na">place</span> <span class="o">=</span> <span class="n">place</span><span class="o">;</span>
      <span class="n">point</span><span class="o">.</span><span class="na">percentage</span> <span class="o">=</span> <span class="n">percentage</span><span class="o">;</span>
      <span class="n">point</span><span class="o">.</span><span class="na">count</span> <span class="o">=</span> <span class="n">count</span><span class="o">;</span>
      <span class="n">point</span><span class="o">.</span><span class="na">avgCount</span> <span class="o">=</span> <span class="n">avgCount</span><span class="o">;</span>
      <span class="n">point</span><span class="o">.</span><span class="na">latitude</span> <span class="o">=</span> <span class="n">latitude</span><span class="o">;</span>
      <span class="n">point</span><span class="o">.</span><span class="na">longitude</span> <span class="o">=</span> <span class="n">longitude</span><span class="o">;</span>
      <span class="n">point</span><span class="o">.</span><span class="na">imgSrc</span> <span class="o">=</span> <span class="n">imgSrc</span><span class="o">;</span>
      <span class="n">point</span><span class="o">.</span><span class="na">lonTopLeft</span> <span class="o">=</span> <span class="n">lonTopLeft</span><span class="o">;</span>
      <span class="n">point</span><span class="o">.</span><span class="na">latTopLeft</span> <span class="o">=</span> <span class="n">latTopLeft</span><span class="o">;</span>
      <span class="n">point</span><span class="o">.</span><span class="na">lonBottRight</span> <span class="o">=</span> <span class="n">lonBottRight</span><span class="o">;</span>
      <span class="n">point</span><span class="o">.</span><span class="na">latBottRight</span> <span class="o">=</span> <span class="n">latBottRight</span><span class="o">;</span>
      <span class="n">point</span><span class="o">.</span><span class="na">lastCommittedTime</span> <span class="o">=</span> <span class="n">lastCommittedTime</span><span class="o">;</span>
      <span class="k">return</span> <span class="n">point</span><span class="o">;</span>
  <span class="o">}</span>
</code></pre></div>            </div>
          </li>
          <li>
            <p>ìˆ˜ì • ë©”ì„œë“œ</p>

            <p>ìˆ˜ì •ì— ì‚¬ìš©ë˜ëŠ” ìƒí™©ì— ë”°ë¥¸ ê°’ë“¤ë§Œì„ ê°€ì§€ê³  ìƒì„±</p>

            <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">changeCount</span><span class="o">(</span><span class="kt">int</span> <span class="n">cnt</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">count</span> <span class="o">=</span> <span class="n">cnt</span><span class="o">;</span>
  <span class="o">}</span>
            
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">changePercentage</span><span class="o">(</span><span class="kt">int</span> <span class="n">percentage</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">percentage</span> <span class="o">=</span> <span class="n">percentage</span><span class="o">;</span>
  <span class="o">}</span>
            
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">changeLastCommittedTime</span><span class="o">(</span><span class="nc">LocalDateTime</span> <span class="n">lastCommittedTime</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">lastCommittedTime</span> <span class="o">=</span> <span class="n">lastCommittedTime</span><span class="o">;</span>
  <span class="o">}</span>
</code></pre></div>            </div>

            <ul>
              <li><code class="language-plaintext highlighter-rouge">changeCount</code> : Mapì—ì„œì˜ ê° Pointì˜ ì‹¤ì‹œê°„ ì¸¡ì • ì¸ì› ìˆ˜ì˜ ë³€í™”ë¥¼ ìœ„í•œ ìˆ˜ì • ë©”ì„œë“œ</li>
              <li><code class="language-plaintext highlighter-rouge">changePercentage</code> : Mapì—ì„œì˜ ê° Pointì˜ ì‹¤ì‹œê°„ í˜¼ì¡ë„ ë³€í™”ë¥¼ ìœ„í•œ ìˆ˜ì • ë©”ì„œë“œ</li>
              <li><code class="language-plaintext highlighter-rouge">changeLastCommittedTime</code> : ê°€ì¥ ìµœê·¼ ì ‘ê·¼ ì‹œê°„ â†’ í•´ë‹¹ ì‹œê°„ ì´í›„ì˜ ë°ì´í„°ë¥¼ ì¸ì§€í•˜ê¸° ìœ„í•¨</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Info(ê²€ì¶œ ê°ì²´)
        <ul>
          <li>
            <p>ì—°ê´€ê´€ê³„ ë©”ì„œë“œ</p>

            <p>Pointì™€ ì–‘ë°©í–¥ ì—°ê´€ ê´€ê³„ : Infoê°€ ìƒì„±ë˜ë©´ Pointì˜ post listì— ë”í•´ì¤„ í•„ìš”ê°€ ìˆìŒ(â†’ í•´ë‹¹ ê²€ì¶œëœ ê°ì²´(Info)ê°€ ì–´ëŠ ì¥ì†Œ(Point)ì˜ ê²€ì¶œ ê²°ê³¼ì¸ì§€ ë§¤í•‘í•˜ê¸° ìœ„í•¨). ì—°ê´€ê´€ê³„ ë©”ì„œë“œëŠ” ìƒì„±ë©”ì„œë“œ ì•ˆì—ì„œë§Œ ì‚¬ìš©ë˜ë„ë¡ privateìœ¼ë¡œ ì„¤ì •</p>

            <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">private</span> <span class="kt">void</span> <span class="nf">setPoint</span><span class="o">(</span><span class="nc">Point</span> <span class="n">point</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">point</span> <span class="o">=</span> <span class="n">point</span><span class="o">;</span>
      <span class="n">point</span><span class="o">.</span><span class="na">getInfos</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
  <span class="o">}</span>
</code></pre></div>            </div>
          </li>
          <li>
            <p>ìƒì„± ë©”ì„œë“œ</p>

            <p>ì—°ê´€ê´€ê³„ë¥¼ ì´ìš©í•˜ë©° ìƒì„±í•  í•„ìš”ê°€ ìˆìŒ (Pointì™€ì˜ ì—°ê´€ê´€ê³„)</p>

            <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Info</span> <span class="nf">createInfo</span><span class="o">(</span><span class="nc">Point</span> <span class="n">point</span><span class="o">,</span> <span class="nc">Temp</span> <span class="n">temp</span><span class="o">)</span> <span class="o">{</span>
      <span class="nc">Info</span> <span class="n">info</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Info</span><span class="o">();</span>
      <span class="n">info</span><span class="o">.</span><span class="na">date</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="na">getDate</span><span class="o">();</span>
      <span class="n">info</span><span class="o">.</span><span class="na">leftValue</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="na">getLeftValue</span><span class="o">();</span>
      <span class="n">info</span><span class="o">.</span><span class="na">topValue</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="na">getTopValue</span><span class="o">();</span>
      <span class="n">info</span><span class="o">.</span><span class="na">widthValue</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="na">getWidthValue</span><span class="o">();</span>
      <span class="n">info</span><span class="o">.</span><span class="na">heightValue</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="na">getHeightValue</span><span class="o">();</span>
      <span class="n">info</span><span class="o">.</span><span class="na">lon</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="na">getLon</span><span class="o">();</span>
      <span class="n">info</span><span class="o">.</span><span class="na">lat</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="na">getLat</span><span class="o">();</span>
      <span class="n">info</span><span class="o">.</span><span class="na">droneHeight</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="na">getDroneHeight</span><span class="o">();</span>
      <span class="n">info</span><span class="o">.</span><span class="na">azimuth</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="na">getAzimuth</span><span class="o">();</span>
      <span class="n">info</span><span class="o">.</span><span class="na">setPoint</span><span class="o">(</span><span class="n">point</span><span class="o">);</span>
      <span class="k">return</span> <span class="n">info</span><span class="o">;</span>
  <span class="o">}</span>
</code></pre></div>            </div>

            <ul>
              <li>ì—°ê´€ê´€ê³„ë¥¼ ìœ„í•´ pointë¥¼ ì¸ìë¡œ ë°›ì•„, í•´ë‹¹ pointì˜ Info Listì— í˜„ì¬ ìƒì„±ë˜ëŠ” info ì¶”ê°€. pointëŠ” í•´ë‹¹ tempì˜ ìœ„ì¹˜ì •ë³´ë¥¼ í†µí•´ ì •í•´ì§„ ì¥ì†Œ(ìœ„ì¹˜)</li>
              <li>tempëŠ” infoì˜ ëª¨ë“  ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆëŠ” ê°ì²´. í•´ë‹¹ ê°ì²´ì˜ ì •ë³´ë¥¼ ë°›ì•„ì™€ ìœ„ì¹˜ì •ë³´ë¥¼ ë”°ë¼ pointì™€ì˜ ì—°ê´€ê´€ê³„ë¥¼ ì„¤ì •.</li>
            </ul>
          </li>
        </ul>
      </li>
    </ol>
  </li>
</ul>

<h2 id="application-implementation">Application Implementation</h2>

<h3 id="êµ¬í˜„-ìš”êµ¬ì‚¬í•­">êµ¬í˜„ ìš”êµ¬ì‚¬í•­</h3>

<ul>
  <li>ê¸°ëŠ¥ ëª©ë¡
    <ol>
      <li>ê³µí†µ ê´€ì‹¬ì‚¬ ì²˜ë¦¬ (Interceptor)
        <ul>
          <li>ê²€ì¶œ ê°ì²´ì™€ ì¥ì†Œ ë§¤í•‘</li>
        </ul>
      </li>
      <li>Map ê¸°ëŠ¥ (ì§€ë„)
        <ul>
          <li>ëª¨ë“  ì¥ì†Œ Floating</li>
          <li>ì¥ì†Œ ì •ë³´ ì œê³µ ( ì‹¤ì‹œê°„ ë³€ê²½ â†’ ì¸¡ì • ì¸ì›, í˜¼ì¡ë„)</li>
          <li>ì¥ì†Œ ê²€ìƒ‰</li>
        </ul>
      </li>
      <li>Statics ê¸°ëŠ¥ (ë¶„ì„)
        <ul>
          <li>ì‹¤ì‹œê°„ ì¸¡ì • ì¸ì› ë° ë³€ê²½ ì¸ì› ì œê³µ</li>
          <li>ëˆ„ì  ë°ì´í„° ë¶„ì„ ì œê³µ</li>
          <li>ì¥ì†Œ ê²€ìƒ‰</li>
        </ul>
      </li>
    </ol>
  </li>
</ul>

<h3 id="ì•„í‚¤í…ì³-êµ¬ì„±">ì•„í‚¤í…ì³ êµ¬ì„±</h3>

<p><img src="/images/posts/post-220617/Untitled 7.png" alt="" /></p>

<ul>
  <li>ê³„ì¸µí˜• êµ¬ì¡° ì‚¬ìš©
    <ul>
      <li>controller, web: ì›¹ ê³„ì¸µ</li>
      <li>service: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, íŠ¸ëœì­ì…˜ ì²˜ë¦¬</li>
      <li>repository: JPAë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ëŠ” ê³„ì¸µ, ì—”í‹°í‹° ë§¤ë‹ˆì € ì‚¬ìš©</li>
      <li>domain: ì—”í‹°í‹°ê°€ ëª¨ì—¬ ìˆëŠ” ê³„ì¸µ, ëª¨ë“  ê³„ì¸µì—ì„œ ì‚¬ìš©</li>
    </ul>
  </li>
  <li>
    <p>íŒ¨í‚¤ì§€ êµ¬ì¡°</p>

    <p>Group6.capstone</p>

    <ul>
      <li>config : Interceptorê´€ë ¨ ì„¤ì •</li>
      <li>Interceptor : custom Interceptor êµ¬í˜„</li>
      <li>controller : web ê³„ì¸µ ê´€ë ¨ êµ¬í˜„</li>
      <li>service : Business Logic, Transaction ì •ì˜ ë° êµ¬í˜„</li>
      <li>repository :  EM(JPA), DB connect ì •ì˜ ë° êµ¬í˜„</li>
      <li>domain : Entity ì •ì˜ ë° êµ¬í˜„</li>
    </ul>
  </li>
</ul>

<aside>
ğŸ’¡ <strong>ê°œë°œ ìˆœì„œ</strong> <br />
ì„œë¹„ìŠ¤, ë¦¬í¬ì§€í† ë¦¬ ê³„ì¸µì„ ê°œë°œí•˜ê³ , í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ì‘ì„±í•´ì„œ ê²€ì¦(í…ŒìŠ¤íŠ¸ ì½”ë“œëŠ” ìƒëµ), ë§ˆì§€ë§‰ì— ì›¹ ê³„ì¸µ ì ìš©

</aside>

<h3 id="ì¥ì†Œ-ë¡œì§-ê°œë°œ-point">ì¥ì†Œ ë¡œì§ ê°œë°œ (Point)</h3>

<blockquote>
  <p>êµ¬í˜„ ìˆœì„œ</p>
  <ul>
    <li>ì¥ì†Œ ë ˆí¬ì§€í† ë¦¬ ê°œë°œ</li>
    <li>ì¥ì†Œ ì„œë¹„ìŠ¤ ê°œë°œ</li>
  </ul>

</blockquote>

<p>Point (Repository, Service)</p>

<ul>
  <li>ì¥ì†Œ ë ˆí¬ì§€í† ë¦¬ (PointRepository)
    <ul>
      <li>JPAë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ì—¬ Point Entityì™€ ê´€ë ¨ëœ Tableì— ì ‘ê·¼í•˜ëŠ” ê³„ì¸µ</li>
      <li>DI(Dependency Injection) : EntityManager(JPA)</li>
      <li><code class="language-plaintext highlighter-rouge">public List&lt;Point&gt; findAll()</code> : ëª¨ë“  ì¥ì†Œ ì¡°íšŒ. jpql(<code class="language-plaintext highlighter-rouge">em.createQuery</code>) ì‚¬ìš©</li>
      <li><code class="language-plaintext highlighter-rouge">public Point findOne(Long id)</code> : idë¥¼ í†µí•´ í•˜ë‚˜ì˜ ì¥ì†Œ ì¡°íšŒ. <code class="language-plaintext highlighter-rouge">em.find</code> ì‚¬ìš©</li>
      <li><code class="language-plaintext highlighter-rouge">public Point findByName(String name)</code> : ì´ë¦„ì„ í†µí•´ í•˜ë‚˜ì˜ íšŒì› ì¡°íšŒ.  jpql(<code class="language-plaintext highlighter-rouge">em.createQuery</code>), whereë¬¸ ì‚¬ìš©</li>
    </ul>
  </li>
  <li>ì¥ì†Œì„œë¹„ìŠ¤ (PointService)
    <ul>
      <li>Business Logic, Transaction ì •ì˜ ë° êµ¬í˜„</li>
      <li>DI(Dependency Injection) : ì¥ì†Œ ë ˆí¬ì§€í† ë¦¬(PointRepository)</li>
      <li><strong>@Transactional(readOnly = true)</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">public List&lt;Point&gt; findAll()</code> : ë¦¬í¬ì§€í† ë¦¬ ë‹¨ìˆœ ìœ„ì„</li>
          <li><code class="language-plaintext highlighter-rouge">public Point findOne(Long id)</code> : ë¦¬í¬ì§€í† ë¦¬ ë‹¨ìˆœ ìœ„ì„</li>
          <li><code class="language-plaintext highlighter-rouge">public Point findByName(String name)</code> : ë¦¬í¬ì§€í† ë¦¬ ë‹¨ìˆœ ìœ„ì„</li>
          <li><code class="language-plaintext highlighter-rouge">public List&lt;Integer&gt; getStaticsData(String name)</code>
            <ul>
              <li>ë¶„ì„ í™”ë©´ì— ì œê³µë  ëˆ„ì  ë°ì´í„° ìƒì„± ë° ë°˜í™˜</li>
              <li><code class="language-plaintext highlighter-rouge">findByName()</code> ì„ í†µí•´ í•´ë‹¹ nameì„ ê°€ì§€ëŠ” pointì— ëŒ€í•´ì„œ â€˜5ì¼ ê°„ì˜ ë°ì´í„°â€™, â€˜í•´ë‹¹ ë‚ ì§œì˜ 3ì‹œê°„ê°„ì˜ ë°ì´í„°â€™ ë¥¼ ê°€ì ¸ì™€ ì œê³µ</li>
              <li>5ì¼ ê°„ì˜ ë°ì´í„° : 5ì¼ê°„ì˜ ì¸¡ì • ì¸ì› ìˆ˜ë¥¼ Listì— ì¶”ê°€(+5)</li>
              <li>3ì‹œê°„ì˜ ë°ì´í„° : 3ì‹œê°„ë™ì•ˆ(1,2,3)ì˜ ì¸¡ì • ì¸ì›ìˆ˜ë¥¼ Listì— ì¶”ê°€(+3)</li>
              <li>ë°˜í™˜ : List<Integer> statics â†’ size : 8, `[1ì¼ì „, 2ì¼ì „, ... , 5ì¼ì „, 1ì‹œê°„ì „, 2ì‹œê°„ì „, 3ì‹œê°„ì „]`</Integer></li>
            </ul>
          </li>
        </ul>
      </li>
      <li><strong>@Transactional</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">public void updatePoint(Long id)</code>
            <ul>
              <li>Point, Info ì—°ê´€ê´€ê³„ ë§¤í•‘ì´ ì´ë£¨ì–´ì§„ ë§ˆì§€ë§‰ ì‹œê° â†’ ì¶”í›„ í•´ë‹¹ ì‹œê° ì´í›„ì˜ ë°ì´í„°ë§Œì„ ë¶ˆëŸ¬ì™€ ë§¤í•‘ í•´ì£¼ê¸° ìœ„í•¨</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h3 id="ê²€ì¶œ-ë°ì´í„°-ë¡œì§-ê°œë°œ-temp">ê²€ì¶œ ë°ì´í„° ë¡œì§ ê°œë°œ (Temp)</h3>

<blockquote>
  <p>êµ¬í˜„ ìˆœì„œ</p>
  <ul>
    <li>ê²€ì¶œë°ì´í„° ë ˆí¬ì§€í† ë¦¬ ê°œë°œ</li>
    <li>ê²€ì¶œë°ì´í„° ì„œë¹„ìŠ¤ ê°œë°œ</li>
  </ul>

</blockquote>

<p>Temp (Repository, Service)</p>

<ul>
  <li>ë¼ì´ë¸Œë¡œ ë°›ì•„ì˜¬ ë•Œ ì“°ëŠ” ë°ì´í„°, Infoë¡œ ë³€í™˜í•˜ê¸° ìœ„í•œ ì„ì‹œ ë°ì´í„°</li>
  <li>ê²€ì¶œë°ì´í„° ë ˆí¬ì§€í† ë¦¬ (TempRepository)
    <ul>
      <li>í•´ë‹¹ ë°ì´í„°ëŠ” ë“œë¡ ì— ì˜í•´ ì´ë¯¸ DBì— ìˆëŠ” Entity</li>
      <li>navtive queryë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ë¯€ë¡œ Spring Data JPAë¥¼ ì‚¬ìš©í•˜ì—¬ Temp Entityì™€ ê´€ë ¨ëœ Tableì— ì ‘ê·¼í•˜ëŠ” ê³„ì¸µâ†’ <code class="language-plaintext highlighter-rouge">public interface TempRepository extends JpaRepository&lt;Temp, Long&gt;</code></li>
      <li><code class="language-plaintext highlighter-rouge">List&lt;Temp&gt; getLiveData()</code> : ìš”ì²­ëœ ì‹œì ì—ì„œì˜ 10ì´ˆì „ë¶€í„° í˜„ì¬ê¹Œì§€ì˜ ê²€ì¶œ ê°ì²´ ì¡°íšŒ.  <code class="language-plaintext highlighter-rouge">@Query(value= *query*, nativeQuery = true)</code> ì‚¬ìš©</li>
      <li><code class="language-plaintext highlighter-rouge">List&lt;Temp&gt; getLastData(@Param(value = "last_commit") LocalDateTime lastCommittedTime);</code> : lastCommitedTime ì´í›„ì˜ ê²€ì¶œ ê°ì²´ ì¡°íšŒ.
        <ul>
          <li><code class="language-plaintext highlighter-rouge">@Param</code> : nativeQueryì—ì„œ ë³€ìˆ˜ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•œ íŒŒë¼ë¯¸í„° ì„¤ì •</li>
          <li><code class="language-plaintext highlighter-rouge">@Query(value= *query*, nativeQuery = true)</code> ì‚¬ìš©</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>ê²€ì¶œë°ì´í„° ì„œë¹„ìŠ¤ (TempService)
    <ul>
      <li>Business Logic, Transaction ì •ì˜ ë° êµ¬í˜„</li>
      <li>DI(Dependency Injection) : ê²€ì¶œë°ì´í„°  ë ˆí¬ì§€í† ë¦¬(TempRepository)</li>
      <li><strong>@Transactional(readOnly = true)</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">public List&lt;Temp&gt; getLiveData()</code> : ë¦¬í¬ì§€í† ë¦¬ ë‹¨ìˆœ ìœ„ì„</li>
        </ul>
      </li>
      <li><strong>@Transactional</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">public int getLiveCount(Long id)</code>
            <ul>
              <li>ì‹¤ì‹œê°„ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ Countí•˜ëŠ” service</li>
              <li>idì— í•´ë‹¹ í•˜ëŠ” pointì˜ ì˜ì—­ì— ë§ëŠ” ì‹¤ì‹œê°„ ë°ì´í„° tempì˜ ê°œìˆ˜ë¥¼ count</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h3 id="ê²€ì¶œ-ê°ì²´-ë¡œì§-ê°œë°œ-info">ê²€ì¶œ ê°ì²´ ë¡œì§ ê°œë°œ (Info)</h3>

<blockquote>
  <p>êµ¬í˜„ ìˆœì„œ</p>
  <ul>
    <li>ê²€ì¶œê°ì²´ ë ˆí¬ì§€í† ë¦¬ ê°œë°œ</li>
    <li>ê²€ì¶œê°ì²´ ì„œë¹„ìŠ¤ ê°œë°œ</li>
  </ul>

</blockquote>

<p>Info (Repository, Service)</p>

<ul>
  <li>ë¼ì´ë¸Œë¡œ ì ì¬ëœ ë°ì´í„°(Temp)ë¥¼ Pointì™€ ì—°ê´€ê´€ê³„ë¥¼ ìƒì„±í•˜ì—¬ ì €ì¥í•˜ëŠ” ë°ì´í„°</li>
  <li>ê²€ì¶œê°ì²´ ë ˆí¬ì§€í† ë¦¬ (InfoRepository)
    <ul>
      <li><code class="language-plaintext highlighter-rouge">public void save(Info info)</code> : ì—°ê´€ê´€ê³„ë¥¼ ìƒì„±í•œ info ì €ì¥. <code class="language-plaintext highlighter-rouge">em.persist()</code> ì‚¬ìš©</li>
      <li>í•´ë‹¹ info ë°ì´í„°ë“¤ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ê±´ pointì˜ info Listí†µí•´ ë¶ˆëŸ¬ì˜´</li>
    </ul>
  </li>
  <li>ê²€ì¶œê°ì²´ ì„œë¹„ìŠ¤ (InfoService)
    <ul>
      <li>Business Logic, Transaction ì •ì˜ ë° êµ¬í˜„</li>
      <li>DI(Dependency Injection) : ê²€ì¶œê°ì²´ ë ˆí¬ì§€í† ë¦¬(InfoRepository)</li>
      <li><strong>@Transactional</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">public void createInfo(Long id)</code>
            <ul>
              <li>ì—°ê´€ê´€ê³„ë¥¼ ìƒì„±í•˜ì—¬ Infoë¥¼ ì €ì¥í•˜ëŠ” service</li>
              <li>idì— í•´ë‹¹ í•˜ëŠ” pointì˜ ì˜ì—­ì— ë§ëŠ” ì‹¤ì‹œê°„ ë°ì´í„° tempì™€ ì—°ê´€ê´€ê³„ë¥¼ ë§ºì€ Infoë¥¼ ìƒì„±í•˜ì—¬ ì €ì¥</li>
              <li>ì¶”ê°€ë¡œ pointì˜ ì‹¤ì‹œê°„ ë°˜ì˜ ë°ì´í„°(count, percentage)ë„ ë³€ê²½ (ë³€ê²½ê°ì§€ë¥¼ í†µí•´ ì €ì¥)</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h3 id="ê³µí†µ-ê´€ì‹¬ì‚¬-ì²˜ë¦¬-ê¸°ëŠ¥-ê°œë°œ">ê³µí†µ ê´€ì‹¬ì‚¬ ì²˜ë¦¬ ê¸°ëŠ¥ ê°œë°œ</h3>

<blockquote>
  <p>êµ¬í˜„ ê¸°ëŠ¥</p>
  <ul>
    <li>ê²€ì¶œ ê°ì²´ì™€ ì¥ì†Œ ë§¤í•‘</li>
  </ul>

  <p>êµ¬í˜„ ìˆœì„œ</p>
  <ul>
    <li>Interceptor ê°œë°œ</li>
    <li>WebConfig ì„¤ì • ë° ê°œë°œ</li>
  </ul>

</blockquote>

<ol>
  <li>ê¸°ëŠ¥ ì„¤ëª…
    <ul>
      <li>ê²€ì¶œ ê°ì²´ì™€ ì¥ì†Œ ë§¤í•‘
        <ul>
          <li>Interceptor ì‚¬ìš© (ê³µí†µ ê´€ì‹¬ì‚¬ ì²˜ë¦¬)</li>
          <li>Clientì˜ ì„œë¹„ìŠ¤ ë„ì… ì‹œì (Map, Static ì„œë¹„ìŠ¤ ìš”ì²­ ì‹œ)ì— ìƒˆë¡œ ëˆ„ì ëœ ë°ì´í„°(ê²€ì¶œ ê°ì²´)ë“¤ì— ëŒ€í•´ì„œ ì¥ì†Œ(Place)ì— Mapping í•˜ê¸° ìœ„í•¨ â†’ ì—°ê´€ê´€ê³„ ìƒì„±</li>
          <li>ë“œë¡ ì„ í†µí•´ ì¶•ì ëœ DBì˜ ê°’ì„ ë°›ì•„ì™€ ì—°ê´€ê´€ê³„ë¥¼ ë§Œë“¤ê¸° ìœ„í•¨</li>
          <li>í•´ë‹¹ <code class="language-plaintext highlighter-rouge">"/", "/statics", "/statics/**"</code> URIë“¤ì— ëŒ€í•´ ì ìš©</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>ê¸°ëŠ¥ ê°œë°œ
    <ul>
      <li>custome Interceptor
        <ul>
          <li><code class="language-plaintext highlighter-rouge">UpdateInterceptor implements HandlerInterceptor</code>
            <ul>
              <li>ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì‹¤í–‰í•˜ê¸° ì „ì— í•´ë‹¹ ë¡œì§ ì‹¤í–‰ (preHandle)</li>
              <li>DI(Dependency Injection) : <code class="language-plaintext highlighter-rouge">infoService</code>, <code class="language-plaintext highlighter-rouge">pointService</code></li>
              <li><code class="language-plaintext highlighter-rouge">preHandle</code>
                <ul>
                  <li>ëª¨ë“  pointë“¤ì— ëŒ€í•´ ìµœê·¼ ì—…ë°ì´íŠ¸ëœ ì‹œì ë¶€í„° í˜„ì¬ê¹Œì§€ ëˆ„ì ëœ ëª¨ë“  Temp(ê²€ì¶œ ë°ì´í„°)ì™€ ì—°ê´€ê´€ê³„ë¥¼ ìƒì„±í•œ Info ìƒì„± â†’ (ëˆ„ì  ë¶„ì„ë°ì´í„°ì— í™œìš©)  â†’ <code class="language-plaintext highlighter-rouge">infoService.createInfo</code></li>
                  <li>ì¶”ê°€ë¡œ pointì˜ ìµœê·¼ ì—…ë°ì´íŠ¸ ì‹œê°„ ë³€ê²½ â†’ <code class="language-plaintext highlighter-rouge">pointService.updatePoint</code></li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Web Configurer
        <ul>
          <li>ìƒì„±í•œ Interceptorë¥¼ Webì— ì ìš©</li>
          <li>DI(Dependency Injection) : <code class="language-plaintext highlighter-rouge">updateInterceptor</code></li>
          <li><code class="language-plaintext highlighter-rouge">WebConfig</code>
            <ul>
              <li><code class="language-plaintext highlighter-rouge">public void addInterceptors(InterceptorRegistry registry)</code> : ì¸í„°ì…‰í„° ë“±ë¡ : <code class="language-plaintext highlighter-rouge">updateInterceptor</code> ë¥¼ ì²«ë²ˆì§¸ ìˆœì„œë¡œ, <code class="language-plaintext highlighter-rouge">"/", "/statics", "/statics/**"</code> ì˜ URLë“¤ì—ë§Œ ì ìš©ë˜ë„ë¡ <code class="language-plaintext highlighter-rouge">registry</code>ì— ë“±ë¡</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ol>

<h3 id="ì›¹-ì„œë¹„ìŠ¤-ê°œë°œ-controller">ì›¹ ì„œë¹„ìŠ¤ ê°œë°œ (controller)</h3>

<blockquote>
  <p>Map(ì§€ë„) Service
â†’ êµ¬í˜„ ê¸°ëŠ¥</p>
  <ul>
    <li>ëª¨ë“  ì¥ì†Œ Floating</li>
    <li>ì¥ì†Œ ì •ë³´ ì œê³µ ( ì‹¤ì‹œê°„ ë³€ê²½ â†’ ì¸¡ì • ì¸ì›, í˜¼ì¡ë„)</li>
    <li>ì¥ì†Œ ê²€ìƒ‰</li>
  </ul>

  <p>Statics(ë¶„ì„) Service
â†’ êµ¬í˜„ ê¸°ëŠ¥</p>
  <ul>
    <li>ì‹¤ì‹œê°„ ì¸¡ì • ì¸ì› ë° ë³€ê²½ ì¸ì› ì œê³µ</li>
    <li>
      <p>ëˆ„ì  ë°ì´í„° ë¶„ì„ ì œê³µ</p>
    </li>
    <li><code class="language-plaintext highlighter-rouge">HomeController</code> â†’  @Controller
      <ul>
        <li>í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ì˜ ë™ê¸°ì‹ í†µì‹ ì„ ìœ„í•œ controller</li>
        <li>DI : <code class="language-plaintext highlighter-rouge">PointService</code>, <code class="language-plaintext highlighter-rouge">TempService</code></li>
        <li><code class="language-plaintext highlighter-rouge">@ModelAttribute("pointList")</code> : í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ëª¨ë“  methodì— point Listê°€ í•„ìš”í•˜ë¯€ë¡œ modelì— ê¸°ë³¸ìœ¼ë¡œ ì¶”ê°€</li>
        <li><code class="language-plaintext highlighter-rouge">@RequestMapping("/")</code>
          <ul>
            <li>home(Map) í™”ë©´ ë Œë”ë§</li>
            <li>Map í™”ë©´ ë° ëª¨ë“  pointë¥¼ Mapí™”ë©´ ì— Floating</li>
            <li>ê° pointì˜ ìƒì„¸ ì •ë³´ (ì¥ì†Œ ëª…, í˜¼ì¡ë„, ì‹¤ì‹œê°„ ì¸¡ì • ì¸ì›)</li>
          </ul>
        </li>
        <li><code class="language-plaintext highlighter-rouge">@GetMapping(path = {"/statics/{id}", "/static"})</code>
          <ul>
            <li>Statics í™”ë©´ ë Œë”ë§</li>
            <li>ì£¼ì–´ì§„ path variableì— ë”°ë¥¸ ì¥ì†Œì˜ ë¶„ì„í™”ë©´ ë Œë”ë§ (ê¸°ë³¸ê°’ í¬í•¨) â†’ <code class="language-plaintext highlighter-rouge">pointService.findByName("ì„¸ì¢…ëŒ€ ì •ë¬¸")</code> , <code class="language-plaintext highlighter-rouge">pointService.findOne(id)</code> ì‚¬ìš©</li>
            <li>ëˆ„ì  ë°ì´í„° ë¶„ì„ ê²°ê³¼ ë Œë”ë§ â†’ <code class="language-plaintext highlighter-rouge">pointService.getStaticsData(point.getPlace())</code> ì‚¬ìš©</li>
            <li>ì‹¤ì‹œê°„ ë°ì´í„° ë¶„ì„ ê²°ê³¼ ë Œë”ë§ â†’ <code class="language-plaintext highlighter-rouge">tempService.getLiveCount(id)</code> ì‚¬ìš©</li>
          </ul>
        </li>
      </ul>
    </li>
    <li><code class="language-plaintext highlighter-rouge">RestHomeController</code>â†’ @RestController
      <ul>
        <li>í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ì˜ ë¹„ë™ê¸°ì‹ í†µì‹ ì„ ìœ„í•œ controller</li>
        <li>ì‹¤ì‹œê°„ ë°ì´í„° ë³€í™”ëŸ‰ì„ ë¹„ë™ê¸°ì‹ìœ¼ë¡œ ì œê³µ</li>
        <li>DI : <code class="language-plaintext highlighter-rouge">TempService</code></li>
        <li><code class="language-plaintext highlighter-rouge">@GetMapping("/info-live/{id}")</code>
          <ul>
            <li>í•´ë‹¹ pointì˜ ì‹¤ì‹œê°„ ì¸ì› ì¸¡ì •ëŸ‰ì„ ë°˜í™˜</li>
            <li><code class="language-plaintext highlighter-rouge">tempService.getLiveCount(id)</code> ì‚¬ìš©</li>
          </ul>
        </li>
        <li><code class="language-plaintext highlighter-rouge">@GetMapping("/infos")</code>
          <ul>
            <li>í˜„ì¬ ì¸¡ì •ëœ ëª¨ë“  ê²€ì¶œ ê°ì²´ ë°˜í™˜</li>
            <li><code class="language-plaintext highlighter-rouge">tempService.getLiveData()</code> ì‚¬ìš©</li>
            <li>Jsonìœ¼ë¡œ ë°˜í™˜ ({â€™countâ€™ : int , â€˜dataâ€™ : list})</li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</blockquote>
:ET